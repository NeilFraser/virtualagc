<!DOCTYPE doctype PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
  <head>
    <title>Virtual AGC Document Library Page</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="Author" content="Ronald Burkey">
    <link rel="icon" type="image/png" href="favicon.png">
    <meta name="author" content="Ronald S. Burkey">
    <script type="text/javascript" src="Header.js"></script>
  </head>
  <body style="background-image: url(gray3.jpg);">
    <script type="text/javascript">
document.write(headerTemplate.replace("@TITLE@","Virtual AGC Project").replace("@SUBTITLE@","Space Shuttle Flight Software"))
</script><br>
    <div align="center"><i>(This page is preliminary and almost-entirely
        speculative at this point, since we don't yet have the unique
        materials which it hopes to provide.)</i><br>
    </div>
    <h1>Table of Contents </h1>
    <ul>
      <li> <a moz-do-not-send="true" href="#Introduction">Introduction</a></li>
      <li><a moz-do-not-send="true" href="#References">References</a></li>
      <li><a moz-do-not-send="true" href="#PASS">PASS and BFS Source
          Code</a></li>
      <li><a moz-do-not-send="true" href="#Emulation">Emulation</a></li>
    </ul>
    <h1><a name="Introduction"></a>Introduction</h1>
    <p>In so far as the Space Shuttle is concerned, my goals at present
      are the following:<br>
    </p>
    <ul>
      <li>To provide the complete source code for the software of its
        onboard computer systems.</li>
      <li>To provide all of the official documentation needed to
        understand that software and to work with it.&nbsp; See the <a
          moz-do-not-send="true" href="#References">References</a>.<br>
      </li>
      <li>To provide development tools suitable for working with the
        source code, and in particular for compiling/assembling it into
        executable form.</li>
      <li>To provide an emulator suitable for running that executable
        code.</li>
      <li>For the emulator to be integrated into space-flight simulation
        systems such as Orbiter+SSU or FlightGear.</li>
    </ul>
    <p>Now, there are various nuances to the statements above, such as
      whether access to source code must be restricted in some ways,
      rather than being freely available.&nbsp; And by "the" source
      code, do I mean <i>all</i> revisions?&nbsp; Do I mean for <i>all</i>
      components of the system?&nbsp; And by "the" development tools, do
      I mean the original ones, or do I mean partial work-alikes?&nbsp;
      And by emulation, do I mean emulation of the entire stack of code,
      or just for some restricted portion of it?&nbsp; Answers to those
      questions will become clear in the sections below, though there
      aren't necessarily unique correct answers.&nbsp; One thing I can
      say unequivocally is that integration into space-flight simulation
      systems is my <i>hope</i> rather than anything that I'll actively
      pursue; integration is the prerogative of the developers of those
      space-flight simulators, rather than mine, if they feel it's
      worthwhile for them.<br>
    </p>
    <p>My explanation of the Shuttle's computer system here will by
      necessity be rather limited.&nbsp; The system is simply too
      complex, and there are too many resources already available on the
      web for me to suppose that a presentation by a johnny-come-lately
      like me would be worthwhile or even interesting.&nbsp; Perhaps the
      best place to get an introduction would be <a
        moz-do-not-send="true"
href="https://www.ibiblio.org/apollo/Shuttle/Computers%20in%20Spaceflight%20-%20Chapter%204.pdf">Chapter



        4, "Computers in the Space Shuttle Avionics System", of James
        Tomayko's <i>Computers in Spaceflight: The NASA Experience</i></a>.<br>
    </p>
    <p>With that said, here's a brief synopsis.<br>
    </p>
    <p>The portion of the Shuttle's full avionics system which concerns
      us is the <i>Data Process System (DPS)</i>, which includes the <i>General



        Purpose Computers (GPC)</i>, the crew interface
      (cathode-ray-tube monitors and keyboards), the mass-memory units,
      and the data-bus network interconnecting all of them.&nbsp; Here
      is Figure 4-2, swiped from the afore-mentioned <i>Computers in
        Spaceflight</i>, showing most of those components:<br>
    </p>
    <div align="center"><img moz-do-not-send="true"
        src="DPS%20block%20diagram.png" alt="" width="805" height="445"><br>
      <div align="left"><br>
        As you can see, there are five separate GPCs.&nbsp; Each of the
        GPCs is an AP-101S computer, designed and manufactured by IBM's
        Federal Services Division (like the Apollo LVDC or Gemini OBC,
        but not similar to them).<br>
        <br>
        Four of the GPCs run <i>identical</i> software, known as the <i>Primary



          Flight Software (PFS)</i> atop the <i>Flight Control
          Operating System (FCOS)</i>.&nbsp; PFS and FCOS together are
        collectively referred to as the <i>Primary Avionics Software
          Subsystem (PASS)</i>.&nbsp; The behaviors of these four copies
        of FCOS are synchronized ... not on a CPU-cycle by CPU-cycle
        basis, but to the extent that inputs to the GPCs from the
        spacecraft, as well as commands output from the GPCs to the
        spacecraft, occur at the same time.&nbsp; In particular, the
        fact that outputs from the GPCs are synchronized allows
        detection if one of the GPCs is behaving abnormally.<br>
        <br>
        The fifth GPC instead runs the <i>Backup Flight Software (BFS)</i>,
        created entirely separately from PASS in a clean-room
        fashion.&nbsp; This fifth GPC serves roughly the same purpose in
        the Shuttle as the Abort Guidance System (AGS) in the Apollo
        LM.&nbsp; BFS is specialized for abort functionality, i.e.,
        reentry in the absence of a reliable set of GPCs running
        PASS.&nbsp; <br>
        <br>
        The data bus, I'm told, is MIL-STD-1553.<br>
        <br>
        The crew-interface devices include:<br>
        <ul>
          <li>26 line by 51 character cathode ray tubes (CRTs).&nbsp;
            The displays were capable of displaying some graphics as
            well as text.&nbsp; The pilots had 3 MDUs, while the mission
            specialist station had a 4th.&nbsp; Later on, 6 liquid
            crystal displays (LCDs), similar in external appearance to
            the CRTs, were added for the pilots.&nbsp; Together, the
            CRTs and LCDs were referred to as Multifunction Display
            Units (MCDUs). <br>
          </li>
          <li>Keyboards from Ebonex.&nbsp; The pilots had 2 of these,
            and the mission specialist station had a 3rd.</li>
        </ul>
        <div align="center"><img moz-do-not-send="true"
            src="DPS%20keyboard%20and%20CRT.png" alt="" width="952"
            height="730"><br>
          <br>
        </div>
      </div>
      <div align="left">Here's a more-inclusive diagram (click to
        enlarge<a moz-do-not-send="true"
href="Shuttle/Architecture%20of%20the%20Space%20Shuttle%20Primary%20Avionics%20Software%20System%20Sept%201984.pdf"></a>)
        of the entire avionics system, if you feel the need for one:<br>
        <br>
        <div align="center"><a href="shuttle_avionics_sm.jpg"><img
              moz-do-not-send="true" src="shuttle_avionics_sm-small.jpg"
              alt="" title="Click to enlarge" width="1200" height="333"
              border="2"></a><br>
        </div>
        <br>
        <br>
        Like the AGC, AGS, and LVDC, which are programmed essentially in
        the assembly language native to their CPU types, the Flight
        Control Operating System (FCOS) is written in the assembly
        language of the AP-101S CPU.&nbsp; The bulk of the software,
        however, is the Primary Flight Software (PFS), and the PFS is
        written in a higher-level language called HAL/S.&nbsp; <a
          moz-do-not-send="true"
          href="Shuttle/DPS%20Overview%20Workbook.pdf#page=22">The DPS
          Overview Workbook</a> explains the overall structure of the
        software better than I can:&nbsp; <br>
        <blockquote>"PASS software consists of two types of software:
          system software and application software. System software runs
          the GPC. It is responsible for tasks such as GPC–to–GPC
          communication, loading software from MMUs, and timekeeping
          activities. Application software is software that runs the
          orbiter. This includes software that calculates orbiter
          trajectories and maneuvers, monitors various orbiter systems
          (such as power, communications, and life support), and
          supports mission–specific payload operations. The application
          software is divided into broad functional areas called major
          functions; in turn, each major function consists of
          Operational Sequences (OPS), which are loaded into the GPCs
          for each major phase of flight.<br>
          <br>
          "Finally, each OPS has one or more Major Modes (MMs) that
          address individual events or subphases of the flight."<br>
          <br>
        </blockquote>
        <div align="center"><img moz-do-not-send="true"
            src="Shuttle%20flight%20computer%20software.png" alt=""
            width="626" height="538"><br>
        </div>
      </div>
    </div>
    <ul>
    </ul>
    <h1><a name="References"></a>References</h1>
    <p>All documents I can find that I feel are relevant to discussion
      of the Space Shuttle's onboard computer systems and their software
      have been collected on <a moz-do-not-send="true"
        href="links-shuttle.html">our Space Shuttle Library page</a>.&nbsp;



      However, here are some websites that have additional documents
      that you may find interesting, and which may still contain
      relevant materials that I've overlooked:<br>
    </p>
    <ul>
      <li><a moz-do-not-send="true"
href="https://www.nasa.gov/centers/johnson/news/flightdatafiles/foia_archive.html">Johnson



          Space Center's FOIA archive of flight data files</a>.</li>
      <li><a moz-do-not-send="true"
          href="https://sourceforge.net/projects/shuttleultra/files/References/">The



          Space Shuttle Ultra site, particularly its reference section</a>.&nbsp;



        Space Shuttle Ultra (SSU) is an add-on for the Orbiter
        spaceflight simulation system.</li>
      <li><a moz-do-not-send="true"
          href="https://wiki.flightgear.org/Space_Shuttle_Avionics">The
          FlightGear wiki entry on Space Shuttle avionics</a>.&nbsp;
        FlightGear is a flight simulation system.</li>
      <li><a moz-do-not-send="true"
          href="https://gandalfddi.z19.web.core.windows.net/shuttle.html">Ken



          Hollis's Space Shuttle page</a>.</li>
      <li><a moz-do-not-send="true" href="https://ntrs.nasa.gov/">The
          NASA Technical Reports Server (NTRS)</a>.</li>
    </ul>
    <h1><a name="PASS"></a>PASS and BFS Source Code</h1>
    <p>I have become aware that multiple collectors have copies of what
      I think may be the complete final revision of PASS and possibly
      BFS, as well as others who may possess incomplete non-final
      revisions.&nbsp; This is remarkable in contrast to my frustrations
      in acquiring AGC/AGS/LVDC/OBS software as described elsewhere on
      this site, particularly since a former developer of Shuttle
      software has told me that: <br>
    </p>
    <blockquote>
      <p>"When NASA shut down the Space Shuttle project, they erased all
        of the backup storage media — since there WAS NO REQUIREMENT for
        saving source code!&nbsp; Most of the HAL/S compiler and related
        tools (like ... other support software were not saved), but all
        of the HAL/S-based flight code was preserved."</p>
    </blockquote>
    <p>I will keep the editorial comments I'm tempted to make to
      myself.&nbsp; As an aside, I'll also comment that fortunately the
      source code of the original HAL/S compiler was saved after all,
      but by individuals rather than by any of the organizational actors
      involve.<br>
    </p>
    <p>So ... the software still exists, which is good.&nbsp; But we
      don't have any as of yet, and whether or not we can get any of it
      remains to be seen.<br>
    </p>
    <p>But assuming that we can eventually get access to it, working
      with the code requires knowledge of the HAL/S language.&nbsp;
      Fortunately, we have a fair amount of documentation of that:<br>
    </p>
    <ol>
      <li>The recommended starting point is "<a moz-do-not-send="true"
          href="Shuttle/Programming%20in%20HAL_S%20Sept%201978.pdf">Programming

          in HAL/S</a>", which was intended as an introduction to
        programming in HAL/S and is organized as a tutorial.</li>
      <li>The tutorial itself points out that it is not a definitive
        exposition of the language, and recommends proceeding afterward
        to the <a moz-do-not-send="true"
          href="Shuttle/HAL_S%20Language%20Specification%20Nov%202005.pdf">"HAL/S

          Language Specification"</a>, which contains a much-more-formal
        specification of the language syntax ... fortunately in the form
        of easy-to-understand graphs of the syntax, rather than the (in
        my humble opinion) a less-comprehensible Backus-Naur format
        (BNF).</li>
      <li>Or to the <a moz-do-not-send="true"
          href="Shuttle/HAL_S%20Programmers%20Guide%20Nov%202005.pdf">"HAL/S

          Programmer's Guide"</a>.</li>
      <li>And finally, the <a moz-do-not-send="true"
          href="Shuttle/HAL_S-FC%20User's%20Manual%20Nov%202005.pdf">"HAL/S-FC

          User's Guide"</a> explains how to compile and execute a HAL/S
        program.&nbsp; That explanation is, of course, completely
        irrelevant to our present situation, but you may find that the
        document answers some questions left unanswered by the preceding
        documents.&nbsp; (You many notice as well that our library
        contains a "HAL/S-360 User's Guide"; that's simply a predecessor
        of the "HAL/S-FC User's Guide".&nbsp; The former assumes that
        the computer on which the compiler ran was an IBM-360, while the
        latter assumed it was some arbitrary "mainframe" to which the
        compiler had been ported.)<br>
      </li>
    </ol>
    <p>We actually have quite a few revisions of each of the middle two
      documents in our library, spanning the mid-1970's to the
      mid-2000's, though I've only chosen to link the latest versions of
      those documents above.&nbsp; Here are a few takeaways about the
      HAL/S language that I imagine would commonly be asked by newcomers
      to it:<br>
    </p>
    <ul>
      <li>HAL/S is concerned with insuring correctness by design, in the
        service of which it employs concepts from structured
        programming. <br>
      </li>
      <li>HAL/S is a strongly-typed language, but those datatypes
        include not just integers and floats (whose datatype is actually
        "scalar"), but others such vectors, matrices, and arrays (which
        is a distinct datatype from vectors and matrices).</li>
      <li>By default, the vector datatype consists of 3-vectors, while
        the matrix datatype consists of 3×3 matrices.&nbsp; Indices
        (subscripts) of vectors and matrices begin at 1 rather than 0.<br>
      </li>
      <li>Arithmetical expressions such as A=B+C work not only with
        float (scalar) and integer datatypes but with vectors and
        matrices as well, wherever compatible.</li>
      <li>There is no dynamic allocation of memory.&nbsp; Intended
        side-effects of that are that there is no stack and no
        recursion.&nbsp; The total memory usage is known at build-time.</li>
      <li>All keywords are reserved.</li>
      <li>HAL/S has no means of directly accessing specific addresses in
        memory.</li>
      <li>HAL/S statements:</li>
      <ul>
        <li>End with the semicolon (';') character.</li>
        <li>Several may appear on the same line of source.</li>
        <li>Statements may be broken across several lines of source.</li>
        <li>An end-of-line is equivalent to a space character.<br>
        </li>
      </ul>
      <li>Identifiers such as variable names:</li>
      <ul>
        <li>Maximum length of 32 characters.&nbsp; <br>
        </li>
        <li>Must begin with an alphabetic character.&nbsp; <br>
        </li>
        <li>Can contain alphanumerics and underscore characters,
          '_'.&nbsp; <b>Note:</b>&nbsp; Both upper and lower case are
          allowed, though all code samples I've seen to date involve
          only upper case.<br>
        </li>
        <li>Cannot end with an underscore.</li>
        <li>Cannot be broken across lines.</li>
        <li>HAL/S keywords cannot be used as identifiers.</li>
      </ul>
      <li>Two identifiers (variables or constants) separated by spaces
        are multiplied ... in fact, there is no explicit multiplication
        operator symbol such as '*'.&nbsp; ('*' is actually the vector
        cross-product operator.)<br>
      </li>
      <li>Constant expressions such as "3 + 1/7" are evaluated at
        compile-time rather than at runtime, to the extent possible.<br>
      </li>
    </ul>
    <p>TBD<br>
    </p>
    <h1><a name="Emulation"></a>Compilation and Emulation</h1>
    When a "modern" HAL/S compiler and a means of emulating the compiled
    PASS/BFS executable code exists, I'll report on it in this section.<br>
    <br>
    Until then, I'll merely point out that <a moz-do-not-send="true"
href="https://github.com/virtualagc/virtualagc/blob/master/yaShuttle/README.md">the
      development roadmap and reports on progress along that roadmap
      appear in the associated README</a> file in our software
    repository.<br>
    <br>
    <hr style="width: 100%; height: 2px;">
    <center><br>
      <span style="color: rgb(84, 89, 93); font-family: sans-serif;
        font-size: 11.05px; font-style: normal; font-variant: normal;
        font-weight: normal; letter-spacing: normal; line-height:
        16.575px; orphans: auto; text-align: center; text-indent: 0px;
        text-transform: none; white-space: normal; widows: 1;
        word-spacing: 0px; -webkit-text-stroke-width: 0px; display:
        inline !important; float: none; background-color: rgb(255, 255,
        255);"> This page is available under the <a
          href="https://creativecommons.org/publicdomain/zero/1.0/">
          Creative Commons No Rights Reserved License</a> </span><br>
      <i><font size="-1">Last modified by <a
            href="mailto:info@sandroid.org">Ronald Burkey</a> on
          2022-11-13 <br>
          <br>
          <a href="https://www.ibiblio.org"> <img style="border: 0px
              solid ; width: 300px; height: 100px;" alt="Virtual AGC is
              hosted by ibiblio.org" src="hosted.png" width="300"
              height="100"></a><br>
        </font></i></center>
    <br>
  </body>
</html>
