<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta content="text/html;charset=ISO-8859-1" http-equiv="Content-Type">
<title>Assembly listing generated by yaYUL</title>
<style type="text/css">
p.nobreak { white-space:nowrap; }
a { text-decoration:none; }
</style>
<style type="text/css">
.op{
font-weight: bold;
color: #993300;
}
</style>
<style type="text/css">
.dn{
color: #009900;
}
</style>
<style type="text/css">
.fe{
color: #FF0000;
}
</style>
<style type="text/css">
.in{
color: #FF6600;
}
</style>
<style type="text/css">
.ps{
color: #336600;
}
</style>
<style type="text/css">
.sm{
color: #0000FF;
}
</style>
<style type="text/css">
.wn{
color: #FF9900;
}
</style>
<style type="text/css">
.co{
font-style: italic;
color: #993399;
}
</style>
</head>
<body>
<p class="nobreak">
<span style="font-family: monospace;">
<pre>
<h1>Source Code</h1>
</pre>
</span>
</p>
<table style="text-align: left;" border="1" cellpadding="2" cellspacing="2">
<tbody>
<tr>
<td style="white-space: nowrap; vertical-align: middle;">
<img alt="" src="Apollo32.png" style="width: 32px; height: 32px;" align="left">
</td>
<td style="vertical-align: middle;">
These source-code files are part of a reconstructed copy of Comanche 67, the
Apollo Guidance Computer (AGC) Command Module (CM) software for Apollo 12.
<br><br>
They have been adapted from sources files for Comanche 55, and updated via
disassembly of binary dumps of original core rope memory modules, part numbers
2003972-1081, 2003972-1091, 2003972-1111, 2003972-1121, 2003972-1131, and 2003972-1141. 
<br><br>
Since only binary dumps (rather than listings) of Comanche 67 are available as source material, 
all comments and labels are approximate.
They have been taken from other AGC programs where possible, or, in some places, written
from scratch to match what we believe would have been in the original listing.
</td></tr></tbody></table>

<p class="nobreak">
<span style="font-family: monospace;">
<pre>
021244,000002:                                                                                                  <span class="co">## Copyright:   Public domain.</span>
021245,000003:                                                                                                  <span class="co">## Filename:    P76.agc</span>
021246,000004:                                                                                                  <span class="co">## Purpose:     A section of Comanche revision 067.</span>
021247,000005:                                                                                                  <span class="co">##              It is part of the reconstructed source code for the flight</span>
021248,000006:                                                                                                  <span class="co">##              software for the Command Module's (CM) Apollo Guidance Computer</span>
021249,000007:                                                                                                  <span class="co">##              (AGC) for Apollo 12. No original listings of this program are</span>
021250,000008:                                                                                                  <span class="co">##              available; instead, this file was created via dissassembly of</span>
021251,000009:                                                                                                  <span class="co">##              dumps of Comanche 067 core rope modules and comparison with</span>
021252,000010:                                                                                                  <span class="co">##              other AGC programs.</span>
021253,000011:                                                                                                  <span class="co">## Assembler:   yaYUL</span>
021254,000012:                                                                                                  <span class="co">## Contact:     Ron Burkey &lt;info@sandroid.org>.</span>
021255,000013:                                                                                                  <span class="co">## Website:     www.ibiblio.org/apollo/index.html</span>
021256,000014:                                                                                                  <span class="co">## Mod history: 2023-08-16 MAS  Created from Comanche 055.</span>
021257,000015:                                                                                                  <span class="co">##              2024-05-13 MAS  Updated for Comanche 067.</span>
021258,000016: 
021259,000017:                                                                                                  <span class="co">#  1)    PROGRAM NAME - TARGET DELTA V PROGRAM (P76).</span>
021260,000018:                                                                                                  <span class="co">#  2)    FUNCTIONAL DESCRIPTION - UPON ENTRY BY ASTRONAUT ACTION, P76 FLASHES DSKY REQUESTS TO THE ASTRONAUT</span>
021261,000019:                                                                                                  <span class="co">#        TO PROVIDE VIA DSKY (1) THE DELTA V TO BE APPLIED TO THE OTHER VEHICLE STATE VECTOR AND (2) THE</span>
021262,000020:                                                                                                  <span class="co">#        TIME (TIG) AT WHICH THE OTHER VEHICLE VELOCITY WAS CHANGED BY EXECUTION OF A THRUSTING MANEUVER. THE</span>
021263,000021:                                                                                                  <span class="co">#        OTHER VEHICLE STATE VECTOR IS INTEGRATED TO TIG AND UPDATED BY THE ADDITION OF DELTA V (DELTA V HAVING</span>
021264,000022:                                                                                                  <span class="co">#        BEEN TRANSFORMED FROM LV TO REF COSYS).  USING INTEGRVS, THE PROGRAM THEN INTEGRATES THE OTHER</span>
021265,000023:                                                                                                  <span class="co">#        VEHICLE STATE VECTOR TO THE STATE VECTOR OF THIS VEHICLE, THUS INSURING THAT THE W-MATRIX AND BOTH VEHICLE</span>
021266,000024:                                                                                                  <span class="co">#        STATES CORRESPOND TO THE SAME TIME.</span>
021267,000025:                                                                                                  <span class="co">#  3)    ERASABLE INITIALIZATION REQUIRED - NONE.</span>
021268,000026:                                                                                                  <span class="co">#  4)    CALLING SEQUENCES AND EXIT MODES - CALLED BY ASTRONAUT REQUEST THRU DSKY V 37 E 76E.</span>
021269,000027:                                                                                                  <span class="co">#        EXITS BY TCF ENDOFJOB.</span>
021270,000028:                                                                                                  <span class="co">#  5)    OUTPUT - OTHER VEHICLE STATE VECTOR INTEGRATED TO TIG AND INCREMENTED BY DELTA V IN REF COSYS.</span>
021271,000029:                                                                                                  <span class="co">#        THE PUSHLIST CONTAINS THE MATRIX BY WHICH THE INPUT DELTA V MUST BE POST-MULTIPLIED TO CONVERT FROM LV</span>
021272,000030:                                                                                                  <span class="co">#        TO REF COSYS.</span>
021273,000031:                                                                                                  <span class="co">#  6)    DEBRIS - OTHER VEHICLE STATE VECTOR.</span>
021274,000032:                                                                                                  <span class="co">#  7)    SUBROUTINES CALLED - BANKCALL, GOXDSPF, CSMPREC (OR LEMPREC), ATOPCSM (OR ATOPLEM), INTSTALL, INTWAKE, PHASCHNG</span>
021275,000033:                                                                                                  <span class="co">#        INTPRET, INTEGRVS, AND MINIRECT.</span>
021276,000034:                                                                                                  <span class="co">#  8)    FLAG USE - MOONFLAG, CMOONFLAG, INTYPFLG, RASFLAG, AND MARKCTR.</span>
021277,000035: 
021278,000036: 30,2000                                           <span class="ps">BANK    </span> 30                                    
021279,000037: 13,2000                                           <span class="ps">SETLOC  </span> <a href="TAGS_FOR_RELATIVE_SETLOC_AND_BLANK_BANK_CARDS.agc.html#5037364C4F43">P76LOC</a>                                
021280,000038: 13,2000                                           <span class="ps">BANK    </span>                                       
021281,000039: 
021282,000040: 13,2071                                           <span class="ps">COUNT*  </span> $$/<a href="#503736">P76</a>                                
021283,000041: 
021284,000042: 13,2071  E7,1412                                  <span class="ps">EBANK=  </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#544947">TIG</a>                                   
021285,000043: 
<a name="503736"></a>021286,000044: 13,2071           05562        <span class="sm">P76     </span>           <span class="op">TC      </span> <a href="SERVICE_ROUTINES.agc.html#5550464C4147">UPFLAG</a>                                
021287,000045: 13,2072           00031                           <span class="ps">ADRES   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#545241434B464C47">TRACKFLG</a>                              
021288,000046: 
021289,000047: 13,2073           32221                           <span class="op">CAF     </span> <a href="#5630364E3834">V06N84</a>     +1                         <span class="co">#  FLASH VERB 06 NOUN 33, DISPLAY LAST TIG,</span>
021290,000048: 13,2074           04676                           <span class="op">TC      </span> <a href="INTER-BANK_COMMUNICATION.agc.html#42414E4B43414C4C">BANKCALL</a>                              <span class="co">#  AND WAIT FOR KEYBOARD ACTION.</span>
021291,000049: 13,2075           20720                           <span class="ps">CADR    </span> <a href="DISPLAY_INTERFACE_ROUTINES.agc.html#474F464C415348">GOFLASH</a>                               
021292,000050: 13,2076           12212                           <span class="op">TCF     </span> <a href="#454E44503736">ENDP76</a>                                
021293,000051: 13,2077           02101                           <span class="op">TC      </span> +2                                    <span class="co">#  PROCEED</span>
021294,000052: 13,2100           02073                           <span class="op">TC      </span> -5                                    <span class="co">#  STORE DATA AND REPEAT FLASHING</span>
021295,000053: 13,2101           32220                           <span class="op">CAF     </span> <a href="#5630364E3834">V06N84</a>                                <span class="co">#  FLASH LAST DELTA V,</span>
021296,000054: 13,2102           04676                           <span class="op">TC      </span> <a href="INTER-BANK_COMMUNICATION.agc.html#42414E4B43414C4C">BANKCALL</a>                              <span class="co">#  AND WAIT FOR KEYBOARD ACTION.</span>
021297,000055: 13,2103           20720                           <span class="ps">CADR    </span> <a href="DISPLAY_INTERFACE_ROUTINES.agc.html#474F464C415348">GOFLASH</a>                               
021298,000056: 13,2104           12212                           <span class="op">TCF     </span> <a href="#454E44503736">ENDP76</a>                                
021299,000057: 13,2105           02107                           <span class="op">TC      </span> +2                                    
021300,000058: 13,2106           02101                           <span class="op">TC      </span> -5                                    
021301,000059: 13,2107           06006                           <span class="op">TC      </span> <a href="INTERPRETER.agc.html#494E5450524554">INTPRET</a>                               <span class="co">#  RETURN TO INTERPRETIVE CODE</span>
021302,000060: 13,2110           77745                           <span class="in">DLOAD   </span>                                       <span class="co">#  SET D(MPAC)=TIG IN CSEC B28</span>
021303,000061: 13,2111           03413                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#544947">TIG</a>                                   
021304,000062: 13,2112           34041                           <span class="in">STCALL  </span> <a href="ORBITAL_INTEGRATION.agc.html#5444454331">TDEC1</a>                                 <span class="co">#  SET TDEC1=TIG FOR ORBITAL INTEGRATION</span>
021305,000063: 13,2113           27115                                    <a href="TAGS_FOR_RELATIVE_SETLOC_AND_BLANK_BANK_CARDS.agc.html#4F544850524543">OTHPREC</a>                               
<a name="434F4D504D4154"></a>021306,000064: 13,2114           53575        <span class="sm">COMPMAT </span>           <span class="in">VLOAD   </span> <span class="in">UNIT      </span>                            
021307,000065: 13,2115           00001                                    <a href="ORBITAL_INTEGRATION.agc.html#52415454">RATT</a>                                  
021308,000066: 13,2116           77676                           <span class="in">VCOMP   </span>                                       <span class="co">#  U(-R)</span>
021309,000067: 13,2117           00031                           <span class="in">STORE   </span> 24D                                   <span class="co">#  U(-R) TO 24D</span>
021310,000068: 13,2120           53435                           <span class="in">VXV     </span> <span class="in">UNIT      </span>                            <span class="co">#  U(-R) X V = U(V X R)</span>
021311,000069: 13,2121           00007                                    <a href="ORBITAL_INTEGRATION.agc.html#56415454">VATT</a>                                  
021312,000070: 13,2122           00023                           <span class="in">STORE   </span> 18D                                   
021313,000071: 13,2123           53435                           <span class="in">VXV     </span> <span class="in">UNIT      </span>                            <span class="co">#  U(V X R) X U(-R) = U((R X V) X R)</span>
021314,000072: 13,2124           00031                                    24D                                   
021315,000073: 13,2125           24015                           <span class="in">STOVL   </span> 12D                                   
021316,000074: 13,2126           03540                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#44454C564F56">DELVOV</a>                                
021317,000075: 13,2127           76505                           <span class="in">VXM     </span> <span class="in">VSL1      </span>                            <span class="co">#  V(MPAC)=DELTA V IN REFCOSYS</span>
021318,000076: 13,2130           00015                                    12D                                   
021319,000077: 13,2131           77655                           <span class="in">VAD     </span>                                       
021320,000078: 13,2132           00007                                    <a href="ORBITAL_INTEGRATION.agc.html#56415454">VATT</a>                                  
021321,000079: 13,2133           00007                           <span class="in">STORE   </span> 6                                     <span class="co">#  V(PD6)=VATT + DELTA V</span>
021322,000080: 13,2134           77624                           <span class="in">CALL    </span>                                       <span class="co">#  PREVENT WOULD-BE USER OF ORBITAL</span>
021323,000081: 13,2135           27452                                    <a href="INTEGRATION_INITIALIZATION.agc.html#494E545354414C4C">INTSTALL</a>                              <span class="co">#  INTEG FROM INTERFERING WITH UPDATING</span>
021324,000082: 13,2136           77624                           <span class="in">CALL    </span>                                       
021325,000083: 13,2137           26222                                    <a href="#50373653554231">P76SUB1</a>                               
021326,000084: 13,2140           53775                           <span class="in">VLOAD   </span> <span class="in">VSR*      </span>                            
021327,000085: 13,2141           00007                                    6                                     
021328,000086: 13,2142           57176                                    0,2                                   
021329,000087: 13,2143           25543                           <span class="in">STOVL   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#564356">VCV</a>                                   
021330,000088: 13,2144           00001                                    <a href="ORBITAL_INTEGRATION.agc.html#52415454">RATT</a>                                  
021331,000089: 13,2145           77657                           <span class="in">VSR*    </span>                                       
021332,000090: 13,2146           57176                                    0,2                                   
021333,000091: 13,2147           15535                           <span class="in">STODL   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#524356">RCV</a>                                   
021334,000092: 13,2150           03413                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#544947">TIG</a>                                   
021335,000093: 13,2151           01517                           <span class="in">STORE   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#544554">TET</a>                                   
021336,000094: 13,2152           71214                           <span class="in">CLEAR   </span> <span class="in">DLOAD     </span>                            
021337,000095: 13,2153           01673                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#494E545950464C47">INTYPFLG</a>                              
021338,000096: 13,2154           01571                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#54455454484953">TETTHIS</a>                               
<a name="494E544F54484953"></a>021339,000097: 13,2155           34041        <span class="sm">INTOTHIS</span>           <span class="in">STCALL  </span> <a href="ORBITAL_INTEGRATION.agc.html#5444454331">TDEC1</a>                                 
021340,000098: 13,2156           27145                                    <a href="INTEGRATION_INITIALIZATION.agc.html#494E544547525653">INTEGRVS</a>                              
021341,000099: 13,2157           77624                           <span class="in">CALL    </span>                                       
021342,000100: 13,2160           27452                                    <a href="INTEGRATION_INITIALIZATION.agc.html#494E545354414C4C">INTSTALL</a>                              
021343,000101: 13,2161           77624                           <span class="in">CALL    </span>                                       
021344,000102: 13,2162           26222                                    <a href="#50373653554231">P76SUB1</a>                               <span class="co">#  SET/CLEAR MOONFLAG</span>
021345,000103: 13,2163           77775                           <span class="in">VLOAD   </span>                                       
021346,000104: 13,2164           00017                                    <a href="ORBITAL_INTEGRATION.agc.html#5241545431">RATT1</a>                                 
021347,000105: 13,2165           01503                           <span class="in">STORE   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#5252454354">RRECT</a>                                 
021348,000106: 13,2166           15535                           <span class="in">STODL   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#524356">RCV</a>                                   
021349,000107: 13,2167           00015                                    <a href="ORBITAL_INTEGRATION.agc.html#544154">TAT</a>                                   
021350,000108: 13,2170           25517                           <span class="in">STOVL   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#544554">TET</a>                                   
021351,000109: 13,2171           00025                                    <a href="ORBITAL_INTEGRATION.agc.html#5641545431">VATT1</a>                                 
021352,000110: 13,2172           77624                           <span class="in">CALL    </span>                                       
021353,000111: 13,2173           23417                                    <a href="ORBITAL_INTEGRATION.agc.html#4D494E4952454354">MINIRECT</a>                              
021354,000112: 13,2174           77776                           <span class="in">EXIT    </span>                                       
021355,000113: 13,2175           05426                           <span class="op">TC      </span> <a href="PHASE_TABLE_MAINTENANCE.agc.html#5048415343484E47">PHASCHNG</a>                              
021356,000114: 13,2176           04024                           <span class="ps">OCT     </span> 04024                                 
021357,000115: 13,2177           05562                           <span class="op">TC      </span> <a href="SERVICE_ROUTINES.agc.html#5550464C4147">UPFLAG</a>                                
021358,000116: 13,2200           00236                           <span class="ps">ADRES   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#5245494E54464C47">REINTFLG</a>                              
021359,000117: 
021360,000118: 13,2201           06006                           <span class="op">TC      </span> <a href="INTERPRETER.agc.html#494E5450524554">INTPRET</a>                               
021361,000119: 13,2202           77624                           <span class="in">CALL    </span>                                       
021362,000120: 13,2203           26770                                    <a href="TAGS_FOR_RELATIVE_SETLOC_AND_BLANK_BANK_CARDS.agc.html#41544F504F5448">ATOPOTH</a>                               
021363,000121: 13,2204           77531                           <span class="in">SSP     </span> <span class="in">EXIT      </span>                            
021364,000122: 13,2205           00053                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#5150524554">QPRET</a>                                 
021365,000123: 13,2206           26211                                    <a href="#4F5554">OUT</a>                                   
021366,000124: 13,2207           04676                           <span class="op">TC      </span> <a href="INTER-BANK_COMMUNICATION.agc.html#42414E4B43414C4C">BANKCALL</a>                              <span class="co">#  PERMIT USE OF ORBITAL INTEGRATION</span>
021367,000125: 13,2210           27507                           <span class="ps">CADR    </span> <a href="INTEGRATION_INITIALIZATION.agc.html#494E5457414B4531">INTWAKE1</a>                              
<a name="4F5554"></a>021368,000126: 13,2211           77776        <span class="sm">OUT     </span>           <span class="in">EXIT    </span>                                       
<a name="454E44503736"></a>021369,000127: 13,2212           35035        <span class="sm">ENDP76  </span>           <span class="op">CAF     </span> <a href="FIXED-FIXED_CONSTANT_POOL.agc.html#5A45524F">ZERO</a>                                  
021370,000128: 13,2213           55126                           <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4D41524B435452">MARKCTR</a>                               <span class="co">#  CLEAR RR TRACKING MARK COUNTER</span>
021371,000129: 13,2214           55125                           <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#564846434E54">VHFCNT</a>                                
021372,000130: 
021373,000131: 13,2215           37716                           <span class="op">CAF     </span> <a href="FIXED-FIXED_CONSTANT_POOL.agc.html#4E45474F4E45">NEGONE</a>                                
021374,000132: 13,2216           55734                           <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4D524B42554632">MRKBUF2</a>                               <span class="co">#  INVALIDATE MARK BUFFER</span>
021375,000133: 
021376,000134: 13,2217           14106                           <span class="op">TCF     </span> <a href="FRESH_START_AND_RESTART.agc.html#474F544F504F4F48">GOTOPOOH</a>                              
021377,000135: 
<a name="5630364E3834"></a>021378,000136: 13,2220           01524        <span class="sm">V06N84  </span>           <span class="ps">NV      </span> 0684                                  
021379,000137: 13,2221           01441                           <span class="ps">NV      </span> 0633                                  
<a name="50373653554231"></a>021380,000138: 13,2222           67214        <span class="sm">P76SUB1 </span>           <span class="in">CLEAR   </span> <span class="in">SLOAD     </span>                            
021381,000139: 13,2223           00263                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#4D4F4F4E464C4147">MOONFLAG</a>                              
021382,000140: 13,2224           00050                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#5832">X2</a>                                    
021383,000141: 13,2225           43030                           <span class="in">BHIZ    </span> <span class="in">SET       </span>                            <span class="co">#  X2=0...CLEAR MOONFLAG</span>
021384,000142: 13,2226           26230                                    +2                                    <span class="co">#    =2.....SET MOONFLAG</span>
021385,000143: 13,2227           00063                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#4D4F4F4E464C4147">MOONFLAG</a>                              
021386,000144: 13,2230           77616                           <span class="in">RVQ     </span>                                       
021387,000145: 

End of include-file P76.agc.  Parent file is <a href="MAIN.agc.html">MAIN.agc</a>
</pre>
</span>
</p>
</body>
</html>
