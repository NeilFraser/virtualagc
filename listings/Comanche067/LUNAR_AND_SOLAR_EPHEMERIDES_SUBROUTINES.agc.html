<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta content="text/html;charset=ISO-8859-1" http-equiv="Content-Type">
<title>Assembly listing generated by yaYUL</title>
<style type="text/css">
p.nobreak { white-space:nowrap; }
a { text-decoration:none; }
</style>
<style type="text/css">
.op{
font-weight: bold;
color: #993300;
}
</style>
<style type="text/css">
.dn{
color: #009900;
}
</style>
<style type="text/css">
.fe{
color: #FF0000;
}
</style>
<style type="text/css">
.in{
color: #FF6600;
}
</style>
<style type="text/css">
.ps{
color: #336600;
}
</style>
<style type="text/css">
.sm{
color: #0000FF;
}
</style>
<style type="text/css">
.wn{
color: #FF9900;
}
</style>
<style type="text/css">
.co{
font-style: italic;
color: #993399;
}
</style>
</head>
<body>
<p class="nobreak">
<span style="font-family: monospace;">
<pre>
<h1>Source Code</h1>
</pre>
</span>
</p>
<table style="text-align: left;" border="1" cellpadding="2" cellspacing="2">
<tbody>
<tr>
<td style="white-space: nowrap; vertical-align: middle;">
<img alt="" src="Apollo32.png" style="width: 32px; height: 32px;" align="left">
</td>
<td style="vertical-align: middle;">
These source-code files are part of a reconstructed copy of Comanche 67, the
Apollo Guidance Computer (AGC) Command Module (CM) software for Apollo 12.
<br><br>
They have been adapted from sources files for Comanche 55, and updated via
disassembly of binary dumps of original core rope memory modules, part numbers
2003972-1081, 2003972-1091, 2003972-1111, 2003972-1121, 2003972-1131, and 2003972-1141. 
<br><br>
Since only binary dumps (rather than listings) of Comanche 67 are available as source material, 
all comments and labels are approximate.
They have been taken from other AGC programs where possible, or, in some places, written
from scratch to match what we believe would have been in the original listing.
</td></tr></tbody></table>

<p class="nobreak">
<span style="font-family: monospace;">
<pre>
033547,000002:                                                                                                  <span class="co">## Copyright:   Public domain.</span>
033548,000003:                                                                                                  <span class="co">## Filename:    LUNAR_AND_SOLAR_EPHEMERIDES_SUBROUTINES.agc</span>
033549,000004:                                                                                                  <span class="co">## Purpose:     A section of Comanche revision 067.</span>
033550,000005:                                                                                                  <span class="co">##              It is part of the reconstructed source code for the flight</span>
033551,000006:                                                                                                  <span class="co">##              software for the Command Module's (CM) Apollo Guidance Computer</span>
033552,000007:                                                                                                  <span class="co">##              (AGC) for Apollo 12. No original listings of this program are</span>
033553,000008:                                                                                                  <span class="co">##              available; instead, this file was created via dissassembly of</span>
033554,000009:                                                                                                  <span class="co">##              dumps of Comanche 067 core rope modules and comparison with</span>
033555,000010:                                                                                                  <span class="co">##              other AGC programs.</span>
033556,000011:                                                                                                  <span class="co">## Assembler:   yaYUL</span>
033557,000012:                                                                                                  <span class="co">## Contact:     Ron Burkey &lt;info@sandroid.org>.</span>
033558,000013:                                                                                                  <span class="co">## Website:     www.ibiblio.org/apollo/index.html</span>
033559,000014:                                                                                                  <span class="co">## Mod history: 2023-08-16 MAS  Created from Comanche 055.</span>
033560,000015: 
033561,000016:                                                                                                  <span class="co">#  LUNAR AND SOLAR EPHEMERIDES SUBROUTINES</span>
033562,000017: 
033563,000018:                                                                                                  <span class="co">#  FUNCTIONAL DESCRIPTION</span>
033564,000019: 
033565,000020:                                                                                                  <span class="co">#        THESE SUBROUTINES ARE USED TO DETERMINE THE POSITION AND VELOCITY</span>
033566,000021:                                                                                                  <span class="co">#        VECTORS OF THE SUN AND THE MOON RELATIVE TO THE EARTH AT THE</span>
033567,000022:                                                                                                  <span class="co">#        SPECIFIED GROUND ELAPSED TIME INPUT BY THE USER.</span>
033568,000023: 
033569,000024:                                                                                                  <span class="co">#        THE POSITION OF THE MOON IS STORED IN THE COMPUTER IN THE FORM OF</span>
033570,000025:                                                                                                  <span class="co">#        A NINTH DEGREE POLYNOMIAL APPROXIMATION WHICH IS VALID OVER A 15</span>
033571,000026:                                                                                                  <span class="co">#        DAY INTERVAL BEGINNING SHORTLY BEFORE LAUNCH.  THEREFORE THE TIME</span>
033572,000027:                                                                                                  <span class="co">#        INPUT BY THE USER SHOULD FALL WITHIN THIS 15 DAY INTERVAL.</span>
033573,000028: 
033574,000029:                                                                                                  <span class="co">#        LSPOS COMPUTES THE POSITION VECTORS OF THE SUN AND THE MOON.</span>
033575,000030: 
033576,000031:                                                                                                  <span class="co">#        LUNPOS COMPUTES THE POSITION VECTOR OF THE MOON.</span>
033577,000032: 
033578,000033:                                                                                                  <span class="co">#        LUNVEL COMPUTES THE VELOCITY VECTOR OF THE MOON.</span>
033579,000034: 
033580,000035:                                                                                                  <span class="co">#        SOLPOS COMPUTES THE POSITION VECTOR OF THE SUN.</span>
033581,000036: 
033582,000037:                                                                                                  <span class="co">#  CALLING SEQUENCE</span>
033583,000038: 
033584,000039:                                                                                                  <span class="co">#        DLOAD   CALL</span>
033585,000040:                                                                                                  <span class="co">#                TIME            GROUND ELAPSED TIME</span>
033586,000041:                                                                                                  <span class="co">#                SUBROUTINE      LSPOS OR LUNPOS OR LUNVEL OR SOLPOS</span>
033587,000042: 
033588,000043:                                                                                                  <span class="co">#  INPUT</span>
033589,000044: 
033590,000045:                                                                                                  <span class="co">#        1) SPECIFIED GROUND ELAPSED TIME IN CS X B-28 LOADED IN MPAC.</span>
033591,000046: 
033592,000047:                                                                                                  <span class="co">#        2) TIMEMO - TIME AT THE CENTER OF THE RANGE OVER WHICH THE LUNAR</span>
033593,000048:                                                                                                  <span class="co">#        POSITION POLYNOMIAL IS VALID IN CS X B-42.</span>
033594,000049: 
033595,000050:                                                                                                  <span class="co">#        3) VECOEM - VECTOR COEFFICIENTS OF THE LUNAR POSITION POLYNOMIAL</span>
033596,000051:                                                                                                  <span class="co">#        LOADED IN DESCENDING SEQUENCE IN METERS/CS**N X B-2</span>
033597,000052: 
033598,000053:                                                                                                  <span class="co">#        4) RESO - POSITION VECTOR OF THE SUN RELATIVE TO THE EARTH AT</span>
033599,000054:                                                                                                  <span class="co">#        TIMEMO IN METERS X B-38.</span>
033600,000055: 
033601,000056:                                                                                                  <span class="co">#        5) VESO - VELOCITY VECTOR OF THE SUN RELATIVE TO THE EARTH AT</span>
033602,000057:                                                                                                  <span class="co">#        TIMEMO IN METERS/CS X B-9.</span>
033603,000058:                                                                                                  <span class="co">#  </span>
033604,000059:                                                                                                  <span class="co">#        6) OMEGAES - ANGULAR VELOCITY OF THE VECTOR RESO AT TIMEMO IN</span>
033605,000060:                                                                                                  <span class="co">#        REV/CS X B+26.</span>
033606,000061: 
033607,000062:                                                                                                  <span class="co">#        ALL EXCEPT THE FIRST INPUT ARE INCLUDED IN THE PRE-LAUNCH</span>
033608,000063:                                                                                                  <span class="co">#        ERASABLE DATA LOAD.</span>
033609,000064: 
033610,000065:                                                                                                  <span class="co">#  OUTPUT - LSPOS</span>
033611,000066: 
033612,000067:                                                                                                  <span class="co">#        1) 2D OF VAC AREA CONTAINS THE POSITION VECTOR OF THE SUN RELATIVE</span>
033613,000068:                                                                                                  <span class="co">#        TO THE EARTH AT TIME INPUT BY THE USER IN METERS X B-38.</span>
033614,000069: 
033615,000070:                                                                                                  <span class="co">#        2) MPAC CONTAINS THE POSITION VECTOR OF THE MOON RELATIVE TO THE</span>
033616,000071:                                                                                                  <span class="co">#        EARTH AT TIME INPUT BY THE USER IN METERS X B-29.</span>
033617,000072: 
033618,000073:                                                                                                  <span class="co">#  OUTPUT - LUNPOS</span>
033619,000074: 
033620,000075:                                                                                                  <span class="co">#        MPAC CONTAINS THE POSITION VECTOR OF THE MOON RELATIVE TO THE</span>
033621,000076:                                                                                                  <span class="co">#        EARTH AT THE TIME INPUT BY USER IN METERS X B-29.</span>
033622,000077: 
033623,000078:                                                                                                  <span class="co">#  OUTPUT - LUNVEL</span>
033624,000079: 
033625,000080:                                                                                                  <span class="co">#        MPAC CONTAINS THE VELOCITY VECTOR OF THE MOON RELATIVE TO THE</span>
033626,000081:                                                                                                  <span class="co">#        EARTH AT TIME INPUT BY THE USER IN METERS/CS X B-7.</span>
033627,000082: 
033628,000083:                                                                                                  <span class="co">#  OUTPUT - SOLPOS</span>
033629,000084: 
033630,000085:                                                                                                  <span class="co">#        MPAC CONTAINS THE POSITION VECTOR OF THE SUN RELATIVE TO THE EARTH</span>
033631,000086:                                                                                                  <span class="co">#        AT TIME INPUT BY THE USER IN METERS X B-38.</span>
033632,000087: 
033633,000088:                                                                                                  <span class="co">#  SUBROUTINES USED</span>
033634,000089: 
033635,000090:                                                                                                  <span class="co">#        NONE</span>
033636,000091: 
033637,000092:                                                                                                  <span class="co">#  REMARKS</span>
033638,000093: 
033639,000094:                                                                                                  <span class="co">#        THE VAC AREA IS USED FOR STORAGE OF INTERMEDIATE AND FINAL RESULTS</span>
033640,000095:                                                                                                  <span class="co">#        OF COMPUTATIONS.</span>
033641,000096: 
033642,000097:                                                                                                  <span class="co">#        S1, X1 AND X2 ARE USED BY THESE SUBROUTINES.</span>
033643,000098: 
033644,000099:                                                                                                  <span class="co">#        PRELAUNCH ERASABLE DATA LOAD ARE ONLY ERASABLE STORAGE USED BY</span>
033645,000100:                                                                                                  <span class="co">#        THESE SUBROUTINES.</span>
033646,000101: 
033647,000102:                                                                                                  <span class="co">#        RESTARTS DURING OPERATION OF THESE SUBROUTINES MUST BE HANDLED BY</span>
033648,000103:                                                                                                  <span class="co">#        THE USER.</span>
033649,000104: 
033650,000105: 36,2466                                           <span class="ps">BANK    </span> 36                                    
033651,000106: 26,2000                                           <span class="ps">SETLOC  </span> <a href="TAGS_FOR_RELATIVE_SETLOC_AND_BLANK_BANK_CARDS.agc.html#455048454D">EPHEM</a>                                 
033652,000107: 26,2000                                           <span class="ps">BANK    </span>                                       
033653,000108: 
033654,000109: 26,2110                                           <span class="ps">COUNT*  </span> $$/<a href="TAGS_FOR_RELATIVE_SETLOC_AND_BLANK_BANK_CARDS.agc.html#455048454D">EPHEM</a>                              
033655,000110: 26,2110  E7,1777                                  <span class="ps">EBANK=  </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#454E442D4537">END-E7</a>                                
<a name="4C53504F53"></a>033656,000111: 26,2110           77774        <span class="sm">LSPOS   </span>           <span class="in">AXT,2   </span>                                       <span class="co">#  COMPUTES POSITION VECTORS OF BOTH THE</span>
033657,000112: 26,2111           54161                                    <a href="#52455341">RESA</a>                                  <span class="co">#  SUN AND THE MOON.  THE POSITION VECTOR</span>
033658,000113: 26,2112           52170                           <span class="in">AXT,1   </span> <span class="in">GOTO      </span>                            <span class="co">#  OF THE SUN IS STORED IN 2D OF THE VAC</span>
033659,000114: 26,2113           54143                                    <a href="#524553">RES</a>                                   <span class="co">#  AREA.  THE POSITION VECTOR OF THE MOON</span>
033660,000115: 26,2114           54126                                    <a href="#4C5354494D45">LSTIME</a>                                <span class="co">#  IS STORED IN MPAC.</span>
<a name="4C554E504F53"></a>033661,000116: 26,2115           52170        <span class="sm">LUNPOS  </span>           <span class="in">AXT,1   </span> <span class="in">GOTO      </span>                            <span class="co">#  COMPUTES THE POSITION VECTOR OF THE MOON</span>
033662,000117: 26,2116           54162                                    <a href="#52454D">REM</a>                                   <span class="co">#  AND STORES IT IN MPAC.</span>
033663,000118: 26,2117           54126                                    <a href="#4C5354494D45">LSTIME</a>                                
<a name="4C554E56454C"></a>033664,000119: 26,2120           52170        <span class="sm">LUNVEL  </span>           <span class="in">AXT,1   </span> <span class="in">GOTO      </span>                            <span class="co">#  COMPUTES THE VELOCITY VECTOR OF THE MOON</span>
033665,000120: 26,2121           54173                                    <a href="#56454D">VEM</a>                                   <span class="co">#  AND STORES IT IN MPAC.</span>
033666,000121: 26,2122           54126                                    <a href="#4C5354494D45">LSTIME</a>                                
<a name="534F4C504F53"></a>033667,000122: 26,2123           76020        <span class="sm">SOLPOS  </span>           <span class="in">STQ     </span> <span class="in">AXT,1     </span>                            <span class="co">#  COMPUTES THE POSITION VECTOR OF THE SUN</span>
033668,000123: 26,2124           00047                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#5832">X2</a>                                    <span class="co">#  AND STORES IT IN MPAC.</span>
033669,000124: 26,2125           54143                                    <a href="#524553">RES</a>                                   
<a name="4C5354494D45"></a>033670,000125: 26,2126           54201        <span class="sm">LSTIME  </span>           <span class="in">SETPD   </span> <span class="in">SR        </span>                            
033671,000126: 26,2127           00001                                    0D                                    
033672,000127: 26,2130           20617                                    14D                                   
033673,000128: 26,2131           57571                           <span class="in">TAD     </span> <span class="in">DCOMP     </span>                            
033674,000129: 26,2132           01707                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#54455048454D">TEPHEM</a>                                
033675,000130: 26,2133           57571                           <span class="in">TAD     </span> <span class="in">DCOMP     </span>                            
033676,000131: 26,2134           02034                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#54494D454D4F">TIMEMO</a>                                
033677,000132: 26,2135           66261                           <span class="in">SL      </span> <span class="in">SSP       </span>                            
033678,000133: 26,2136           20221                                    16D                                   
033679,000134: 26,2137           00051                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#5331">S1</a>                                    
033680,000135: 26,2140           00006                                    6D                                    
033681,000136: 26,2141           77650                           <span class="in">GOTO    </span>                                       
033682,000137: 26,2142           00046                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#5831">X1</a>                                    
<a name="524553"></a>033683,000138: 26,2143           41206        <span class="sm">RES     </span>           <span class="in">PUSH    </span> <span class="in">DMP       </span>                            <span class="co">#                                        PD- 2</span>
033684,000139: 26,2144           02147                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#4F4D4547414553">OMEGAES</a>                               
033685,000140: 26,2145           71406                           <span class="in">PUSH    </span> <span class="in">COS       </span>                            <span class="co">#                                        PD- 4</span>
033686,000141: 26,2146           65361                           <span class="in">VXSC    </span> <span class="in">PDDL      </span>                            <span class="co">#                                        PD- 8</span>
033687,000142: 26,2147           02133                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#5245534F">RESO</a>                                  
033688,000143: 26,2150           63356                           <span class="in">SIN     </span> <span class="in">PDVL      </span>                            <span class="co">#                                        PD-10</span>
033689,000144: 26,2151           02133                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#5245534F">RESO</a>                                  
033690,000145: 26,2152           53406                           <span class="in">PUSH    </span> <span class="in">UNIT      </span>                            <span class="co">#                                        PD-16</span>
033691,000146: 26,2153           53435                           <span class="in">VXV     </span> <span class="in">UNIT      </span>                            
033692,000147: 26,2154           02141                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#5645534F">VESO</a>                                  
033693,000148: 26,2155           76435                           <span class="in">VXV     </span> <span class="in">VSL1      </span>                            <span class="co">#                                        PD-10</span>
033694,000149: 26,2156           53361                           <span class="in">VXSC    </span> <span class="in">VAD       </span>                            <span class="co">#                                        PD-02</span>
033695,000150: 26,2157           52172                           <span class="in">VSL1    </span> <span class="in">GOTO      </span>                            <span class="co">#  RES IN METERS X B-38 IN MPAC.</span>
033696,000151: 26,2160           00047                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#5832">X2</a>                                    
<a name="52455341"></a>033697,000152: 26,2161           14003        <span class="sm">RESA    </span>           <span class="in">STODL   </span> 2D                                    <span class="co">#  RES IN METERS X B-38 IN 2D OF VAC.    PD- 0</span>
<a name="52454D"></a>033698,000153: 26,2162           63370        <span class="sm">REM     </span>           <span class="in">AXT,1   </span> <span class="in">PDVL      </span>                            <span class="co">#                                        PD- 2</span>
033699,000154: 26,2163           00066                                    54D                                   
033700,000155: 26,2164           02037                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#5645434F454D">VECOEM</a>                                
<a name="52454D41"></a>033701,000156: 26,2165           52761        <span class="sm">REMA    </span>           <span class="in">VXSC    </span> <span class="in">VAD*      </span>                            
033702,000157: 26,2166           00001                                    0D                                    
033703,000158: 26,2167           02133                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#5645434F454D">VECOEM</a>     +60D,1                     
033704,000159: 26,2170           72500                           <span class="in">TIX,1   </span> <span class="in">VSL2      </span>                            <span class="co">#  REM IN METERS X B-29 IN MPAC.</span>
033705,000160: 26,2171           54165                                    <a href="#52454D41">REMA</a>                                  
033706,000161: 26,2172           77616                           <span class="in">RVQ     </span>                                       
<a name="56454D"></a>033707,000162: 26,2173           65370        <span class="sm">VEM     </span>           <span class="in">AXT,1   </span> <span class="in">PDDL      </span>                            <span class="co">#                                        PD- 2</span>
033708,000163: 26,2174           00060                                    48D                                   
033709,000164: 26,2175           14214                                    <a href="#4E494E454234">NINEB4</a>                                
033710,000165: 26,2176           74206                           <span class="in">PUSH    </span> <span class="in">VXSC      </span>                            <span class="co">#                                        PD- 4</span>
033711,000166: 26,2177           02037                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#5645434F454D">VECOEM</a>                                
<a name="56454D41"></a>033712,000167: 26,2200           77761        <span class="sm">VEMA    </span>           <span class="in">VXSC    </span>                                       
033713,000168: 26,2201           00001                                    0D                                    
033714,000169: 26,2202           14005                           <span class="in">STODL   </span> 4D                                    <span class="co">#                                        PD- 2</span>
033715,000170: 26,2203           41425                           <span class="in">DSU     </span> <span class="in">PUSH      </span>                            <span class="co">#                                        PD- 4</span>
033716,000171: 26,2204           14216                                    <a href="#4F4E454234">ONEB4</a>                                 
033717,000172: 26,2205           53357                           <span class="in">VXSC*   </span> <span class="in">VAD       </span>                            
033718,000173: 26,2206           02125                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#5645434F454D">VECOEM</a>     +54D,1                     
033719,000174: 26,2207           00005                                    4D                                    
033720,000175: 26,2210           72500                           <span class="in">TIX,1   </span> <span class="in">VSL2      </span>                            <span class="co">#  VEM IN METERS/CS X B-7 IN MPAC.</span>
033721,000176: 26,2211           54200                                    <a href="#56454D41">VEMA</a>                                  
033722,000177: 26,2212           77616                           <span class="in">RVQ     </span>                                       
<a name="4E494E454234"></a>033723,000178: 26,2213           22000 00000  <span class="sm">NINEB4  </span>           <span class="ps">2DEC    </span> 9.0        B-4                        
033724,000179: 
<a name="4F4E454234"></a>033725,000180: 26,2215           02000 00000  <span class="sm">ONEB4   </span>           <span class="ps">2DEC    </span> 1.0        B-4                        
033726,000181: 
033727,000182: 
033728,000183: 

End of include-file LUNAR_AND_SOLAR_EPHEMERIDES_SUBROUTINES.agc.  Parent file is <a href="MAIN.agc.html">MAIN.agc</a>
</pre>
</span>
</p>
</body>
</html>
