<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta content="text/html;charset=ISO-8859-1" http-equiv="Content-Type">
<title>Assembly listing generated by yaYUL</title>
<style type="text/css">
p.nobreak { white-space:nowrap; }
a { text-decoration:none; }
</style>
<style type="text/css">
.op{
font-weight: bold;
color: #993300;
}
</style>
<style type="text/css">
.dn{
color: #009900;
}
</style>
<style type="text/css">
.fe{
color: #FF0000;
}
</style>
<style type="text/css">
.in{
color: #FF6600;
}
</style>
<style type="text/css">
.ps{
color: #336600;
}
</style>
<style type="text/css">
.sm{
color: #0000FF;
}
</style>
<style type="text/css">
.wn{
color: #FF9900;
}
</style>
<style type="text/css">
.co{
font-style: italic;
color: #993399;
}
</style>
</head>
<body>
<p class="nobreak">
<span style="font-family: monospace;">
<pre>
<h1>Source Code</h1>
</pre>
</span>
</p>
<table style="text-align: left;" border="1" cellpadding="2" cellspacing="2">
<tbody>
<tr>
<td style="white-space: nowrap; vertical-align: middle;">
<img alt="" src="Apollo32.png" style="width: 32px; height: 32px;" align="left">
</td>
<td style="vertical-align: middle;">
These source-code files were from the printout at the MIT Museum, with many thanks
to Deborah Douglas, the Museum's Curator of Science and Technology, for releasing
it to us.  The printout was digitally photographed by Paul Fjeld.  A team of 
volunteers transcribed the source code manually from these images or, where
appropriate, modified already-transcribed but similar source Colossus 249 (Apollo 9)
source code to agree with the images from the printout.  Note that the page images 
<a href="http://www.ibiblio.org/apollo/ScansForConversion/Comanche055/">
presented online</a> are of reduced quality, and that higher-quality images 
are available.  Report any conversion errors or legibility 
problems in page images to info@sandroid.org. 
Notations on the program listing read, in part:<br>
<br>
<pre>
	GAP:  ASSEMBLE REVISION 055 OF AGC PROGRAM COMANCHE BY NASA 2021113-051
	10:28 APR.  1,1969
</pre>
Note that the date is the date of the printout, not the date of the program revision.
</td></tr></tbody></table>

<p class="nobreak">
<span style="font-family: monospace;">
<pre>
063040,000002:                                                                                                  <span class="co">## Copyright:    Public domain.</span>
063041,000003:                                                                                                  <span class="co">## Filename:     KEYRUPT_UPRUPT.agc</span>
063042,000004:                                                                                                  <span class="co">## Purpose:      Part of the source code for Comanche, build 055. It</span>
063043,000005:                                                                                                  <span class="co">##               is part of the source code for the Command Module's</span>
063044,000006:                                                                                                  <span class="co">##               (CM) Apollo Guidance Computer (AGC), Apollo 11.</span>
063045,000007:                                                                                                  <span class="co">## Assembler:    yaYUL</span>
063046,000008:                                                                                                  <span class="co">## Reference:    pp. 1449-1451</span>
063047,000009:                                                                                                  <span class="co">## Contact:      Ron Burkey &lt;info@sandroid.org></span>
063048,000010:                                                                                                  <span class="co">## Website:      http://www.ibiblio.org/apollo.</span>
063049,000011:                                                                                                  <span class="co">## Mod history:  2009-05-07 RSB Adapted from Colossus249 file of the same</span>
063050,000012:                                                                                                  <span class="co">##                              name, and page images. Corrected various </span>
063051,000013:                                                                                                  <span class="co">##                              typos in the transcription of program </span>
063052,000014:                                                                                                  <span class="co">##                              comments, and these should be back-ported  </span>
063053,000015:                                                                                                  <span class="co">##                              to Colossus249.</span>
063054,000016:                                                                                                  <span class="co">##              2016-12-22 RSB  Proofed comment text using octopus/ProoferComments</span>
063055,000017:                                                                                                  <span class="co">##                              and corrected the errors found.</span>
063056,000018:                                                                                                  <span class="co">##              2017-02-05 RSB  Back-ported comment corrections </span>
063057,000019:                                                                                                  <span class="co">##                              identified while proofing Artemis 072.</span>
063058,000020:                                                                                                  <span class="co">##</span>
063059,000021:                                                                                                  <span class="co">## The contents of the "Comanche055" files, in general, are transcribed </span>
063060,000022:                                                                                                  <span class="co">## from scanned documents. </span>
063061,000023:                                                                                                  <span class="co">##</span>
063062,000024:                                                                                                  <span class="co">##       Assemble revision 055 of AGC program Comanche by NASA</span>
063063,000025:                                                                                                  <span class="co">##       2021113-051.  April 1, 1969.  </span>
063064,000026:                                                                                                  <span class="co">##</span>
063065,000027:                                                                                                  <span class="co">##       This AGC program shall also be referred to as Colossus 2A</span>
063066,000028:                                                                                                  <span class="co">##</span>
063067,000029:                                                                                                  <span class="co">##       Prepared by</span>
063068,000030:                                                                                                  <span class="co">##                       Massachusetts Institute of Technology</span>
063069,000031:                                                                                                  <span class="co">##                       75 Cambridge Parkway</span>
063070,000032:                                                                                                  <span class="co">##                       Cambridge, Massachusetts</span>
063071,000033:                                                                                                  <span class="co">##</span>
063072,000034:                                                                                                  <span class="co">##       under NASA contract NAS 9-4065.</span>
063073,000035:                                                                                                  <span class="co">##</span>
063074,000036:                                                                                                  <span class="co">## Refer directly to the online document mentioned above for further</span>
063075,000037:                                                                                                  <span class="co">## information.  Please report any errors to info@sandroid.org.</span>
063076,000038: 
</pre>
</span>
</p>
<table style="text-align: left;" border="1" cellpadding="2" cellspacing="2">
<tbody>
<tr>
<td style="white-space: nowrap; vertical-align: middle;">
<img alt="" src="Apollo32.png" style="width: 32px; height: 32px;" align="left">
</td>
<td style="vertical-align: middle;">
Page 1449
</td></tr></tbody></table>
<p class="nobreak">
<span style="font-family: monospace;">
<pre>
063078,000040: 14,3761                                           <span class="ps">BANK    </span> 14                                    
063079,000041: 07,2000                                           <span class="ps">SETLOC  </span> <a href="TAGS_FOR_RELATIVE_SETLOC_AND_BLANK_BANK_CARDS.agc.html#4B455952555054">KEYRUPT</a>                               
063080,000042: 07,2000                                           <span class="ps">BANK    </span>                                       
063081,000043: 07,3673                                           <span class="ps">COUNT*  </span> $$/KEYUP                              
063082,000044: 
<a name="4B45595255505431"></a>063083,000045: 07,3673           54016        <span class="sm">KEYRUPT1</span>           <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#42414E4B52555054">BANKRUPT</a>                              
063084,000046: 07,3674           56002                           <span class="op">XCH     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#51">Q</a>                                     
063085,000047: 07,3675           54012                           <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#5152555054">QRUPT</a>                                 
063086,000048: 07,3676           04414                           <span class="op">TC      </span> <a href="PINBALL_GAME__BUTTONS_AND_LIGHTS.agc.html#4C4F4453414D5054">LODSAMPT</a>                              <span class="co">#  TIME IS SNATCHED IN RUPT FOR NOUN 65.</span>
063087,000049: 07,3677           34362                           <span class="op">CAF     </span> <a href="PINBALL_GAME__BUTTONS_AND_LIGHTS.agc.html#4C4F5735">LOW5</a>                                  
063088,000050: 07,3700           00006                           <span class="op">EXTEND  </span>                                       
063089,000051: 07,3701           02015                           <span class="op">RAND    </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4D4E4B4559494E">MNKEYIN</a>                               <span class="co">#  CHECK IF KEYS 5M-1M ON</span>
<a name="4B4559434F4D"></a>063090,000052: 07,3702           54073        <span class="sm">KEYCOM  </span>           <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#5255505452454734">RUPTREG4</a>                              
063091,000053: 07,3703           40101                           <span class="op">CS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#464C414757524435">FLAGWRD5</a>                              
063092,000054: 07,3704           75001                           <span class="op">MASK    </span> <a href="FIXED-FIXED_CONSTANT_POOL.agc.html#4249543135">BIT15</a>                                 
063093,000055: 07,3705           26101                           <span class="op">ADS     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#464C414757524435">FLAGWRD5</a>                              
063094,000056: 
<a name="4143434550545550"></a>063095,000057: 07,3706           34371        <span class="sm">ACCEPTUP</span>           <span class="op">CAF     </span> <a href="PINBALL_GAME__BUTTONS_AND_LIGHTS.agc.html#4348525052494F">CHRPRIO</a>                               <span class="co">#  (NOTE: RUPTREG4 = KEYTEMP1)</span>
063096,000058: 07,3707           05134                           <span class="op">TC      </span> <a href="EXECUTIVE.agc.html#4E4F564143">NOVAC</a>                                 
063097,000059: 07,3710     0777                                  <span class="ps">EBANK=  </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#445350434F554E54">DSPCOUNT</a>                              
063098,000060: 07,3710           02000 60101                     <span class="ps">2CADR   </span> <a href="PINBALL_GAME__BUTTONS_AND_LIGHTS.agc.html#43484152494E">CHARIN</a>                                
063099,000061: 
063100,000062: 07,3712           30073                           <span class="op">CA      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#5255505452454734">RUPTREG4</a>                              
063101,000063: 07,3713           50064                           <span class="op">INDEX   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4C4F43435452">LOCCTR</a>                                
063102,000064: 07,3714           54154                           <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4D504143">MPAC</a>                                  <span class="co">#  LEAVE 5 BIT KEY CDE IN MPAC FOR CHARIN</span>
063103,000065: 07,3715           05333                           <span class="op">TC      </span> <a href="WAITLIST.agc.html#524553554D45">RESUME</a>                                
063104,000066: 
</pre>
</span>
</p>
<table style="text-align: left;" border="1" cellpadding="2" cellspacing="2">
<tbody>
<tr>
<td style="white-space: nowrap; vertical-align: middle;">
<img alt="" src="Apollo32.png" style="width: 32px; height: 32px;" align="left">
</td>
<td style="vertical-align: middle;">
Page 1450
</td></tr></tbody></table>
<p class="nobreak">
<span style="font-family: monospace;">
<pre>
063106,000068:                                                                                                  <span class="co">#  UPRUPT PROGRAM</span>
063107,000069: 
<a name="555052555054"></a>063108,000070: 07,3716           54016        <span class="sm">UPRUPT  </span>           <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#42414E4B52555054">BANKRUPT</a>                              
063109,000071: 07,3717           56002                           <span class="op">XCH     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#51">Q</a>                                     
063110,000072: 07,3720           54012                           <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#5152555054">QRUPT</a>                                 
063111,000073: 07,3721           04414                           <span class="op">TC      </span> <a href="PINBALL_GAME__BUTTONS_AND_LIGHTS.agc.html#4C4F4453414D5054">LODSAMPT</a>                              <span class="co">#  TIME IS SNATCHED IN RUPT FOR NOUN 65.</span>
063112,000074: 07,3722           35021                           <span class="op">CAF     </span> <a href="FIXED-FIXED_CONSTANT_POOL.agc.html#5A45524F">ZERO</a>                                  
063113,000075: 07,3723           56045                           <span class="op">XCH     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#494E4C494E4B">INLINK</a>                                
063114,000076: 07,3724           54073                           <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4B455954454D5031">KEYTEMP1</a>                              
063115,000077: 07,3725           35015                           <span class="op">CAF     </span> <a href="FIXED-FIXED_CONSTANT_POOL.agc.html#42495433">BIT3</a>                                  <span class="co">#  TURN ON UPACT LIGHT</span>
063116,000078: 07,3726           00006                           <span class="op">EXTEND  </span>                                       <span class="co">#  (BIT 3 OF CHANNEL 11)</span>
063117,000079: 07,3727           05011                           <span class="op">WOR     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4453414C4D4F5554">DSALMOUT</a>                              
<a name="555052505431"></a>063118,000080: 07,3730           34362        <span class="sm">UPRPT1  </span>           <span class="op">CAF     </span> <a href="PINBALL_GAME__BUTTONS_AND_LIGHTS.agc.html#4C4F5735">LOW5</a>                                  <span class="co">#  TEST FOR TRIPLE CHAR REDUNDANCY</span>
063119,000081: 07,3731           70073                           <span class="op">MASK    </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4B455954454D5031">KEYTEMP1</a>                              <span class="co">#  LOW5 OF WORD</span>
063120,000082: 07,3732           56073                           <span class="op">XCH     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4B455954454D5031">KEYTEMP1</a>                              <span class="co">#  LOW5 INTO KEYTEMP1</span>
063121,000083: 07,3733           00006                           <span class="op">EXTEND  </span>                                       
063122,000084: 07,3734           75006                           <span class="op">MP      </span> <a href="FIXED-FIXED_CONSTANT_POOL.agc.html#4249543130">BIT10</a>                                 <span class="co">#  SHIFT RIGHT 5</span>
063123,000085: 07,3735           54734                           <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4B455954454D5032">KEYTEMP2</a>                              
063124,000086: 07,3736           74362                           <span class="op">MASK    </span> <a href="PINBALL_GAME__BUTTONS_AND_LIGHTS.agc.html#4C4F5735">LOW5</a>                                  <span class="co">#  MID 5</span>
063125,000087: 07,3737           63773                           <span class="op">AD      </span> <a href="#48493130">HI10</a>                                  
063126,000088: 07,3740           03770                           <span class="op">TC      </span> <a href="#555054455354">UPTEST</a>                                
063127,000089: 07,3741           35006                           <span class="op">CAF     </span> <a href="FIXED-FIXED_CONSTANT_POOL.agc.html#4249543130">BIT10</a>                                 
063128,000090: 07,3742           00006                           <span class="op">EXTEND  </span>                                       
063129,000091: 07,3743           70734                           <span class="op">MP      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4B455954454D5032">KEYTEMP2</a>                              <span class="co">#  SHIFT RIGHT 5</span>
063130,000092: 07,3744           74362                           <span class="op">MASK    </span> <a href="PINBALL_GAME__BUTTONS_AND_LIGHTS.agc.html#4C4F5735">LOW5</a>                                  <span class="co">#  HIGH 5</span>
063131,000093: 07,3745           40000                           <span class="op">COM     </span>                                       
063132,000094: 07,3746           03770                           <span class="op">TC      </span> <a href="#555054455354">UPTEST</a>                                
063133,000095: 
<a name="55504F4B"></a>063134,000096: 07,3747           43776        <span class="sm">UPOK    </span>           <span class="op">CS      </span> <a href="#454C52434F4445">ELRCODE</a>                               <span class="co">#  CODE IS GOOD.  IF CODE = 'ERROR RESET',</span>
063135,000097: 07,3750           60073                           <span class="op">AD      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4B455954454D5031">KEYTEMP1</a>                              <span class="co">#  CLEAR UPLOCKFL (SET BIT4 OF FLAGWRD7 = 0)</span>
063136,000098: 07,3751           00006                           <span class="op">EXTEND  </span>                                       <span class="co">#  IF CODE DOES NOT = 'ERROR RESET', ACCEPT</span>
063137,000099: 07,3752           13760                           <span class="op">BZF     </span> <a href="#434C55504C4F434B">CLUPLOCK</a>                              <span class="co">#  CODE ONLY IF UPLOCKFL IS CLEAR (=0).</span>
063138,000100: 
063139,000101: 07,3753           35014                           <span class="op">CAF     </span> <a href="FIXED-FIXED_CONSTANT_POOL.agc.html#42495434">BIT4</a>                                  <span class="co">#  TEST UPLOCKFL FOR 0 OR 1.</span>
063140,000102: 07,3754           70103                           <span class="op">MASK    </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#464C414757524437">FLAGWRD7</a>                              
063141,000103: 07,3755           10000                           <span class="op">CCS     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#41">A</a>                                     
063142,000104: 07,3756           05333                           <span class="op">TC      </span> <a href="WAITLIST.agc.html#524553554D45">RESUME</a>                                <span class="co">#  UPLOCKFL = 1</span>
063143,000105: 07,3757           03706                           <span class="op">TC      </span> <a href="#4143434550545550">ACCEPTUP</a>                              <span class="co">#  UPLOCKFL = 0</span>
063144,000106: 
<a name="434C55504C4F434B"></a>063145,000107: 07,3760           45014        <span class="sm">CLUPLOCK</span>           <span class="op">CS      </span> <a href="FIXED-FIXED_CONSTANT_POOL.agc.html#42495434">BIT4</a>                                  <span class="co">#  CLEAR UPLOCKFL (I.E., SET BIT 4 OF</span>
063146,000108: 07,3761           70103                           <span class="op">MASK    </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#464C414757524437">FLAGWRD7</a>                              <span class="co">#  FLAGWRD7 = 0)</span>
063147,000109: 07,3762           54103                           <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#464C414757524437">FLAGWRD7</a>                              
063148,000110: 07,3763           03706                           <span class="op">TC      </span> <a href="#4143434550545550">ACCEPTUP</a>                              
063149,000111: 
063150,000112:                                                                                                  <span class="co">#  CODE IS BAD</span>
<a name="544D4641494C32"></a>063151,000113: 07,3764           40103        <span class="sm">TMFAIL2 </span>           <span class="op">CS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#464C414757524437">FLAGWRD7</a>                              <span class="co">#  LOCK OUT FURTHER UPLINK ACTIVITY</span>
063152,000114: 07,3765           75014                           <span class="op">MASK    </span> <a href="FIXED-FIXED_CONSTANT_POOL.agc.html#42495434">BIT4</a>                                  <span class="co">#  (BY SETTING UPLOCKFL = 1) UNTIL</span>
063153,000115: 07,3766           26103                           <span class="op">ADS     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#464C414757524437">FLAGWRD7</a>                              <span class="co">#  'ERROR RESET' IS SENT VIA UPLINK.</span>
063154,000116: 07,3767           05333                           <span class="op">TC      </span> <a href="WAITLIST.agc.html#524553554D45">RESUME</a>                                
<a name="555054455354"></a>063155,000117: 07,3770           60073        <span class="sm">UPTEST  </span>           <span class="op">AD      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4B455954454D5031">KEYTEMP1</a>                              
</pre>
</span>
</p>
<table style="text-align: left;" border="1" cellpadding="2" cellspacing="2">
<tbody>
<tr>
<td style="white-space: nowrap; vertical-align: middle;">
<img alt="" src="Apollo32.png" style="width: 32px; height: 32px;" align="left">
</td>
<td style="vertical-align: middle;">
Page 1451
</td></tr></tbody></table>
<p class="nobreak">
<span style="font-family: monospace;">
<pre>
063157,000119: 07,3771           10000                           <span class="op">CCS     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#41">A</a>                                     
063158,000120: 07,3772           03764                           <span class="op">TC      </span> <a href="#544D4641494C32">TMFAIL2</a>                               
<a name="48493130"></a>063159,000121: 07,3773           77740        <span class="sm">HI10    </span>           <span class="ps">OCT     </span> 77740                                 
063160,000122: 07,3774           03764                           <span class="op">TC      </span> <a href="#544D4641494C32">TMFAIL2</a>                               
063161,000123: 07,3775           00002                           <span class="op">TC      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#51">Q</a>                                     
063162,000124: 
<a name="454C52434F4445"></a>063163,000125: 07,3776           00022        <span class="sm">ELRCODE </span>           <span class="ps">OCT     </span> 22                                    
063164,000126: 
063165,000127:                                                                                                  <span class="co">#  'UPLINK ACTIVITY LIGHT' IS TURNED OFF BY .....</span>
063166,000128:                                                                                                  <span class="co">#        1.      VBRELDSP</span>
063167,000129:                                                                                                  <span class="co">#        2.      ERROR RESET</span>
063168,000130:                                                                                                  <span class="co">#        3.      UPDATE PROGRAM (P27) ENTERED BY V70,V71,V72, AND V73.</span>
063169,000131: 
063170,000132:                                                                                                  <span class="co">#                                     -</span>
063171,000133:                                                                                                  <span class="co">#  THE RECEPTION OF A BAD CODE (I.E  CCC FAILURE) LOCKS OUT FURTHER UPLINK ACTIVITY BY SETTING BIT4 OF FLAGWRD7 = 1.</span>
063172,000134:                                                                                                  <span class="co">#  THIS INDICATION WILL BE TRANSFERRED TO THE GROUND BY THE DOWNLINK WHICH DOWNLINKS ALL FLAGWORDS.</span>
063173,000135:                                                                                                  <span class="co">#  WHEN UPLINK ACTIVITY IS LOCKED OUT, IT CAN BE ALLOWED WHEN THE GROUND UPLINKS AND 'ERROR RESET' CODE.</span>
063174,000136:                                                                                                  <span class="co">#  (IT IS RECOMMENDED THAT THE 'ERROR LIGHT RESET' CODE IS PRECEEDED BY 16 BITS THE FIRST OF WHICH IS 1 FOLLOWED</span>
063175,000137:                                                                                                  <span class="co">#  BY 15 ZEROES.  THIS WILL ELIMINATE EXTRANEOUS BITS FROM INLINK WHICH MAY HAVE BEEN LEFT OVER FROM THE ORIGINAL</span>
063176,000138:                                                                                                  <span class="co">#  FAILURE)</span>
063177,000139: 
063178,000140:                                                                                                  <span class="co">#  UPLINK ACTIVITY IS ALSO ALLOWED (UNLOCKED) DURING FRESH START WHEN FRESH START SETS BIT4 OF FLAGWRD7 = 0.</span>
063179,000141: 
063180,000142: 

End of include-file KEYRUPT,_UPRUPT.agc.  Parent file is <a href="MAIN.agc.html">MAIN.agc</a>
</pre>
</span>
</p>
</body>
</html>
