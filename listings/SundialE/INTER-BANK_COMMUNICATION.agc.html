<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta content="text/html;charset=ISO-8859-1" http-equiv="Content-Type">
<title>Assembly listing generated by yaYUL</title>
<style type="text/css">
p.nobreak { white-space:nowrap; }
a { text-decoration:none; }
</style>
<style type="text/css">
.op{
font-weight: bold;
color: #993300;
}
</style>
<style type="text/css">
.dn{
color: #009900;
}
</style>
<style type="text/css">
.fe{
color: #FF0000;
}
</style>
<style type="text/css">
.in{
color: #FF6600;
}
</style>
<style type="text/css">
.ps{
color: #336600;
}
</style>
<style type="text/css">
.sm{
color: #0000FF;
}
</style>
<style type="text/css">
.wn{
color: #FF9900;
}
</style>
<style type="text/css">
.co{
font-style: italic;
color: #993399;
}
</style>
</head>
<body>
<p class="nobreak">
<span style="font-family: monospace;">
<pre>
<h1>Source Code</h1>
</pre>
</span>
</p>
<table style="text-align: left;" border="1" cellpadding="2" cellspacing="2">
<tbody>
<tr>
<td style="white-space: nowrap; vertical-align: middle;">
<img alt="" src="Apollo32.png" style="width: 32px; height: 32px;" align="left">
</td>
<td style="vertical-align: middle;">
These source-code files are part of a reconstructed copy of Sundial E, the
final release of the Block II Command Module (CM) Apollo Guidance Computer
(AGC) system test software.
<br><br>
They have been created via disassembly of binary dumps of original core rope
memory modules, part numbers 2003053-121, 2003053-151, and 2003972-211, belonging
to the MIT Museum.
<br><br>
Since only binary dumps (rather than listings) of Sundial are available as source material, 
all comments and labels are approximate.
They have been taken from other AGC programs where possible, or, in some places, written
from scratch to match what we believe would have been in the original listing.
</td></tr></tbody></table>

<p class="nobreak">
<span style="font-family: monospace;">
<pre>
001152,000002:                                                                                                  <span class="co">## Copyright:   Public domain.</span>
001153,000003:                                                                                                  <span class="co">## Filename:    INTER-BANK_COMMUNICATION.agc</span>
001154,000004:                                                                                                  <span class="co">## Purpose:     A section of Sundial E.</span>
001155,000005:                                                                                                  <span class="co">##              It is part of the reconstructed source code for the final</span>
001156,000006:                                                                                                  <span class="co">##              release of the Block II Command Module system test software. No</span>
001157,000007:                                                                                                  <span class="co">##              original listings of this program are available; instead, this</span>
001158,000008:                                                                                                  <span class="co">##              file was created via disassembly of dumps of Sundial core rope</span>
001159,000009:                                                                                                  <span class="co">##              modules and comparison with other AGC programs.</span>
001160,000010:                                                                                                  <span class="co">## Assembler:   yaYUL</span>
001161,000011:                                                                                                  <span class="co">## Contact:     Ron Burkey &lt;info@sandroid.org>.</span>
001162,000012:                                                                                                  <span class="co">## Website:     www.ibiblio.org/apollo/index.html</span>
001163,000013:                                                                                                  <span class="co">## Mod history: 2023-06-22 MAS  Created from Aurora 12.</span>
001164,000014:                                                                                                  <span class="co">##              2023-06-30 MAS  Updated for Sundial E.</span>
001165,000015: 
001166,000016:                                                                                                  <span class="co">#           THE FOLLOWING ROUTINE CAN BE USED TO CALL A SUBROUTINE IN ANOTHER BANK. IN THE BANKCALL VERSION, THE</span>
001167,000017:                                                                                                  <span class="co">#  CADR OF THE SUBROUTINE IMMEDIATELY FOLLOWS THE  TC BANKCALL  INSTRUCTION, WITH C(A) AND C(L) PRESERVED.</span>
001168,000018: 
001169,000019:    4064                                           <span class="ps">SETLOC  </span> <a href="INTERRUPT_LEAD_INS.agc.html#454E44494E544646">ENDINTFF</a>                              
<a name="42414E4B43414C4C"></a>001170,000020:    4064           52120        <span class="sm">BANKCALL</span>           <span class="op">DXCH    </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#42554632">BUF2</a>                                  <span class="co">#  SAVE INCOMING A,L.</span>
001171,000021:    4065           50002                           <span class="op">INDEX   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#51">Q</a>                                     <span class="co">#  PICK UP CADR.</span>
001172,000022:    4066           30000                           <span class="op">CA      </span> 0                                     
001173,000023:    4067           24002                           <span class="op">INCR    </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#51">Q</a>                                     <span class="co">#  SO WE RETURN TO THE LOC. AFTER THE CADR.</span>
001174,000024: 
001175,000025:                                                                                                  <span class="co">#           SWCALL IS IDENTICAL TO BANKCALL, EXCEPT THAT THE CADR ARRIVES IN A.</span>
001176,000026: 
<a name="535743414C4C"></a>001177,000027:    4070           54001        <span class="sm">SWCALL  </span>           <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4C">L</a>                                     
001178,000028:    4071           22004                           <span class="op">LXCH    </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4642414E4B">FBANK</a>                                 <span class="co">#  SWITCH BANKS, SAVING RETURN.</span>
001179,000029:    4072           76426                           <span class="op">MASK    </span> <a href="LIST_PROCESSING_INTERPRETER.agc.html#4C4F573130">LOW10</a>                                 <span class="co">#  GET SUB-ADDRESS OF CADR.</span>
001180,000030:    4073           56002                           <span class="op">XCH     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#51">Q</a>                                     <span class="co">#  A,L NOW CONTAINS DP RETURN.</span>
001181,000031:    4074           52120                           <span class="op">DXCH    </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#42554632">BUF2</a>                                  <span class="co">#  RESTORING INPUTS IF THIS IS A BANKCALL.</span>
001182,000032:    4075           50002                           <span class="op">INDEX   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#51">Q</a>                                     
001183,000033:    4076           02000                           <span class="op">TC      </span> 10000                                 <span class="co">#  SETTING Q TO SWRETURN.</span>
001184,000034: 
<a name="535752455455524E"></a>001185,000035:    4077           56120        <span class="sm">SWRETURN</span>           <span class="op">XCH     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#42554632">BUF2</a>       +1                         <span class="co">#  COMES HERE TO RETURN TO CALLER. C(A,L)</span>
001186,000036:    4100           56004                           <span class="op">XCH     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4642414E4B">FBANK</a>                                 <span class="co">#  ARE PRESERVED FOR RETURN.</span>
001187,000037:    4101           56120                           <span class="op">XCH     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#42554632">BUF2</a>       +1                         
001188,000038:    4102           00117                           <span class="op">TC      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#42554632">BUF2</a>                                  
001189,000039: 
001190,000040:                                                                                                  <span class="co">#           THE FOLLOWING ROUTINE CAN BE USED AS A UNILATERAL JUMP WITH C(A,L) PRESERVED AND THE CADR IMMEDIATELY</span>
001191,000041:                                                                                                  <span class="co">#  FOLLOWING THE TC POSTJUMP INSTRUCTION.</span>
001192,000042: 
<a name="504F53544A554D50"></a>001193,000043:    4103           56002        <span class="sm">POSTJUMP</span>           <span class="op">XCH     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#51">Q</a>                                     <span class="co">#  SAVE INCOMING C(A).</span>
001194,000044:    4104           50000                           <span class="op">INDEX   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#41">A</a>                                     <span class="co">#  GET CADR.</span>
001195,000045:    4105           30000                           <span class="op">CA      </span> 0                                     
001196,000046: 
001197,000047:                                                                                                  <span class="co">#           BANKJUMP IS THE SAME AS POSTJUMP, EXCEPT THAT THE CADR ARRIVES IN A.</span>
001198,000048: 
<a name="42414E4B4A554D50"></a>001199,000049:    4106           54004        <span class="sm">BANKJUMP</span>           <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4642414E4B">FBANK</a>                                 
001200,000050:    4107           76426                           <span class="op">MASK    </span> <a href="LIST_PROCESSING_INTERPRETER.agc.html#4C4F573130">LOW10</a>                                 
001201,000051:    4110           56002                           <span class="op">XCH     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#51">Q</a>                                     <span class="co">#  RESTORING INPUT C(A) IF THIS WAS A</span>
001202,000052:    4111           50002                           <span class="op">INDEX   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#51">Q</a>                                     <span class="co">#  POSTJUMP.</span>
001203,000053:    4112           12000                           <span class="op">TCF     </span> 10000                                 
001204,000054: 
001205,000055:                                                                                                  <span class="co">#  THE FOLLOWING ROUTINE GETS THE RETURN CADR SAVED BY SWCALL OR BANKCALL AND LEAVES IT IN A.</span>
001206,000056: 
<a name="4D414B4543414452"></a>001207,000057:    4113           36426        <span class="sm">MAKECADR</span>           <span class="op">CAF     </span> <a href="LIST_PROCESSING_INTERPRETER.agc.html#4C4F573130">LOW10</a>                                 
001208,000058:    4114           70117                           <span class="op">MASK    </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#42554632">BUF2</a>                                  
001209,000059:    4115           60120                           <span class="op">AD      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#42554632">BUF2</a>       +1                         
001210,000060:    4116           00002                           <span class="op">TC      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#51">Q</a>                                     
001211,000061: 
001212,000062:                                                                                                  <span class="co">#  THE FOLLOWING ROUTINE OBTAINS THE TWO WORDS BEGINNING AT THE ADDRESS ARRIVING IN A, AND LEAVES THEM IN</span>
001213,000063:                                                                                                  <span class="co">#  A,L.</span>
001214,000064: 
<a name="4441544143414C4C"></a>001215,000065:    4117           54001        <span class="sm">DATACALL</span>           <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4C">L</a>                                     
001216,000066:    4120           22004                           <span class="op">LXCH    </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4642414E4B">FBANK</a>                                 
001217,000067:    4121           22121                           <span class="op">LXCH    </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4D5054454D50">MPTEMP</a>                                <span class="co">#  SAVE FORMER BANK.</span>
001218,000068:    4122           76426                           <span class="op">MASK    </span> <a href="LIST_PROCESSING_INTERPRETER.agc.html#4C4F573130">LOW10</a>                                 
001219,000069:    4123           00006                           <span class="op">EXTEND  </span>                                       
001220,000070:    4124           50000                           <span class="op">INDEX   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#41">A</a>                                     
001221,000071:    4125           32001                           <span class="op">DCA     </span> 10000                                 
001222,000072: 
001223,000073:    4126           56121                           <span class="op">XCH     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4D5054454D50">MPTEMP</a>                                
001224,000074:    4127           54004                           <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4642414E4B">FBANK</a>                                 <span class="co">#  RESTORE FBANK.</span>
001225,000075:    4130           30121                           <span class="op">CA      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4D5054454D50">MPTEMP</a>                                
001226,000076:    4131           00002                           <span class="op">TC      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#51">Q</a>                                     
001227,000077: 
001228,000078:                                                                                                  <span class="co">#  THE FOLLOWING ROUTINES ARE IDENTICAL TO BANKCALL AND SWCALL EXCEPT THAT THEY ARE USED IN INTERRUPT.</span>
001229,000079: 
<a name="49424E4B43414C4C"></a>001230,000080:    4132           52077        <span class="sm">IBNKCALL</span>           <span class="op">DXCH    </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#5255505452454733">RUPTREG3</a>                              <span class="co">#  USES RUPTREG3,4 FOR DP RETURN ADDRESS.</span>
001231,000081:    4133           50002                           <span class="op">INDEX   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#51">Q</a>                                     
001232,000082:    4134           30000                           <span class="op">CAF     </span> 0                                     
001233,000083:    4135           24002                           <span class="op">INCR    </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#51">Q</a>                                     
001234,000084: 
<a name="49535743414C4C"></a>001235,000085:    4136           54001        <span class="sm">ISWCALL </span>           <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4C">L</a>                                     
001236,000086:    4137           22004                           <span class="op">LXCH    </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4642414E4B">FBANK</a>                                 
001237,000087:    4140           76426                           <span class="op">MASK    </span> <a href="LIST_PROCESSING_INTERPRETER.agc.html#4C4F573130">LOW10</a>                                 
001238,000088:    4141           56002                           <span class="op">XCH     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#51">Q</a>                                     
001239,000089:    4142           52077                           <span class="op">DXCH    </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#5255505452454733">RUPTREG3</a>                              
001240,000090:    4143           50002                           <span class="op">INDEX   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#51">Q</a>                                     
001241,000091:    4144           02000                           <span class="op">TC      </span> 10000                                 
001242,000092: 
<a name="495357524554524E"></a>001243,000093:    4145           56077        <span class="sm">ISWRETRN</span>           <span class="op">XCH     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#5255505452454734">RUPTREG4</a>                              
001244,000094:    4146           56004                           <span class="op">XCH     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4642414E4B">FBANK</a>                                 
001245,000095:    4147           56077                           <span class="op">XCH     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#5255505452454734">RUPTREG4</a>                              
001246,000096:    4150           00076                           <span class="op">TC      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#5255505452454733">RUPTREG3</a>                              
001247,000097: 
<a name="454E4449424E4B46"></a>001248,000098:    4151                        <span class="sm">ENDIBNKF</span>           <span class="ps">EQUALS  </span>                                       

End of include-file INTER-BANK_COMMUNICATION.agc.  Parent file is <a href="MAIN.agc.html">MAIN.agc</a>
</pre>
</span>
</p>
</body>
</html>
