<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta content="text/html;charset=ISO-8859-1" http-equiv="Content-Type">
<title>Assembly listing generated by yaYUL</title>
<style type="text/css">
p.nobreak { white-space:nowrap; }
a { text-decoration:none; }
</style>
<style type="text/css">
.op{
font-weight: bold;
color: #993300;
}
</style>
<style type="text/css">
.dn{
color: #009900;
}
</style>
<style type="text/css">
.fe{
color: #FF0000;
}
</style>
<style type="text/css">
.in{
color: #FF6600;
}
</style>
<style type="text/css">
.ps{
color: #336600;
}
</style>
<style type="text/css">
.sm{
color: #0000FF;
}
</style>
<style type="text/css">
.wn{
color: #FF9900;
}
</style>
<style type="text/css">
.co{
font-style: italic;
color: #993399;
}
</style>
</head>
<body>
<p class="nobreak">
<span style="font-family: monospace;">
<pre>
<h1>Source Code</h1>
</pre>
</span>
</p>
<table style="text-align: left;" border="1" cellpadding="2" cellspacing="2">
<tbody>
<tr>
<td style="white-space: nowrap; vertical-align: middle;">
<img alt="" src="Apollo32.png" style="width: 32px; height: 32px;" align="left">
</td>
<td style="vertical-align: middle;">
These source-code files derive from a printout of Luminary 116 (the Apollo 12
Lunar Module guidance computer program), from the personal library of 
original AGC developer Don Eyles, digitally photographed at archive.org, 
financially sponsored by Ron Burkey, and transcribed to source code by a
team of volunteers.  This colorized, syntax-highlighted form was created
by assembling that transcribed source code.  Note that the full page images
are available <a href="https://archive.org/details/luminary11600nasa">on the
Virtual AGC project page at archive.org</a>, while reduced-size images
<a href="http://www.ibiblio.org/apollo/ScansForConversion/Luminary116/">
are presented at the VirtualAGC project website</a>.  Report or fix any 
transcription errors at <a href="https://github.com/virtualagc/virtualagc/issues/">
the Virtual AGC project code repository</a>.<br><br> 
Notations on the program listing read, in part:<br>
<br>
<pre>
	GAP:  ASSEMBLE REVISION 116 OF AGC PROGRAM LUMINARY BY NASA 2021112-071
	19:09 AUG. 11,1969
</pre>
Note that the date is the date of the printout, not the date of the program revision.
</td></tr></tbody></table>

<p class="nobreak">
<span style="font-family: monospace;">
<pre>
015550,000002:                                                                                                  <span class="co">## Copyright:   Public domain.</span>
015551,000003:                                                                                                  <span class="co">## Filename:    SYSTEM_TEST_STANDARD_LEAD_INS.agc</span>
015552,000004:                                                                                                  <span class="co">## Purpose:     A section of Luminary revision 116.</span>
015553,000005:                                                                                                  <span class="co">##              It is part of the source code for the Lunar Module's (LM) </span>
015554,000006:                                                                                                  <span class="co">##              Apollo Guidance Computer (AGC) for Apollo 12.</span>
015555,000007:                                                                                                  <span class="co">##              This file is intended to be a faithful transcription, except</span>
015556,000008:                                                                                                  <span class="co">##              that the code format has been changed to conform to the</span>
015557,000009:                                                                                                  <span class="co">##              requirements of the yaYUL assembler rather than the</span>
015558,000010:                                                                                                  <span class="co">##              original YUL assembler.</span>
015559,000011:                                                                                                  <span class="co">## Reference:   pp. 371-373</span>
015560,000012:                                                                                                  <span class="co">## Assembler:   yaYUL</span>
015561,000013:                                                                                                  <span class="co">## Contact:     Ron Burkey &lt;info@sandroid.org>.</span>
015562,000014:                                                                                                  <span class="co">## Website:     www.ibiblio.org/apollo/index.html</span>
015563,000015:                                                                                                  <span class="co">## Mod history: 2017-01-22 MAS  Created from Luminary 99.</span>
015564,000016:                                                                                                  <span class="co">##              2017-03-07 RSB  Transcribed, and then proofed comment-text using</span>
015565,000017:                                                                                                  <span class="co">##                              3-way diff vs Luminary 99 and Luminary 131.</span>
015566,000018:                                                                                                  <span class="co">##                              (Admittedly, the former is more for detecting errors</span>
015567,000019:                                                                                                  <span class="co">##                              in Luminary 99 than the other way around.)</span>
015568,000020: 
</pre>
</span>
</p>
<table style="text-align: left;" border="1" cellpadding="2" cellspacing="2">
<tbody>
<tr>
<td style="white-space: nowrap; vertical-align: middle;">
<img alt="" src="Apollo32.png" style="width: 32px; height: 32px;" align="left">
</td>
<td style="vertical-align: middle;">
Page 371
</td></tr></tbody></table>
<p class="nobreak">
<span style="font-family: monospace;">
<pre>
015570,000022: 22,3242  E5,1642                                  <span class="ps">EBANK=  </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#58534D">XSM</a>                                   
015571,000023: 
015572,000024: 33,2045                                           <span class="ps">BANK    </span> 33                                    
015573,000025: 04,2000                                           <span class="ps">SETLOC  </span> <a href="TAGS_FOR_RELATIVE_SETLOC_AND_BLANK_BANK_CARDS.agc.html#452F50524F47">E/PROG</a>                                
015574,000026: 04,2000                                           <span class="ps">BANK    </span>                                       
015575,000027: 
015576,000028: 04,2560                                           <span class="ps">COUNT*  </span> $$/P07                                
015577,000029: 
015578,000030:                                                                                                  <span class="co">#  SPECIAL PROGRAMS TO EASE THE PANGS OF ERASABLE MEMORY PROGRAMS.</span>
015579,000031: 
015580,000032:                                                                                                  <span class="co">#  E/BKCALL      FOR DOING BANKCALLS FROM AND RETURNING TO ERASABLE.</span>
015581,000033: 
015582,000034:                                                                                                  <span class="co">#  THIS ROUTINE IS CALLABLE FROM ERASABLE OR FIXED.  LIKE BANKCALL, HOWEVER, SWITCHING BETWEEN S3 AND S4</span>
015583,000035:                                                                                                  <span class="co">#  IS NOT POSSIBLE.</span>
015584,000036: 
015585,000037:                                                                                                  <span class="co">#  THE CALLING SEQUENCE IS:</span>
015586,000038: 
015587,000039:                                                                                                  <span class="co">#        TC      BANKCALL</span>
015588,000040:                                                                                                  <span class="co">#        CADR    E/BKCALL</span>
015589,000041:                                                                                                  <span class="co">#        CADR    ROUTINE         WHERE YOU WANT TO GO IN FIXED.</span>
015590,000042:                                                                                                  <span class="co">#        RETURN HERE FROM DISPLAY TERMINATE, BAD STALL OR TC Q.</span>
015591,000043:                                                                                                  <span class="co">#        RETURN HERE FROM DISPLAY PROCEED OR GOOD RETURN FROM STALL.</span>
015592,000044:                                                                                                  <span class="co">#        RETURN HERE FROM DISPLAY ENTER OR RECYCLE.</span>
015593,000045: 
015594,000046:                                                                                                  <span class="co">#  THIS ROUTINE REQUIRES TWO ERASABLES (EBUF2, +1) IN UNSWITCHED WHICH ARE UNSHARED BY INTERRUPTS AND</span>
015595,000047:                                                                                                  <span class="co">#  OTHER EMEMORY PROGRAMS.</span>
015596,000048: 
015597,000049:                                                                                                  <span class="co">#  A + L ARE PRESERVED THROUGH BANKCALL AND E/BKCALL.</span>
015598,000050: 
<a name="452F424B43414C4C"></a>015599,000051: 04,2560           52134        <span class="sm">E/BKCALL</span>           <span class="op">DXCH    </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#42554632">BUF2</a>                                  <span class="co">#  SAVE A,L AND GET DP RETURN.</span>
015600,000052: 04,2561           53167                           <span class="op">DXCH    </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4542554632">EBUF2</a>                                 <span class="co">#  SAVE DP RETURN.</span>
015601,000053: 04,2562           25166                           <span class="op">INCR    </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4542554632">EBUF2</a>                                 <span class="co">#  RETURN +1 BECAUSE DOUBLE CADR.</span>
015602,000054: 04,2563           30006                           <span class="op">CA      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4242414E4B">BBANK</a>                                 
015603,000055: 04,2564           75012                           <span class="op">MASK    </span> <a href="FIXED-FIXED_CONSTANT_POOL.agc.html#4C4F573130">LOW10</a>                                 <span class="co">#  GET CURRENT EBANK.  (SBANK SOMEDAY)</span>
015604,000056: 04,2565           27167                           <span class="op">ADS     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4542554632">EBUF2</a>      +1                         <span class="co">#  FORM BBCON.  (WAS FBANK)</span>
015605,000057: 04,2566           51166                           <span class="op">NDX     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4542554632">EBUF2</a>                                 
015606,000058: 04,2567           27777                           <span class="op">CA      </span> 0          -1                         <span class="co">#  GET CADR OF ROUTINE.</span>
015607,000059: 04,2570           04622                           <span class="op">TC      </span> <a href="INTER-BANK_COMMUNICATION.agc.html#535743414C4C">SWCALL</a>                                <span class="co">#  GO TO ROUTINE, SETTING Q TO SWRETURN</span>
015608,000060:                                                                                                  <span class="co">#  AND RESTORING A + L.</span>
015609,000061: 04,2571           02575                           <span class="op">TC      </span> +4                                    <span class="co">#  TX Q, V34, OR BAD STALL RETURN.</span>
015610,000062: 04,2572           02574                           <span class="op">TC      </span> +2                                    <span class="co">#  PROCEED OR GOOD STALL RETURN.</span>
015611,000063: 04,2573           25166                           <span class="op">INCR    </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4542554632">EBUF2</a>                                 <span class="co">#  ENTER OR RECYCLE RETURN.</span>
015612,000064: 04,2574           25166                           <span class="op">INCR    </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4542554632">EBUF2</a>                                 
<a name="452F535749544348"></a>015613,000065: 04,2575           53167        <span class="sm">E/SWITCH</span>           <span class="op">DXCH    </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4542554632">EBUF2</a>                                 
015614,000066: 04,2576           52006                           <span class="op">DTCB    </span>                                       
015615,000067: 
</pre>
</span>
</p>
<table style="text-align: left;" border="1" cellpadding="2" cellspacing="2">
<tbody>
<tr>
<td style="white-space: nowrap; vertical-align: middle;">
<img alt="" src="Apollo32.png" style="width: 32px; height: 32px;" align="left">
</td>
<td style="vertical-align: middle;">
Page 372
</td></tr></tbody></table>
<p class="nobreak">
<span style="font-family: monospace;">
<pre>
015617,000069:                                                                                                  <span class="co">#  E/CALL        FOR CALLING A FIXED MEMORY INTERPRETIVE SUBROUTINE FROM ERASABLE AND RETURNING TO ERASABLE.</span>
015618,000070: 
015619,000071:                                                                                                  <span class="co">#  THE CALLING SEQUENCE IS...</span>
015620,000072: 
015621,000073:                                                                                                  <span class="co">#        RTB</span>
015622,000074:                                                                                                  <span class="co">#                E/CALL</span>
015623,000075:                                                                                                  <span class="co">#        CADR    ROUTINE                 THE INTERPRETIVE SUBROUTINE YOU WANT.</span>
015624,000076:                                                                                                  <span class="co">#                                        RETURNS HERE IN INTERPRETIVE.</span>
015625,000077: 
<a name="452F43414C4C"></a>015626,000078: 04,2577           22164        <span class="sm">E/CALL  </span>           <span class="op">LXCH    </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4C4F43">LOC</a>                                   <span class="co">#  ADRES -1 OF CADR.</span>
015627,000079: 04,2600           50001                           <span class="op">INDEX   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4C">L</a>                                     
015628,000080: 04,2601           30001                           <span class="op">CA      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4C">L</a>                                     <span class="co">#  CADR IN A.</span>
015629,000081: 04,2602           24001                           <span class="op">INCR    </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4C">L</a>                                     
015630,000082: 04,2603           24001                           <span class="op">INCR    </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4C">L</a>                                     <span class="co">#  RETURN ADRES IN L.</span>
015631,000083: 04,2604           53167                           <span class="op">DXCH    </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4542554632">EBUF2</a>                                 <span class="co">#  STORE CADR AND RETURN.</span>
015632,000084: 04,2605           06042                           <span class="op">TC      </span> <a href="INTERPRETER.agc.html#494E5450524554">INTPRET</a>                               
015633,000085: 04,2606           77624                           <span class="in">CALL    </span>                                       
015634,000086: 04,2607           01166                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#4542554632">EBUF2</a>                                 <span class="co">#  INDIRECTLY EXECUTE ROUTINE.  IT MUST</span>
015635,000087: 04,2610           77776                           <span class="in">EXIT    </span>                                       <span class="co">#  LEAVE VIA RVQ OR EQUIVALENT.</span>
015636,000088: 04,2611           23167                           <span class="op">LXCH    </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4542554632">EBUF2</a>      +1                         <span class="co">#  PICK UP RETURN.</span>
015637,000089: 04,2612           16044                           <span class="op">TCF     </span> <a href="INTERPRETER.agc.html#494E5450524554">INTPRET</a>    +2                         <span class="co">#  SET LOC AND RETURN TO CALLER.</span>
015638,000090: 
</pre>
</span>
</p>
<table style="text-align: left;" border="1" cellpadding="2" cellspacing="2">
<tbody>
<tr>
<td style="white-space: nowrap; vertical-align: middle;">
<img alt="" src="Apollo32.png" style="width: 32px; height: 32px;" align="left">
</td>
<td style="vertical-align: middle;">
Page 373
</td></tr></tbody></table>
<p class="nobreak">
<span style="font-family: monospace;">
<pre>
015640,000092:                                                                                                  <span class="co">#  E/JOBWAK      FOR WAKING UP ERASABLE MEMORY JOBS.</span>
015641,000093: 
015642,000094:                                                                                                  <span class="co">#  THIS ROUTINE MUST BE CALLED IN INTERRUPT OR WITH INTERRUPTS INHIBITED.</span>
015643,000095: 
015644,000096:                                                                                                  <span class="co">#  THE CALLING SEQUENCE IS:</span>
015645,000097: 
015646,000098:                                                                                                  <span class="co">#        INHINT</span>
015647,000099:                                                                                                  <span class="co">#          .</span>
015648,000100:                                                                                                  <span class="co">#          .</span>
015649,000101:                                                                                                  <span class="co">#        CA      WAKEADR         ADDRESS OF SLEEPING JOB</span>
015650,000102:                                                                                                  <span class="co">#        TC      IBNKCALL</span>
015651,000103:                                                                                                  <span class="co">#        CADR    E/JOBWAK</span>
015652,000104:                                                                                                  <span class="co">#          .                     RETURNS HERE</span>
015653,000105:                                                                                                  <span class="co">#          .</span>
015654,000106:                                                                                                  <span class="co">#          .</span>
015655,000107:                                                                                                  <span class="co">#        RELINT                  IF YOU DID AN INHINT.</span>
015656,000108: 
015657,000109: 33,2045                                           <span class="ps">BANK    </span> 33                                    
015658,000110: 04,2000                                           <span class="ps">SETLOC  </span> <a href="TAGS_FOR_RELATIVE_SETLOC_AND_BLANK_BANK_CARDS.agc.html#452F50524F47">E/PROG</a>                                
015659,000111: 04,2000                                           <span class="ps">BANK    </span>                                       
015660,000112: 
015661,000113: 04,2613                                           <span class="ps">COUNT*  </span> $$/P07                                
015662,000114: 
<a name="452F4A4F4257414B"></a>015663,000115: 04,2613           05137        <span class="sm">E/JOBWAK</span>           <span class="op">TC      </span> <a href="EXECUTIVE.agc.html#4A4F4257414B45">JOBWAKE</a>                               <span class="co">#  ARRIVE IWTH ADRES IN A.</span>
015664,000116: 04,2614           44741                           <span class="op">CS      </span> <a href="FIXED-FIXED_CONSTANT_POOL.agc.html#4249543131">BIT11</a>                                 
015665,000117: 04,2615           50064                           <span class="op">NDX     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4C4F43435452">LOCCTR</a>                                
015666,000118: 04,2616           26164                           <span class="op">ADS     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4C4F43">LOC</a>                                   <span class="co">#  KNOCK FIXED MEMORY BIT OUT OF ADRES.</span>
015667,000119: 04,2617           00072                           <span class="op">TC      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#5255505452454733">RUPTREG3</a>                              <span class="co">#  RETURN</span>
015668,000120: 

End of include-file SYSTEM_TEST_STANDARD_LEAD_INS.agc.  Parent file is <a href="MAIN.agc.html">MAIN.agc</a>
</pre>
</span>
</p>
</body>
</html>
