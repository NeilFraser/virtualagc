<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta content="text/html;charset=ISO-8859-1" http-equiv="Content-Type">
<title>Assembly listing generated by yaYUL</title>
<style type="text/css">
p.nobreak { white-space:nowrap; }
a { text-decoration:none; }
</style>
<style type="text/css">
.op{
font-weight: bold;
color: #993300;
}
</style>
<style type="text/css">
.dn{
color: #009900;
}
</style>
<style type="text/css">
.fe{
color: #FF0000;
}
</style>
<style type="text/css">
.in{
color: #FF6600;
}
</style>
<style type="text/css">
.ps{
color: #336600;
}
</style>
<style type="text/css">
.sm{
color: #0000FF;
}
</style>
<style type="text/css">
.wn{
color: #FF9900;
}
</style>
<style type="text/css">
.co{
font-style: italic;
color: #993399;
}
</style>
</head>
<body>
<p class="nobreak">
<span style="font-family: monospace;">
<pre>
<h1>Source Code</h1>
</pre>
</span>
</p>
<table style="text-align: left;" border="1" cellpadding="2" cellspacing="2">
<tbody>
<tr>
<td style="white-space: nowrap; vertical-align: middle;">
<img alt="" src="Apollo32.png" style="width: 32px; height: 32px;" align="left">
</td>
<td style="vertical-align: middle;">
These source-code files are part of a reconstructed copy of Skylark 048, the
Block II Command Module (CM) Apollo Guidance Computer (AGC) software for the
Skylab-2, Skylab-3, Skylab-4, and Apollo-Soyuz Test Project missions.
<br>
<br>
They have been created via disassembly of binary dumps of the original core rope
memory modules actually flown on Skylab-2, part numbers 2010802-541, 2010802-551,
2010802-561, 2010802-571, 2010802-581, and 2010802-591. Access to these modules
was provided by the New Mexico Museum of Space History, who we are much indebted to.
<br>
<br>
The source code for the Apollo 15, 16, and 17 software, Artemis 072, was used as
a starting point. Heavy use was made of TRW 4900.5-244, Programmed Guidance Equations
for Skylark Command Module Earth Orbital Program, dated 14 February 1972. This document
contains pseudocode of essentially all of Skylark, using original program labels which
have been copied for this source reconstruction.
<br>
<br>
Since only binary dumps (rather than listings) of Skylark are available as source material, 
all comments and labels are approximate.
They have been taken from the Programmed Guidance Equations or other AGC programs where
possible, or, in some places, written from scratch to match what we believe would have
been in the original listing.
</td></tr></tbody></table>

<p class="nobreak">
<span style="font-family: monospace;">
<pre>
057926,000002:                                                                                                  <span class="co">## Copyright:   Public domain.</span>
057927,000003:                                                                                                  <span class="co">## Filename:    KEYRUPT,_UPRUPT.agc</span>
057928,000004:                                                                                                  <span class="co">## Purpose:     A section of Skylark revision 048.</span>
057929,000005:                                                                                                  <span class="co">##              It is part of the source code for the Apollo Guidance Computer (AGC)</span>
057930,000006:                                                                                                  <span class="co">##              for Skylab-2, Skylab-3, Skylab-4, and ASTP. No original listings of</span>
057931,000007:                                                                                                  <span class="co">##              this software are available; instead, this file was created via</span>
057932,000008:                                                                                                  <span class="co">##              disassembly of dumps of the core rope modules actually flown on</span>
057933,000009:                                                                                                  <span class="co">##              Skylab-2. Access to these modules was provided by the New Mexico</span>
057934,000010:                                                                                                  <span class="co">##              Museum of Space History.</span>
057935,000011:                                                                                                  <span class="co">## Assembler:   yaYUL</span>
057936,000012:                                                                                                  <span class="co">## Contact:     Ron Burkey &lt;info@sandroid.org>.</span>
057937,000013:                                                                                                  <span class="co">## Website:     www.ibiblio.org/apollo/index.html</span>
057938,000014:                                                                                                  <span class="co">## Mod history: 2023-09-04 MAS  Created from Artemis 072.</span>
057939,000015: 
057940,000016: 
057941,000017: 07,2000                                           <span class="ps">SETLOC  </span> <a href="TAGS_FOR_RELATIVE_SETLOC_AND_BLANK_BANK_CARDS.agc.html#4B455952555054">KEYRUPT</a>                               
057942,000018: 07,2000                                           <span class="ps">BANK    </span>                                       
057943,000019: 07,3617                                           <span class="ps">COUNT*  </span> $$/KEYUP                              
057944,000020: 
<a name="4B45595255505431"></a>057945,000021: 07,3617           54016        <span class="sm">KEYRUPT1</span>           <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#42414E4B52555054">BANKRUPT</a>                              
057946,000022: 07,3620           56002                           <span class="op">XCH     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#51">Q</a>                                     
057947,000023: 07,3621           54012                           <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#5152555054">QRUPT</a>                                 
057948,000024: 07,3622           04366                           <span class="op">TC      </span> <a href="PINBALL_GAME__BUTTONS_AND_LIGHTS.agc.html#4C4F4453414D5054">LODSAMPT</a>                              <span class="co">#  TIME IS SNATCHED IN RUPT FOR NOUN 65.</span>
057949,000025: 07,3623           34342                           <span class="op">CAF     </span> <a href="PINBALL_GAME__BUTTONS_AND_LIGHTS.agc.html#4C4F5735">LOW5</a>                                  
057950,000026: 07,3624           00006                           <span class="op">EXTEND  </span>                                       
057951,000027: 07,3625           02015                           <span class="op">RAND    </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4D4E4B4559494E">MNKEYIN</a>                               <span class="co">#  CHECK IF KEYS 5M-1M ON</span>
<a name="4B4559434F4D"></a>057952,000028: 07,3626           54073        <span class="sm">KEYCOM  </span>           <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#5255505452454734">RUPTREG4</a>                              
057953,000029: 07,3627           40101                           <span class="op">CS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#464C414757524435">FLAGWRD5</a>                              
057954,000030: 07,3630           74763                           <span class="op">MASK    </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#44534B59424954">DSKYBIT</a>                               
057955,000031: 07,3631           26101                           <span class="op">ADS     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#464C414757524435">FLAGWRD5</a>                              
057956,000032: 
<a name="4143434550545550"></a>057957,000033: 07,3632           05133        <span class="sm">ACCEPTUP</span>           <span class="op">TC      </span> <a href="EXECUTIVE.agc.html#4E4F5641433330">NOVAC30</a>                               <span class="co">#  (NOTE: RUPTREG4 = KEYTEMP1)</span>
057958,000034: 07,3633     1172                                  <span class="ps">EBANK=  </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#445350434F554E54">DSPCOUNT</a>                              
057959,000035: 07,3633           02000 60102                     <span class="ps">2CADR   </span> <a href="PINBALL_GAME__BUTTONS_AND_LIGHTS.agc.html#43484152494E">CHARIN</a>                                
057960,000036: 
057961,000037: 07,3635           30073                           <span class="op">CA      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#5255505452454734">RUPTREG4</a>                              
057962,000038: 07,3636           50064                           <span class="op">INDEX   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4C4F43435452">LOCCTR</a>                                
057963,000039: 07,3637           54154                           <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4D504143">MPAC</a>                                  <span class="co">#  LEAVE 5 BIT KEY CDE IN MPAC FOR CHARIN</span>
057964,000040: 07,3640           05336                           <span class="op">TC      </span> <a href="WAITLIST.agc.html#524553554D45">RESUME</a>                                
057965,000041: 
057966,000042: 
057967,000043:                                                                                                  <span class="co">#  UPRUPT PROGRAM</span>
057968,000044: 
<a name="555052555054"></a>057969,000045: 07,3641           54016        <span class="sm">UPRUPT  </span>           <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#42414E4B52555054">BANKRUPT</a>                              
057970,000046: 07,3642           56002                           <span class="op">XCH     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#51">Q</a>                                     
057971,000047: 07,3643           54012                           <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#5152555054">QRUPT</a>                                 
057972,000048: 07,3644           04366                           <span class="op">TC      </span> <a href="PINBALL_GAME__BUTTONS_AND_LIGHTS.agc.html#4C4F4453414D5054">LODSAMPT</a>                              <span class="co">#  TIME IS SNATCHED IN RUPT FOR NOUN 65.</span>
057973,000049: 07,3645           35003                           <span class="op">CAF     </span> <a href="FIXED-FIXED_CONSTANT_POOL.agc.html#5A45524F">ZERO</a>                                  
057974,000050: 07,3646           56045                           <span class="op">XCH     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#494E4C494E4B">INLINK</a>                                
057975,000051: 07,3647           54073                           <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4B455954454D5031">KEYTEMP1</a>                              
057976,000052: 07,3650           30075                           <span class="op">CA      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#464C414757524431">FLAGWRD1</a>                              
057977,000053: 07,3651           74766                           <span class="op">MASK    </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4E4F503031424954">NOP01BIT</a>                              <span class="co">#  IF = , MISSION IS IN</span>
057978,000054: 07,3652           10000                           <span class="op">CCS     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#41">A</a>                                     <span class="co">#  PRELAUNCH AND UPLINK DATA SUM IS ENABLED</span>
057979,000055: 07,3653           13657                           <span class="op">TCF     </span> +4                                    <span class="co">#  IF FLAGWORD1 BIT 12 =1, IT IS NOT</span>
057980,000056: 07,3654           30073                           <span class="op">CA      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4B455954454D5031">KEYTEMP1</a>                              <span class="co">#  ALLOWED.</span>
057981,000057: 07,3655           27110                           <span class="op">ADS     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#555053554D">UPSUM</a>                                 
057982,000058: 07,3656           25111                           <span class="op">INCR    </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#555053554D">UPSUM</a>      +1                         
057983,000059: 07,3657           34777                           <span class="op">CAF     </span> <a href="FIXED-FIXED_CONSTANT_POOL.agc.html#42495433">BIT3</a>                                  <span class="co">#  TURN ON UPACT LIGHT</span>
057984,000060: 07,3660           00006                           <span class="op">EXTEND  </span>                                       <span class="co">#  (BIT 3 OF CHANNEL 11)</span>
057985,000061: 07,3661           05011                           <span class="op">WOR     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4453414C4D4F5554">DSALMOUT</a>                              
<a name="555052505431"></a>057986,000062: 07,3662           34342        <span class="sm">UPRPT1  </span>           <span class="op">CAF     </span> <a href="PINBALL_GAME__BUTTONS_AND_LIGHTS.agc.html#4C4F5735">LOW5</a>                                  <span class="co">#  TEST FOR TRIPLE CHAR REDUNDANCY</span>
057987,000063: 07,3663           70073                           <span class="op">MASK    </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4B455954454D5031">KEYTEMP1</a>                              <span class="co">#  LOW5 OF WORD</span>
057988,000064: 07,3664           56073                           <span class="op">XCH     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4B455954454D5031">KEYTEMP1</a>                              <span class="co">#  LOW5 INTO KEYTEMP1</span>
057989,000065: 07,3665           00006                           <span class="op">EXTEND  </span>                                       
057990,000066: 07,3666           74770                           <span class="op">MP      </span> <a href="FIXED-FIXED_CONSTANT_POOL.agc.html#4249543130">BIT10</a>                                 <span class="co">#  SHIFT RIGHT 5</span>
057991,000067: 07,3667           55127                           <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4B455954454D5032">KEYTEMP2</a>                              
057992,000068: 07,3670           74342                           <span class="op">MASK    </span> <a href="PINBALL_GAME__BUTTONS_AND_LIGHTS.agc.html#4C4F5735">LOW5</a>                                  <span class="co">#  MID 5</span>
057993,000069: 07,3671           63725                           <span class="op">AD      </span> <a href="#48493130">HI10</a>                                  
057994,000070: 07,3672           03722                           <span class="op">TC      </span> <a href="#555054455354">UPTEST</a>                                
057995,000071: 07,3673           34770                           <span class="op">CAF     </span> <a href="FIXED-FIXED_CONSTANT_POOL.agc.html#4249543130">BIT10</a>                                 
057996,000072: 07,3674           00006                           <span class="op">EXTEND  </span>                                       
057997,000073: 07,3675           71127                           <span class="op">MP      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4B455954454D5032">KEYTEMP2</a>                              <span class="co">#  SHIFT RIGHT 5</span>
057998,000074: 07,3676           74342                           <span class="op">MASK    </span> <a href="PINBALL_GAME__BUTTONS_AND_LIGHTS.agc.html#4C4F5735">LOW5</a>                                  <span class="co">#  HIGH 5</span>
057999,000075: 07,3677           40000                           <span class="op">COM     </span>                                       
058000,000076: 07,3700           03722                           <span class="op">TC      </span> <a href="#555054455354">UPTEST</a>                                
058001,000077: 
<a name="55504F4B"></a>058002,000078: 07,3701           45011        <span class="sm">UPOK    </span>           <span class="op">CS      </span> <a href="#454C52434F4445">ELRCODE</a>                               <span class="co">#  CODE IS GOOD. IF CODE = 'ERROR RESET',</span>
058003,000079: 07,3702           60073                           <span class="op">AD      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4B455954454D5031">KEYTEMP1</a>                              <span class="co">#  CLEAR UPLOCKFL (SET BIT4 OF FLAGWRD7 = 0)</span>
058004,000080: 07,3703           00006                           <span class="op">EXTEND  </span>                                       <span class="co">#  IF CODE DOES NOT = 'ERROR RESET', ACCEPT</span>
058005,000081: 07,3704           13712                           <span class="op">BZF     </span> <a href="#434C55504C4F434B">CLUPLOCK</a>                              <span class="co">#  CODE ONLY IF UPLOCKFL IS CLEAR (=0).</span>
058006,000082: 
058007,000083: 07,3705           34776                           <span class="op">CAF     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#55504C4F43424954">UPLOCBIT</a>                              <span class="co">#  TEST UPLOCKFL FOR 0 OR 1</span>
058008,000084: 07,3706           70103                           <span class="op">MASK    </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#464C414757524437">FLAGWRD7</a>                              
058009,000085: 07,3707           10000                           <span class="op">CCS     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#41">A</a>                                     
058010,000086: 07,3710           05336                           <span class="op">TC      </span> <a href="WAITLIST.agc.html#524553554D45">RESUME</a>                                <span class="co">#  UPLOCKFL = 1</span>
058011,000087: 07,3711           03632                           <span class="op">TC      </span> <a href="#4143434550545550">ACCEPTUP</a>                              <span class="co">#  UPLOCKFL = 0</span>
058012,000088: 
<a name="434C55504C4F434B"></a>058013,000089: 07,3712           44776        <span class="sm">CLUPLOCK</span>           <span class="op">CS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#55504C4F43424954">UPLOCBIT</a>                              <span class="co">#  CLEAR UPLOCKFL (I.E., SET BIT 4 OF</span>
058014,000090: 07,3713           70103                           <span class="op">MASK    </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#464C414757524437">FLAGWRD7</a>                              <span class="co">#  FLAGWRD7 = 0)</span>
058015,000091: 07,3714           54103                           <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#464C414757524437">FLAGWRD7</a>                              
058016,000092: 07,3715           03632                           <span class="op">TC      </span> <a href="#4143434550545550">ACCEPTUP</a>                              
058017,000093:                                                                                                  <span class="co">#  CODE IS BAD</span>
<a name="544D4641494C32"></a>058018,000094: 07,3716           40103        <span class="sm">TMFAIL2 </span>           <span class="op">CS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#464C414757524437">FLAGWRD7</a>                              <span class="co">#  LOCK OUT FURTHER UPLINK ACTIVITY</span>
058019,000095: 07,3717           74776                           <span class="op">MASK    </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#55504C4F43424954">UPLOCBIT</a>                              <span class="co">#  (BY SETTING UPLOCKFL = 1) UNTIL</span>
058020,000096: 07,3720           26103                           <span class="op">ADS     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#464C414757524437">FLAGWRD7</a>                              <span class="co">#  'ERROR RESET' IS SENT VIA UPLINK.</span>
058021,000097: 07,3721           05336                           <span class="op">TC      </span> <a href="WAITLIST.agc.html#524553554D45">RESUME</a>                                
<a name="555054455354"></a>058022,000098: 07,3722           60073        <span class="sm">UPTEST  </span>           <span class="op">AD      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4B455954454D5031">KEYTEMP1</a>                              
058023,000099: 07,3723           10000                           <span class="op">CCS     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#41">A</a>                                     
058024,000100: 07,3724           03716                           <span class="op">TC      </span> <a href="#544D4641494C32">TMFAIL2</a>                               
<a name="48493130"></a>058025,000101: 07,3725           77740        <span class="sm">HI10    </span>           <span class="ps">OCT     </span> 77740                                 
058026,000102: 07,3726           03716                           <span class="op">TC      </span> <a href="#544D4641494C32">TMFAIL2</a>                               
058027,000103: 07,3727           00002                           <span class="op">TC      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#51">Q</a>                                     
058028,000104: 
<a name="454C52434F4445"></a>058029,000105: 07,3730     5011               <span class="sm">ELRCODE </span>           <span class="ps">EQUALS  </span> <a href="FIXED-FIXED_CONSTANT_POOL.agc.html#4F43543232">OCT22</a>                                 
058030,000106: 
058031,000107:                                                                                                  <span class="co">#  'UPLINK ACTIVITY LIGHT' IS TURNED OFF BY .....</span>
058032,000108:                                                                                                  <span class="co">#        1.      VBRELDSP</span>
058033,000109:                                                                                                  <span class="co">#        2.      ERROR RESET</span>
058034,000110:                                                                                                  <span class="co">#        3.      UPDATE PROGRAM (P27) ENTERED BY V70,V71,V72, AND V73.</span>
058035,000111: 
058036,000112:                                                                                                  <span class="co">#                                      -</span>
058037,000113:                                                                                                  <span class="co">#  THE RECEPTION OF A BAD CODE (I.E   CCC FAILURE) LOCKS OUT FURTHER UPLINK ACTIVITY BY SETTING BIT4 OF FLAGWRD7 = 1.</span>
058038,000114:                                                                                                  <span class="co">#  THIS INDICATION WILL BE TRANSFERRED TO THE GROUND BY THE DOWNLINK WHICH DOWNLINKS ALL FLAGWORDS.</span>
058039,000115:                                                                                                  <span class="co">#  WHEN UPLINK ACTIVITY IS LOCKED OUT, IT CAN BE ALLOWED WHEN THE GROUND UPLINKS AND 'ERROR RESET' CODE.</span>
058040,000116:                                                                                                  <span class="co">#  (IT IS RECOMMENDED THAT THE 'ERROR LIGHT RESET' CODE IS PRECEEDED BY 16 BITS THE FIRST OF WHICH IS 1 FOLLOWED</span>
058041,000117:                                                                                                  <span class="co">#  BY 15 ZEROES. THIS WILL ELIMINATE EXTRANEOUS BITS FROM INLINK WHICH MAY HAVE BEEN LEFT OVER FROM THE ORIGINAL</span>
058042,000118:                                                                                                  <span class="co">#  FAILURE)</span>
058043,000119: 
058044,000120:                                                                                                  <span class="co">#  UPLINK ACTIVITY IS ALSO ALLOWED (UNLOCKED) DURING FRESH START WHEN FRESH START SETS BIT4 OF FLAGWRD7 = 0.</span>

End of include-file KEYRUPT,_UPRUPT.agc.  Parent file is <a href="MAIN.agc.html">MAIN.agc</a>
</pre>
</span>
</p>
</body>
</html>
