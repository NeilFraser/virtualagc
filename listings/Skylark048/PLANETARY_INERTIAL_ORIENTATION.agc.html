<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta content="text/html;charset=ISO-8859-1" http-equiv="Content-Type">
<title>Assembly listing generated by yaYUL</title>
<style type="text/css">
p.nobreak { white-space:nowrap; }
a { text-decoration:none; }
</style>
<style type="text/css">
.op{
font-weight: bold;
color: #993300;
}
</style>
<style type="text/css">
.dn{
color: #009900;
}
</style>
<style type="text/css">
.fe{
color: #FF0000;
}
</style>
<style type="text/css">
.in{
color: #FF6600;
}
</style>
<style type="text/css">
.ps{
color: #336600;
}
</style>
<style type="text/css">
.sm{
color: #0000FF;
}
</style>
<style type="text/css">
.wn{
color: #FF9900;
}
</style>
<style type="text/css">
.co{
font-style: italic;
color: #993399;
}
</style>
</head>
<body>
<p class="nobreak">
<span style="font-family: monospace;">
<pre>
<h1>Source Code</h1>
</pre>
</span>
</p>
<table style="text-align: left;" border="1" cellpadding="2" cellspacing="2">
<tbody>
<tr>
<td style="white-space: nowrap; vertical-align: middle;">
<img alt="" src="Apollo32.png" style="width: 32px; height: 32px;" align="left">
</td>
<td style="vertical-align: middle;">
These source-code files are part of a reconstructed copy of Skylark 048, the
Block II Command Module (CM) Apollo Guidance Computer (AGC) software for the
Skylab-2, Skylab-3, Skylab-4, and Apollo-Soyuz Test Project missions.
<br>
<br>
They have been created via disassembly of binary dumps of the original core rope
memory modules actually flown on Skylab-2, part numbers 2010802-541, 2010802-551,
2010802-561, 2010802-571, 2010802-581, and 2010802-591. Access to these modules
was provided by the New Mexico Museum of Space History, who we are much indebted to.
<br>
<br>
The source code for the Apollo 15, 16, and 17 software, Artemis 072, was used as
a starting point. Heavy use was made of TRW 4900.5-244, Programmed Guidance Equations
for Skylark Command Module Earth Orbital Program, dated 14 February 1972. This document
contains pseudocode of essentially all of Skylark, using original program labels which
have been copied for this source reconstruction.
<br>
<br>
Since only binary dumps (rather than listings) of Skylark are available as source material, 
all comments and labels are approximate.
They have been taken from the Programmed Guidance Equations or other AGC programs where
possible, or, in some places, written from scratch to match what we believe would have
been in the original listing.
</td></tr></tbody></table>

<p class="nobreak">
<span style="font-family: monospace;">
<pre>
050170,000002:                                                                                                  <span class="co">## Copyright:   Public domain.</span>
050171,000003:                                                                                                  <span class="co">## Filename:    PLANETARY_INERTIAL_ORIENTATION.agc</span>
050172,000004:                                                                                                  <span class="co">## Purpose:     A section of Skylark revision 048.</span>
050173,000005:                                                                                                  <span class="co">##              It is part of the source code for the Apollo Guidance Computer (AGC)</span>
050174,000006:                                                                                                  <span class="co">##              for Skylab-2, Skylab-3, Skylab-4, and ASTP. No original listings of</span>
050175,000007:                                                                                                  <span class="co">##              this software are available; instead, this file was created via</span>
050176,000008:                                                                                                  <span class="co">##              disassembly of dumps of the core rope modules actually flown on</span>
050177,000009:                                                                                                  <span class="co">##              Skylab-2. Access to these modules was provided by the New Mexico</span>
050178,000010:                                                                                                  <span class="co">##              Museum of Space History.</span>
050179,000011:                                                                                                  <span class="co">## Assembler:   yaYUL</span>
050180,000012:                                                                                                  <span class="co">## Contact:     Ron Burkey &lt;info@sandroid.org>.</span>
050181,000013:                                                                                                  <span class="co">## Website:     www.ibiblio.org/apollo/index.html</span>
050182,000014:                                                                                                  <span class="co">## Mod history: 2023-09-04 MAS  Created from Artemis 072.</span>
050183,000015:                                                                                                  <span class="co">##              2024-03-05 MAS  Updated for Skylark 48.</span>
050184,000016: 
050185,000017:                                                                                                  <span class="co">#  ..... RP-TO-R SUBROUTINE .....</span>
050186,000018:                                                                                                  <span class="co">#  SUBROUTINE TO CONVERT RP (VECTOR IN PLANETARY COORDINATE SYSTEM, EITHER</span>
050187,000019:                                                                                                  <span class="co">#  EARTH-FIXED OR MOON-FIXED) TO R (SAME VECTOR IN THE BASIC REF. SYSTEM)</span>
050188,000020: 
050189,000021:                                                                                                  <span class="co">#        R = MT(T) * (RP + LP X RP)      MT = M MATRIX TRANSPOSE</span>
050190,000022: 
050191,000023:                                                                                                  <span class="co">#  CALLING SEQUENCE</span>
050192,000024:                                                                                                  <span class="co">#        L       CALL</span>
050193,000025:                                                                                                  <span class="co">#        L+1             RP-TO-R</span>
050194,000026: 
050195,000027:                                                                                                  <span class="co">#  SUBROUTINES USED</span>
050196,000028:                                                                                                  <span class="co">#        EARTHMX, MOONMX, EARTHL</span>
050197,000029: 
050198,000030:                                                                                                  <span class="co">#        ITEMS AVAILABLE FROM LAUNCH DATA</span>
050199,000031:                                                                                                  <span class="co">#                504LM = THE LIBRATION VECTOR L OF THE MOON AT TIME TIMSUBL, EXPRESSED</span>
050200,000032:                                                                                                  <span class="co">#                IN THE MOON-FIXED COORD. SYSTEM         RADIANS  B0</span>
050201,000033: 
050202,000034:                                                                                                  <span class="co">#        ITEMS NECESSARY FOR SUBR. USED (SEE DESCRIPTION OF SUBR.)</span>
050203,000035: 
050204,000036:                                                                                                  <span class="co">#  INPUT</span>
050205,000037:                                                                                                  <span class="co">#        MPAC = 0 FOR EARTH, NON-ZERO FOR MOON</span>
050206,000038:                                                                                                  <span class="co">#        0-5D = RP VECTOR</span>
050207,000039:                                                                                                  <span class="co">#        6-7D = TIME</span>
050208,000040: 
050209,000041:                                                                                                  <span class="co">#  OUTPUT</span>
050210,000042:                                                                                                  <span class="co">#        MPAC = R VECTOR METERS B-29 FOR EARTH, B-27 FOR MOON</span>
050211,000043: 
050212,000044: 26,2000                                           <span class="ps">SETLOC  </span> <a href="TAGS_FOR_RELATIVE_SETLOC_AND_BLANK_BANK_CARDS.agc.html#504C414E54494E">PLANTIN</a>                               
050213,000045: 26,2000                                           <span class="ps">BANK    </span>                                       
050214,000046: 
050215,000047: 26,3213                                           <span class="ps">COUNT*  </span> $$/LUROT                              
050216,000048: 
<a name="52502D544F2D52"></a>050217,000049: 26,3213           45020        <span class="sm">RP-TO-R </span>           <span class="in">STQ     </span> <span class="in">CALL      </span>                            
050218,000050: 26,3214           00050                                    <a href="#52505245584954">RPREXIT</a>                               
050219,000051: 26,3215           55264                                    <a href="#45415254484D58">EARTHMX</a>                               <span class="co">#  M MATRIX B-1</span>
050220,000052:                                                                                                  <span class="co">#  AND L VECTOR RADIANS B0</span>
050221,000053: 26,3216           61375                           <span class="in">VLOAD   </span> <span class="in">VXM       </span>                            
050222,000054: 26,3217           00001                                    <a href="#353034525052">504RPR</a>                                
050223,000055: 26,3220           00025                                    <a href="#4D4D4154524958">MMATRIX</a>                               <span class="co">#  MPAC=R=MT(T)*(RP+LPXRP)</span>
050224,000056: 26,3221           52105                           <span class="in">VXM     </span> <span class="in">GOTO      </span>                            
050225,000057: 26,3222           02015                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#4C4D4154524958">LMATRIX</a>                               
050226,000058: 26,3223           55234                                    <a href="#5250525058585858">RPRPXXXX</a>                              <span class="co">#  RESET PUSHLOC TO 0 BEFORE EXITING</span>
050227,000059: 
050228,000060:                                                                                                  <span class="co">#  ..... R-TO-RP SUBROUTINE .....</span>
050229,000061:                                                                                                  <span class="co">#  SUBROUTINE TO CONVERT R (VECTOR IN REFERENCE COORD. SYSTEM) TO RP</span>
050230,000062:                                                                                                  <span class="co">#  (VECTOR IN PLANETARY COORD SYSTEM) EITHER EARTH-FIXED OR MOON-FIXED</span>
050231,000063: 
050232,000064:                                                                                                  <span class="co">#        RP = M(T) * (R - L X R)</span>
050233,000065: 
050234,000066:                                                                                                  <span class="co">#  CALLING SEQUENCE</span>
050235,000067:                                                                                                  <span class="co">#        L       CALL</span>
050236,000068:                                                                                                  <span class="co">#        L+1             R-TO-RP</span>
050237,000069: 
050238,000070:                                                                                                  <span class="co">#  SUBROUTINES USED</span>
050239,000071:                                                                                                  <span class="co">#        EARTHMX, MOONMX, EARTHL</span>
050240,000072: 
050241,000073:                                                                                                  <span class="co">#  INPUT</span>
050242,000074:                                                                                                  <span class="co">#        MPAC = 0 FOR EARTH, NON-ZERO FOR MOON</span>
050243,000075:                                                                                                  <span class="co">#        0-5D = R VECTOR</span>
050244,000076:                                                                                                  <span class="co">#        6-7D = TIME</span>
050245,000077: 
050246,000078:                                                                                                  <span class="co">#        ITEMS AVAILABLE FROM LAUNCH DATA</span>
050247,000079:                                                                                                  <span class="co">#                504LM = THE LIBRATION VECTOR L OF THE MOON AT TIME TIMSUBL, EXPRESSED</span>
050248,000080:                                                                                                  <span class="co">#                IN THE MOON-FIXED COORD. SYSTEM   RADIANS B0</span>
050249,000081: 
050250,000082:                                                                                                  <span class="co">#        ITEMS NECESSARY FOR SUBROUTINES USED (SEE DESCRIPTION OF SUBR.)</span>
050251,000083: 
050252,000084:                                                                                                  <span class="co">#  OUTPUT</span>
050253,000085:                                                                                                  <span class="co">#        MPAC = RP VECTOR METERS B-29 FOR EARTH, B-27 FOR MOON</span>
050254,000086: 
<a name="522D544F2D5250"></a>050255,000087: 26,3224           45020        <span class="sm">R-TO-RP </span>           <span class="in">STQ     </span> <span class="in">CALL      </span>                            
050256,000088: 26,3225           00050                                    <a href="#52505245584954">RPREXIT</a>                               
050257,000089: 26,3226           55264                                    <a href="#45415254484D58">EARTHMX</a>                               
050258,000090: 26,3227           64375                           <span class="in">VLOAD   </span> <span class="in">MXV       </span>                            
050259,000091: 26,3230           00001                                    <a href="#353034525052">504RPR</a>                                
050260,000092: 26,3231           02015                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#4C4D4154524958">LMATRIX</a>                               
050261,000093: 26,3232           77721                           <span class="in">MXV     </span>                                       <span class="co">#  M(T)*(R-LXR)  B-2</span>
050262,000094: 26,3233           00025                                    <a href="#4D4D4154524958">MMATRIX</a>                               
<a name="5250525058585858"></a>050263,000095: 26,3234           40372        <span class="sm">RPRPXXXX</span>           <span class="in">VSL1    </span> <span class="in">SETPD     </span>                            
050264,000096: 26,3235           00001                                    0D                                    
050265,000097: 26,3236           77650                           <span class="in">GOTO    </span>                                       
050266,000098: 26,3237           00050                                    <a href="#52505245584954">RPREXIT</a>                               
050267,000099: 
050268,000100:                                                                                                  <span class="co">#  COMPUTE X=X0+(XDOT)(T+T0)</span>
050269,000101:                                                                                                  <span class="co">#  8-9D= XO (REVS B-0), PUSHLOC SET AT 12D</span>
050270,000102:                                                                                                  <span class="co">#  10-11D=XDOT (REVS/CSEC) SCALED B+23 FOR WEARTH,B+28 FOR NODDOT AND BDOT</span>
050271,000103:                                                                                                  <span class="co">#                        AND B+27 FOR FDOT</span>
050272,000104:                                                                                                  <span class="co">#  X1=DIFFERENCE IN 23 AND SCALING OF XDOT, =0 FOR WEARTH, 5 FOR NODDOT AND</span>
050273,000105:                                                                                                  <span class="co">#                                        BDOT AND 4 FOR FDOT</span>
050274,000106:                                                                                                  <span class="co">#  6-7D=T (CSEC B-28), TIMSUBO= (CSEC B-42 TRIPLE PREC.)</span>
050275,000107: 
<a name="4E4557414E474C45"></a>050276,000108: 26,3240           54345        <span class="sm">NEWANGLE</span>           <span class="in">DLOAD   </span> <span class="in">SR        </span>                            <span class="co">#  ENTER PD 12D</span>
050277,000109: 26,3241           00007                                    6D                                    
050278,000110: 26,3242           20617                                    14D                                   
050279,000111: 26,3243           72371                           <span class="in">TAD     </span> <span class="in">TLOAD     </span>                            <span class="co">#  CHANGE MODE TO TP</span>
050280,000112: 26,3244           01701                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#54494D5355424F">TIMSUBO</a>                               
050281,000113: 26,3245           00155                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#4D504143">MPAC</a>                                  
050282,000114: 26,3246           14017                           <span class="in">STODL   </span> <a href="#54494D5355424D">TIMSUBM</a>                               <span class="co">#  T+T0 CSEC B-42</span>
050283,000115: 26,3247           00020                                    <a href="#54494D5355424D">TIMSUBM</a>    +1                         
050284,000116: 26,3250           77605                           <span class="in">DMP     </span>                                       <span class="co">#  PD 10D  MULT BY XDOT IN 10-11D</span>
050285,000117: 26,3251           43257                           <span class="in">SL*     </span> <span class="in">DAD       </span>                            <span class="co">#  PD 8D   ADD XO IN 8-9D AFTER SHIFTING</span>
050286,000118: 26,3252           20206                                    5,1                                   <span class="co">#          SUCH THAT SCALING IS B-0</span>
050287,000119: 26,3253           67206                           <span class="in">PUSH    </span> <span class="in">SLOAD     </span>                            <span class="co">#  PD 10D SAVE PARTIAL (X0+XDOT*T) IN 8-9D</span>
050288,000120: 26,3254           00017                                    <a href="#54494D5355424D">TIMSUBM</a>                               
050289,000121: 26,3255           41261                           <span class="in">SL      </span> <span class="in">DMP       </span>                            
050290,000122: 26,3256           20212                                    9D                                    
050291,000123: 26,3257           00013                                    10D                                   <span class="co">#  XDOT</span>
050292,000124: 26,3260           43257                           <span class="in">SL*     </span> <span class="in">DAD       </span>                            <span class="co">#  PD 8D   SHIFT SUCH THAT THIS PART OF X</span>
050293,000125: 26,3261           20213                                    10D,1                                 <span class="co">#          IS SCALED REVS/CSEC B-0</span>
<a name="48455245"></a>050294,000126: 26,3262           43400        <span class="sm">HERE    </span>           <span class="in">BOV     </span> <span class="in">RVQ       </span>                            <span class="co">#  TURN OFF OVERFLOW IF SET BY SHIFT</span>
050295,000127: 26,3263           55262                                    <a href="#48455245">HERE</a>                                  <span class="co">#        INSTRUCTION BEFORE EXITING</span>
050296,000128:                                                                                                  <span class="co">#  MPAC=X=X0+(XDOT)(T+T0)  REVS B0</span>
050297,000129: 
050298,000130:                                                                                                  <span class="co">#  ..... EARTHMX SUBROUTINE .....</span>
050299,000131:                                                                                                  <span class="co">#  SUBROUTINE TO COMPUTE THE TRANSFORMATION MATRIX M FOR THE EARTH</span>
050300,000132: 
050301,000133:                                                                                                  <span class="co">#  CALLING SEQUENCE</span>
050302,000134:                                                                                                  <span class="co">#        L       CALL</span>
050303,000135:                                                                                                  <span class="co">#        L+1             EARTHMX</span>
050304,000136: 
050305,000137:                                                                                                  <span class="co">#  SUBROUTINES USED</span>
050306,000138:                                                                                                  <span class="co">#        NEWANGLE</span>
050307,000139: 
050308,000140:                                                                                                  <span class="co">#  INPUT</span>
050309,000141:                                                                                                  <span class="co">#        INPUT AVAILABLE FROM LAUNCH DATA        AZO  REVS B-0</span>
050310,000142:                                                                                                  <span class="co">#                                                TEPHEM  CSEC B-42</span>
050311,000143:                                                                                                  <span class="co">#        6-7D= TIME CSEC B-28</span>
050312,000144: 
050313,000145:                                                                                                  <span class="co">#  OUTPUT</span>
050314,000146:                                                                                                  <span class="co">#        MMATRIX= 3X3 M MATRIX B-1   (STORED IN VAC AREA)</span>
050315,000147: 
<a name="45415254484D58"></a>050316,000148: 26,3264           40220        <span class="sm">EARTHMX </span>           <span class="in">STQ     </span> <span class="in">SETPD     </span>                            <span class="co">#  SET 8-9D=AZO</span>
050317,000149: 26,3265           00051                                    <a href="#45415254484D5858">EARTHMXX</a>                              
050318,000150: 26,3266           00011                                    8D                                    <span class="co">#  10-11D=WEARTH</span>
050319,000151: 26,3267           77770                           <span class="in">AXT,1   </span>                                       <span class="co">#  FOR SL 5, AND SL 10  IN NEWANGLE</span>
050320,000152: 26,3270           00000                                    0                                     
050321,000153: 26,3271           65345                           <span class="in">DLOAD   </span> <span class="in">PDDL      </span>                            <span class="co">#    LEAVING PD SET AT 12D FOR NEWANGLE</span>
050322,000154: 26,3272           02037                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#415A4F">AZO</a>                                   
050323,000155: 26,3273           15317                                    <a href="#574541525448">WEARTH</a>                                
050324,000156: 26,3274           45006                           <span class="in">PUSH    </span> <span class="in">CALL      </span>                            
050325,000157: 26,3275           55240                                    <a href="#4E4557414E474C45">NEWANGLE</a>                              
050326,000158: 26,3276           41401                           <span class="in">SETPD   </span> <span class="in">PUSH      </span>                            <span class="co">#  18-19D=504AZ</span>
050327,000159: 26,3277           00023                                    18D                                   <span class="co">#                     COS(AZ) SIN(AZ) 0</span>
050328,000160: 26,3300           65346                           <span class="in">COS     </span> <span class="in">PDDL      </span>                            <span class="co">#  20-37D=  MMATRIX= -SIN(AZ) COS(AZ) 0 B-1</span>
050329,000161: 26,3301           00023                                    <a href="#353034415A">504AZ</a>                                 <span class="co">#                      0       0      1</span>
050330,000162: 26,3302           65356                           <span class="in">SIN     </span> <span class="in">PDDL      </span>                            
050331,000163: 26,3303           15204                                    <a href="TAGS_FOR_RELATIVE_SETLOC_AND_BLANK_BANK_CARDS.agc.html#4849365A45524F53">HI6ZEROS</a>                              
050332,000164: 26,3304           73525                           <span class="in">PDDL    </span> <span class="in">SIN       </span>                            
050333,000165: 26,3305           00023                                    <a href="#353034415A">504AZ</a>                                 
050334,000166: 26,3306           65276                           <span class="in">DCOMP   </span> <span class="in">PDDL      </span>                            
050335,000167: 26,3307           00023                                    <a href="#353034415A">504AZ</a>                                 
050336,000168: 26,3310           63346                           <span class="in">COS     </span> <span class="in">PDVL      </span>                            
050337,000169: 26,3311           15204                                    <a href="TAGS_FOR_RELATIVE_SETLOC_AND_BLANK_BANK_CARDS.agc.html#4849365A45524F53">HI6ZEROS</a>                              
050338,000170: 26,3312           41525                           <span class="in">PDDL    </span> <span class="in">PUSH      </span>                            
050339,000171: 26,3313           15202                                    <a href="TAGS_FOR_RELATIVE_SETLOC_AND_BLANK_BANK_CARDS.agc.html#4849445048414C46">HIDPHALF</a>                              
050340,000172: 26,3314           77650                           <span class="in">GOTO    </span>                                       
050341,000173: 26,3315           00051                                    <a href="#45415254484D5858">EARTHMXX</a>                              
050342,000174:                                                                                                  <span class="co">#  CONSTANTS AND ERASABLE ASSIGNMENTS</span>
050343,000175: 
<a name="314231"></a>050344,000176: 26,3316  06,3723               <span class="sm">1B1     </span>           <span class="ps">=       </span> <a href="LATITUDE_LONGITUDE_SUBROUTINES.agc.html#4450312F32">DP1/2</a>                                 <span class="co">#  1  SCALED B-1</span>
<a name="52505245584954"></a>050345,000177: 26,3316  0000050               <span class="sm">RPREXIT </span>           <span class="ps">=       </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#5331">S1</a>                                    <span class="co">#  R-TO-RP AND RP-TO-R SUBR EXIT</span>
<a name="45415254484D5858"></a>050346,000178: 26,3316  0000051               <span class="sm">EARTHMXX</span>           <span class="ps">=       </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#5332">S2</a>                                    <span class="co">#  EARTHMX,MOONMX SUBR. EXITS</span>
<a name="353034525052"></a>050347,000179: 26,3316                        <span class="sm">504RPR  </span>           <span class="ps">=       </span> 0D                                    <span class="co">#  6 REGS  R OR RP VECTOR</span>
<a name="353034415A"></a>050348,000180: 26,3316                        <span class="sm">504AZ   </span>           <span class="ps">=       </span> 18D                                   <span class="co">#  2      AZ</span>
<a name="54494D5355424D"></a>050349,000181: 26,3316                        <span class="sm">TIMSUBM </span>           <span class="ps">=       </span> 14D                                   <span class="co">#  3       TIME SUB M (MOON) T+T0 IN GETAZ</span>
<a name="4D4D4154524958"></a>050350,000182: 26,3316                        <span class="sm">MMATRIX </span>           <span class="ps">=       </span> 20D                                   <span class="co">#  18      M MATRIX</span>
<a name="574541525448"></a>050351,000183: 26,3316           37116 32631  <span class="sm">WEARTH  </span>           <span class="ps">2DEC*   </span> +1.160576171 E-7        B23*            <span class="co">#  REV/CS.</span>

End of include-file PLANETARY_INERTIAL_ORIENTATION.agc.  Parent file is <a href="MAIN.agc.html">MAIN.agc</a>
</pre>
</span>
</p>
</body>
</html>
