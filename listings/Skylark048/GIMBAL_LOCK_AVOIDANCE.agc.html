<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta content="text/html;charset=ISO-8859-1" http-equiv="Content-Type">
<title>Assembly listing generated by yaYUL</title>
<style type="text/css">
p.nobreak { white-space:nowrap; }
a { text-decoration:none; }
</style>
<style type="text/css">
.op{
font-weight: bold;
color: #993300;
}
</style>
<style type="text/css">
.dn{
color: #009900;
}
</style>
<style type="text/css">
.fe{
color: #FF0000;
}
</style>
<style type="text/css">
.in{
color: #FF6600;
}
</style>
<style type="text/css">
.ps{
color: #336600;
}
</style>
<style type="text/css">
.sm{
color: #0000FF;
}
</style>
<style type="text/css">
.wn{
color: #FF9900;
}
</style>
<style type="text/css">
.co{
font-style: italic;
color: #993399;
}
</style>
</head>
<body>
<p class="nobreak">
<span style="font-family: monospace;">
<pre>
<h1>Source Code</h1>
</pre>
</span>
</p>
<table style="text-align: left;" border="1" cellpadding="2" cellspacing="2">
<tbody>
<tr>
<td style="white-space: nowrap; vertical-align: middle;">
<img alt="" src="Apollo32.png" style="width: 32px; height: 32px;" align="left">
</td>
<td style="vertical-align: middle;">
These source-code files are part of a reconstructed copy of Skylark 048, the
Block II Command Module (CM) Apollo Guidance Computer (AGC) software for the
Skylab-2, Skylab-3, Skylab-4, and Apollo-Soyuz Test Project missions.
<br>
<br>
They have been created via disassembly of binary dumps of the original core rope
memory modules actually flown on Skylab-2, part numbers 2010802-541, 2010802-551,
2010802-561, 2010802-571, 2010802-581, and 2010802-591. Access to these modules
was provided by the New Mexico Museum of Space History, who we are much indebted to.
<br>
<br>
The source code for the Apollo 15, 16, and 17 software, Artemis 072, was used as
a starting point. Heavy use was made of TRW 4900.5-244, Programmed Guidance Equations
for Skylark Command Module Earth Orbital Program, dated 14 February 1972. This document
contains pseudocode of essentially all of Skylark, using original program labels which
have been copied for this source reconstruction.
<br>
<br>
Since only binary dumps (rather than listings) of Skylark are available as source material, 
all comments and labels are approximate.
They have been taken from the Programmed Guidance Equations or other AGC programs where
possible, or, in some places, written from scratch to match what we believe would have
been in the original listing.
</td></tr></tbody></table>

<p class="nobreak">
<span style="font-family: monospace;">
<pre>
017595,000002:                                                                                                  <span class="co">## Copyright:   Public domain.</span>
017596,000003:                                                                                                  <span class="co">## Filename:    GIMBAL_LOCK_AVOIDANCE.agc</span>
017597,000004:                                                                                                  <span class="co">## Purpose:     A section of Skylark revision 048.</span>
017598,000005:                                                                                                  <span class="co">##              It is part of the source code for the Apollo Guidance Computer (AGC)</span>
017599,000006:                                                                                                  <span class="co">##              for Skylab-2, Skylab-3, Skylab-4, and ASTP. No original listings of</span>
017600,000007:                                                                                                  <span class="co">##              this software are available; instead, this file was created via</span>
017601,000008:                                                                                                  <span class="co">##              disassembly of dumps of the core rope modules actually flown on</span>
017602,000009:                                                                                                  <span class="co">##              Skylab-2. Access to these modules was provided by the New Mexico</span>
017603,000010:                                                                                                  <span class="co">##              Museum of Space History.</span>
017604,000011:                                                                                                  <span class="co">## Assembler:   yaYUL</span>
017605,000012:                                                                                                  <span class="co">## Contact:     Ron Burkey &lt;info@sandroid.org>.</span>
017606,000013:                                                                                                  <span class="co">## Website:     www.ibiblio.org/apollo/index.html</span>
017607,000014:                                                                                                  <span class="co">## Mod history: 2023-09-04 MAS  Created from Artemis 072.</span>
017608,000015:                                                                                                  <span class="co">##              2024-03-04 MAS  Updated for Skylark 48.</span>
017609,000016: 
017610,000017: 
017611,000018: 22,2000                                           <span class="ps">SETLOC  </span> <a href="TAGS_FOR_RELATIVE_SETLOC_AND_BLANK_BANK_CARDS.agc.html#4B414C434D4F4E31">KALCMON1</a>                              
017612,000019: 22,2000                                           <span class="ps">BANK    </span>                                       
017613,000020: 
017614,000021: 22,2745                                           <span class="ps">COUNT*  </span> $$/KALC                               
017615,000022: 22,2745  E6,1712                                  <span class="ps">EBANK=  </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#42434455">BCDU</a>                                  
017616,000023: 
017617,000024:                                                                                                  <span class="co">#  DETECTING GIMBAL LOCK</span>
<a name="4C4F43534B495254"></a>017618,000025: 22,2745           46135        <span class="sm">LOCSKIRT</span>           <span class="in">SLOAD   </span> <span class="in">BHIZ      </span>                            
017619,000026: 22,2746           03076                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#5748494348444150">WHICHDAP</a>                              
017620,000027: 22,2747           45011                                    <a href="#5743414C43">WCALC</a>                                 
017621,000028: 
017622,000029: 22,2750           41335                           <span class="in">SLOAD   </span> <span class="in">DMP       </span>                            
017623,000030: 22,2751           03074                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#444B52415445">DKRATE</a>                                
017624,000031: 22,2752           05103                                    <a href="#5455464954444B">TUFITDK</a>                               
017625,000032: 22,2753           45002                           <span class="in">SR4     </span> <span class="in">CALL      </span>                            <span class="co">#  COMPUTE THE INCREMENTAL ROTATION MATRIX</span>
017626,000033: 22,2754           44522                                    <a href="ANGLFIND.agc.html#44454C434F4D50">DELCOMP</a>                               <span class="co">#  DEL CORRESPONDING TO A 1 SEC ROTATION</span>
017627,000034:                                                                                                  <span class="co">#  ABOUT COF</span>
017628,000035: 22,2755           41335                           <span class="in">SLOAD   </span> <span class="in">DMP       </span>                            
017629,000036: 22,2756           03074                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#444B52415445">DKRATE</a>                                
017630,000037: 22,2757           05103                                    <a href="#5455464954444B">TUFITDK</a>                               
017631,000038: 22,2760           74206                           <span class="in">PUSH    </span> <span class="in">VXSC      </span>                            
017632,000039: 22,2761           02314                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#434F46">COF</a>                                   
017633,000040: 22,2762           77721                           <span class="in">MXV     </span>                                       
017634,000041: 22,2763           05057                                    <a href="#51554144524F54">QUADROT</a>                               
017635,000042: 22,2764           17342                           <span class="in">STODL   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4252415445">BRATE</a>                                 
017636,000043: 22,2765           03352                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#414D">AM</a>                                    
017637,000044: 22,2766           56205                           <span class="in">DMP     </span> <span class="in">DDV       </span>                            
017638,000045: 22,2767           05055                                    <a href="#414E474C54494D45">ANGLTIME</a>                              
017639,000046: 22,2770           77661                           <span class="in">SR      </span>                                       
017640,000047: 22,2771           20606                                    5                                     
017641,000048: 22,2772           17350                           <span class="in">STODL   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#544D">TM</a>                                    
017642,000049: 22,2773           03346                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#4252415445">BRATE</a>      +4                         
017643,000050: 22,2774           41246                           <span class="in">ABVAL   </span> <span class="in">DMP       </span>                            
017644,000051: 22,2775           03346                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#4252415445">BRATE</a>      +4                         
017645,000052: 22,2776           51525                           <span class="in">PDDL    </span> <span class="in">ABVAL     </span>                            
017646,000053: 22,2777           03344                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#4252415445">BRATE</a>      +2                         
017647,000054: 22,3000           65205                           <span class="in">DMP     </span> <span class="in">PDDL      </span>                            
017648,000055: 22,3001           03344                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#4252415445">BRATE</a>      +2                         
017649,000056: 22,3002           03342                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#4252415445">BRATE</a>                                 
017650,000057: 22,3003           41246                           <span class="in">ABVAL   </span> <span class="in">DMP       </span>                            
017651,000058: 22,3004           03342                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#4252415445">BRATE</a>                                 
017652,000059: 22,3005           74266                           <span class="in">VDEF    </span> <span class="in">VXSC      </span>                            
017653,000060: 22,3006           02374                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#312F32414C504841">1/2ALPHA</a>                              
017654,000061: 22,3007           37326                           <span class="in">STCALL  </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4249415354454D50">BIASTEMP</a>                              
017655,000062: 22,3010           45037                                    <a href="#5743414C434F5554">WCALCOUT</a>                              
017656,000063: 
<a name="5743414C43"></a>017657,000064: 22,3011           70740        <span class="sm">WCALC   </span>           <span class="in">LXC,1   </span> <span class="in">DLOAD*    </span>                            
017658,000065: 22,3012           00767                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#52415445494E4458">RATEINDX</a>                              
017659,000066: 22,3013           05045                                    ARATE,1                               
017660,000067: 22,3014           45002                           <span class="in">SR4     </span> <span class="in">CALL      </span>                            <span class="co">#  COMPUTE THE INCREMENTAL ROTATION MATRIX</span>
017661,000068: 22,3015           44522                                    <a href="ANGLFIND.agc.html#44454C434F4D50">DELCOMP</a>                               <span class="co">#  DEL CORRESPONDING TO A 1 SEC ROTATION</span>
017662,000069:                                                                                                  <span class="co">#  ABOUT COF</span>
017663,000070: 22,3016           74343                           <span class="in">DLOAD*  </span> <span class="in">VXSC      </span>                            
017664,000071: 22,3017           05045                                    ARATE,1                               
017665,000072: 22,3020           02314                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#434F46">COF</a>                                   
017666,000073: 22,3021           77721                           <span class="in">MXV     </span>                                       
017667,000074: 22,3022           05057                                    <a href="#51554144524F54">QUADROT</a>                               
017668,000075: 22,3023           17342                           <span class="in">STODL   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4252415445">BRATE</a>                                 
017669,000076: 22,3024           03352                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#414D">AM</a>                                    
017670,000077: 22,3025           55605                           <span class="in">DMP     </span> <span class="in">DDV*      </span>                            
017671,000078: 22,3026           05055                                    <a href="#414E474C54494D45">ANGLTIME</a>                              
017672,000079: 22,3027           05045                                    ARATE,1                               
017673,000080: 22,3030           77661                           <span class="in">SR      </span>                                       
017674,000081: 22,3031           20606                                    5                                     
017675,000082: 22,3032           27350                           <span class="in">STOVL   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#544D">TM</a>                                    
017676,000083: 22,3033           03342                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#4252415445">BRATE</a>                                 
017677,000084: 22,3034           77761                           <span class="in">VXSC    </span>                                       
017678,000085: 22,3035           05101                                    <a href="#4249415343414C45">BIASCALE</a>                              
017679,000086: 22,3036           03326                           <span class="in">STORE   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4249415354454D50">BIASTEMP</a>                              <span class="co">#  ATTITUDE ERROR BIAS TO PREVENT OVERSHOOT</span>
017680,000087:                                                                                                  <span class="co">#  IN SYSTEM</span>
</pre>
</span>
</p>
<table style="text-align: left;" border="1" cellpadding="2" cellspacing="2">
<tbody>
<tr>
<td style="white-space: nowrap; vertical-align: middle;">
<img alt="" src="Apollo32.png" style="width: 32px; height: 32px;" align="left">
</td>
<td style="vertical-align: middle;">
The following label name is a guess.
</td></tr></tbody></table>
<p class="nobreak">
<span style="font-family: monospace;">
<pre>
<a name="5743414C434F5554"></a>017682,000089: 22,3037           43014        <span class="sm">WCALCOUT</span>           <span class="in">BON     </span> <span class="in">SETGO     </span>                            <span class="co">#  STATE SWITCH CALCMAN2 (43D)</span>
017683,000090: 22,3040           00313                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#4359433631464C47">CYC61FLG</a>                              
017684,000091: 22,3041           71766                                    <a href="P20-P25.agc.html#524359434C523631">RCYCLR61</a>                              
017685,000092: 22,3042           01035                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#43414C434D414E32">CALCMAN2</a>                              <span class="co">#  0(OFF) = BYPASS STARTING PROCEDURE</span>
017686,000093: 22,3043           45120                                    <a href="KALCMANU_STEERING.agc.html#4E4557414E474C">NEWANGL</a>    +1                         <span class="co">#  1(ON) = START MANEUVER</span>
017687,000094: 
017688,000095: 
<a name="4152415445"></a>017689,000096: 22,3044           00044 15053  <span class="sm">ARATE   </span>           <span class="ps">2DEC    </span> .0022222222                            <span class="co">#  = .05 DEG/SEC</span>
017690,000097: 22,3046           00221 24255                     <span class="ps">2DEC    </span> .0088888889                            <span class="co">#  = .2 DEG/SEC</span>
017691,000098: 22,3050           00554 02660                     <span class="ps">2DEC    </span> .0222222222                            <span class="co">#  = .5 DEG/SEC</span>
017692,000099: 22,3052           02660 13301                     <span class="ps">2DEC    </span> .0888888889                            <span class="co">#  = 2 DEG/SEC                $22.5 DEG/SEC</span>
<a name="414E474C54494D45"></a>017693,000100: 22,3054           00003 04000  <span class="sm">ANGLTIME</span>           <span class="ps">2DEC    </span> .000190735                            <span class="co">#  = 100B - 19</span>
017694,000101:                                                                                                  <span class="co">#  MANEUVER ANGLE TO MANEUVER TIME</span>
<a name="51554144524F54"></a>017695,000102: 22,3056           03146 14632  <span class="sm">QUADROT </span>           <span class="ps">2DEC    </span> .1                                    <span class="co">#  ROTATION MATRIX FROM S/C AXES TO CONTROL</span>
017696,000103: 22,3060           00000 00000                     <span class="ps">2DEC    </span> 0          B-28                       <span class="co">#  AXES (X ROT = -7.25 DEG)</span>
017697,000104: 22,3062           00000 00000                     <span class="ps">2DEC    </span> 0          B-28                       
017698,000105: 22,3064           00000 00000                     <span class="ps">2DEC    </span> 0          B-28                       
017699,000106: 22,3066           03131 11275                     <span class="ps">2DEC    </span> .099200                               <span class="co">#  =(.1)COS7.25</span>
017700,000107: 22,3070           77461 47370                     <span class="ps">2DEC    </span> -.012620                              <span class="co">#  =-(.1)SIN7.25</span>
017701,000108: 22,3072           00000 00000                     <span class="ps">2DEC    </span> 0          B-28                       
017702,000109: 22,3074           00316 30407                     <span class="ps">2DEC    </span> .012620                               <span class="co">#  (.1)SIN7.25</span>
017703,000110: 22,3076           03131 11275                     <span class="ps">2DEC    </span> .099200                               <span class="co">#  (.1)COS7.25</span>
<a name="4249415343414C45"></a>017704,000111: 22,3100           00004 05253  <span class="sm">BIASCALE</span>           <span class="ps">2DEC    </span> .0002543132                            <span class="co">#  = (450/180)(1/0.6)(1/16384)</span>
<a name="5455464954444B"></a>017705,000112: 22,3102           12000 00000  <span class="sm">TUFITDK </span>           <span class="ps">2DEC    </span> 0.3125                                

End of include-file GIMBAL_LOCK_AVOIDANCE.agc.  Parent file is <a href="MAIN.agc.html">MAIN.agc</a>
</pre>
</span>
</p>
</body>
</html>
