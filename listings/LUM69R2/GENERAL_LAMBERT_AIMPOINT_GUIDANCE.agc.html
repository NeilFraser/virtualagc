<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta content="text/html;charset=ISO-8859-1" http-equiv="Content-Type">
<title>Assembly listing generated by yaYUL</title>
<style type="text/css">
p.nobreak { white-space:nowrap; }
a { text-decoration:none; }
</style>
<style type="text/css">
.op{
font-weight: bold;
color: #993300;
}
</style>
<style type="text/css">
.dn{
color: #009900;
}
</style>
<style type="text/css">
.fe{
color: #FF0000;
}
</style>
<style type="text/css">
.in{
color: #FF6600;
}
</style>
<style type="text/css">
.ps{
color: #336600;
}
</style>
<style type="text/css">
.sm{
color: #0000FF;
}
</style>
<style type="text/css">
.wn{
color: #FF9900;
}
</style>
<style type="text/css">
.co{
font-style: italic;
color: #993399;
}
</style>
</head>
<body>
<p class="nobreak">
<span style="font-family: monospace;">
<pre>
<h1>Source Code</h1>
</pre>
</span>
</p>
<table style="text-align: left;" border="1" cellpadding="2" cellspacing="2">
<tbody>
<tr>
<td style="white-space: nowrap; vertical-align: middle;">
<img alt="" src="Apollo32.png" style="width: 32px; height: 32px;" align="left">
</td>
<td style="vertical-align: middle;">
These source-code files are part of a reconstructed copy of Luminary 69/2,
the flown, final release of the Apollo 10 Lunar Module (LM) Apollo Guidance Computer (AGC) software. 
<br><br>
The reconstruction is based on the source code of Luminary 69 &mdash; i.e., the
initial, unflown version, "revision 0" &mdash; of which 
a contemporary listing was available.  The code was then updated by incorporating the 
differences between Luminary 69 and Luminary 69/2, known from other contemporary
documentation.  The only such difference is the implementation in 
Luminary 69/2 of the "R-2 Lunar Potential Model", the source code for which was taken 
from program Luminary 99/1 (Apollo 11 LM), of which a contemporary listing was also available.
Finally, the now-reconstructed Luminary 69/2 was then validated by assembling it to
executable form and verifying that its memory banks had the correct checksums,
known from still other contemporary documentation.
<br><br>
Note that page numbers in the reconstructed code match those in the original Luminary 69
program listing, or in the ORBITAL INTEGRATION log section, in Luminary 99/1. Page numbers 
would certainly differ somewhat in a contemporary Luminary 69/2 listing.
Moreover, annotations that were not present in the contemporary source code have been added 
to the reconstructed code to justify each change in Luminary 69/2 relative to 
Luminary 69. Here's a guide to the Apollo documentation referenced in those annotations:<br>
<ul>
<li><a href="https://archive.org/stream/apertureCardBox467Part2NARASW_images#page/n80/mode/1up">
    MIT/IL engineering drawing 2021152N, sheet 3</a>.  Listing of the memory-bank 
    checksums for Luminary 69/2 (called "LUMINARY 69 REV. 2" in the document itself).</li>
<li><a href="https://archive.org/details/Luminary99001J2k60/mode/1up">
       Luminary 99/1 (Apollo 11 LM final release) assembly listing</a>.</li>
<li><a href="https://archive.org/details/luminary6900miti/mode/1up">
       Luminary 69 (Apollo 10 LM initial release) assembly listing</a>.</li>
<li><a href="http://www.ibiblio.org/apollo/Documents/LUM75_text.pdf">
       LUMINARY Memo #75, "R-2 Lunar Potential Model Added to LUM"</a>.</li>
<li><a href="http://www.ibiblio.org/apollo/Documents/LUM78_text.pdf">
       LUMINARY Memo #78, "LUMINARY Revisions 93-96"</a>.</li>
</ul>
Comments from the original source code are prefixed with a single '#' symbol, 
whereas comments added later are prefixed by "##" or "###".  Report any errors 
noted by creating an 
issue report at <a href="https://github.com/rburkey2005/virtualagc/issues">the Virtual AGC
project's GitHub repository</a>.
</td></tr></tbody></table>
<p class="nobreak">
<span style="font-family: monospace;">
<pre>
028775,000002:                                                                                                  <span class="co">## Copyright:   Public domain.</span>
028776,000003:                                                                                                  <span class="co">## Filename:    GENERAL_LAMBERT_AIMPOINT_GUIDANCE.agc</span>
028777,000004:                                                                                                  <span class="co">## Purpose:     A section of LUM69 revision 2.</span>
028778,000005:                                                                                                  <span class="co">##              It is part of the reconstructed source code for the flown</span>
028779,000006:                                                                                                  <span class="co">##              version of the flight software for the Lunar Module's (LM)</span>
028780,000007:                                                                                                  <span class="co">##              Apollo Guidance Computer (AGC) for Apollo 10. The code has</span>
028781,000008:                                                                                                  <span class="co">##              been recreated from a copy of Luminary revsion 069, using</span>
028782,000009:                                                                                                  <span class="co">##              changes present in Luminary 099 which were described in</span>
028783,000010:                                                                                                  <span class="co">##              Luminary memos 75 and 78. The code has been adapted such</span>
028784,000011:                                                                                                  <span class="co">##              that the resulting bugger words exactly match those specified</span>
028785,000012:                                                                                                  <span class="co">##              for LUM69 revision 2 in NASA drawing 2021152B, which gives</span>
028786,000013:                                                                                                  <span class="co">##              relatively high confidence that the reconstruction is correct.</span>
028787,000014:                                                                                                  <span class="co">## Reference:   pp. 661-663</span>
028788,000015:                                                                                                  <span class="co">## Assembler:   yaYUL</span>
028789,000016:                                                                                                  <span class="co">## Contact:     Ron Burkey &lt;info@sandroid.org>.</span>
028790,000017:                                                                                                  <span class="co">## Website:     www.ibiblio.org/apollo/index.html</span>
028791,000018:                                                                                                  <span class="co">## Mod history: 2019-07-27 MAS  Created from Luminary 69.</span>
028792,000019: 
</pre>
</span>
</p>
<table style="text-align: left;" border="1" cellpadding="2" cellspacing="2">
<tbody>
<tr>
<td style="white-space: nowrap; vertical-align: middle;">
<img alt="" src="Apollo32.png" style="width: 32px; height: 32px;" align="left">
</td>
<td style="vertical-align: middle;">
Page 661
</td></tr></tbody></table>
<p class="nobreak">
<span style="font-family: monospace;">
<pre>
028794,000021: 
028795,000022:                                                                                                  <span class="co">#  GENERAL LAMBERT AIMPOINT GUIDANCE **</span>
028796,000023:                                                                                                  <span class="co">#  WRITTEN BY RAMA M AIYAWAR</span>
028797,000024: 
028798,000025:                                                                                                  <span class="co">#  PROGRAM P-31 DESCRIPTION **</span>
028799,000026: 
028800,000027:                                                                                                  <span class="co">#  1.    TO ACCEPT TARGETING PARAMETERS OBTAINED FROM A SOURCE EXTERNAL</span>
028801,000028:                                                                                                  <span class="co">#        TO THE LEM AND COMPUTE THERE FROM THE REQUIRED-VELOCITY AND</span>
028802,000029:                                                                                                  <span class="co">#        OTHER INITIAL CONDITIONS REQUIRED BY LM FOR DESIRED MANEUVER.</span>
028803,000030:                                                                                                  <span class="co">#        THE TARGETING PARAMETERS ARE TIG (TIME OF IGNITION), TARGET </span>
028804,000031:                                                                                                  <span class="co">#        VECTOR (RTARG), AND THE TIME FROM TIG UNTIL THE TARGET IS</span>
028805,000032:                                                                                                  <span class="co">#        REACHED(DELLT4), DESIRED TIME OF FLIGHT FROM RINIT TO RTARG..</span>
028806,000033: 
028807,000034:                                                                                                  <span class="co">#  ASSUMPTIONS **</span>
028808,000035: 
028809,000036:                                                                                                  <span class="co">#  1.    THE TARGET PARAMETERS MAY HAVE BEEN LOADED PRIOR TO THE</span>
028810,000037:                                                                                                  <span class="co">#        EXECUTION OF THIS PROGRAM.</span>
028811,000038:                                                                                                  <span class="co">#  2.    THIS PROGRAM IS APPLICABLE IN EITHER EARTH OR LUNAR ORBIT.</span>
028812,000039:                                                                                                  <span class="co">#  3.    THIS PROGRAM IS DESIGNED FOR ONE-MAN OPERATION, AND SHOULD</span>
028813,000040:                                                                                                  <span class="co">#        BE SELECTED BY THE ASTRONAUT BY DSKY ENTRY V37 E31.</span>
028814,000041: 
028815,000042:                                                                                                  <span class="co">#  SUBROUTINES USED **</span>
028816,000043:                                                                                                  <span class="co">#  </span>
028817,000044:                                                                                                  <span class="co">#  MANUPARM, TTG/N35, R02BOTH, MIDGIM, DISPMGA, FLAGDOWN, BANKCALL,</span>
028818,000045:                                                                                                  <span class="co">#  GOTOPOOH, ENDOFJOB, PHASCHNG, GOFLASHR, GOFLASH.</span>
028819,000046: 
028820,000047:                                                                                                  <span class="co">#  MANUPARM      CALCULATES APOGEE, PERIGEE ALTITUDES AND DELTAV DESIRED</span>
028821,000048:                                                                                                  <span class="co">#                FOR THE MANEUVER.</span>
028822,000049: 
028823,000050:                                                                                                  <span class="co">#  TTG/N35       CLOCKTASK - UPDATES CLOCK.</span>
028824,000051: 
028825,000052:                                                                                                  <span class="co">#  MIDGIM        CALCULATES MIDDLE GIMBAL ANGLE FOR DISPLAY.</span>
028826,000053: 
028827,000054:                                                                                                  <span class="co">#  R02BOTH       IMU - STATUS CHECK ROUTINE.</span>
028828,000055: 
028829,000056:                                                                                                  <span class="co">#  DISPLAYS USED IN P-31LM **</span>
028830,000057: 
028831,000058:                                                                                                  <span class="co">#  V06N33        DISPLAY SOTRED TIG (IN HRS. MINS. SECS)</span>
028832,000059:                                                                                                  <span class="co">#  V06N42        DISPLAY APOGEE, PERIGEE, DELTAV.</span>
028833,000060:                                                                                                  <span class="co">#  V16N35        DISPLAY TIME FROM TIG.</span>
028834,000061:                                                                                                  <span class="co">#  V06N45        TIME FROM IGNITION AND MIDDLE GIMBAL ANGLE.</span>
028835,000062: 
028836,000063:                                                                                                  <span class="co">#  ERASABLE INITIALIZATION REQUIRED **</span>
028837,000064: 
028838,000065:                                                                                                  <span class="co">#  TIG           TIME OF IGNITION                DP      (B+28) CS.</span>
028839,000066: 
028840,000067:                                                                                                  <span class="co">#  DELLT4        DESIRED TIME OF FLIGHT          DP      (B+28) CS</span>
028841,000068:                                                                                                  <span class="co">#                FROM RINIT TO RTARG.</span>
028842,000069:                                                                                                  <span class="co">#  RTARG         RADIUS VECTOR OF TARGET POSITION VECTOR</span>
028843,000070:                                                                                                  <span class="co">#                RADIUS VECTOR   SCALED TO  (B+29)METERS IF EARTH ORBIT</span>
</pre>
</span>
</p>
<table style="text-align: left;" border="1" cellpadding="2" cellspacing="2">
<tbody>
<tr>
<td style="white-space: nowrap; vertical-align: middle;">
<img alt="" src="Apollo32.png" style="width: 32px; height: 32px;" align="left">
</td>
<td style="vertical-align: middle;">
Page 662
</td></tr></tbody></table>
<p class="nobreak">
<span style="font-family: monospace;">
<pre>
028845,000072:                                                                                                  <span class="co">#                RADIUS VECTOR SCALED TO    (B+27)METERS IF MOON ORBIT</span>
028846,000073: 
028847,000074:                                                                                                  <span class="co">#  OUTPUT **</span>
028848,000075: 
028849,000076:                                                                                                  <span class="co">#  HAPO          APOGEE ALTITUDE</span>
028850,000077:                                                                                                  <span class="co">#  HPER          PERIGEE ALTITUDE</span>
028851,000078:                                                                                                  <span class="co">#  VGDISP        MAG.OF DELTAV FOR DISPLAY ,SCALING      B+7 M/CS EARTH</span>
028852,000079:                                                                                                  <span class="co">#                MAG.OF DELTAV FOR DISPLAY, SCALING      B+5 M/CS MOON</span>
028853,000080:                                                                                                  <span class="co">#  MIDGIM        MIDDLE GIMBAL ANGLE</span>
028854,000081:                                                                                                  <span class="co">#  XDELVFLG      RESETS XDELVFLG FOR LAMBERT VG COMPUTATIONS</span>
028855,000082: 
028856,000083:                                                                                                  <span class="co">#  ALARMS OR ABORTS      NONE **</span>
028857,000084: 
028858,000085:                                                                                                  <span class="co">#  RESTARTS ARE VIA GROUP 4 **</span>
028859,000086: 
028860,000087: 35,2000                                           <span class="ps">SETLOC  </span> <a href="TAGS_FOR_RELATIVE_SETLOC_AND_BLANK_BANK_CARDS.agc.html#474C4D">GLM</a>                                   
028861,000088: 35,2000                                           <span class="ps">BANK    </span>                                       
028862,000089: 
028863,000090: 35,2414  E7,1466                                  <span class="ps">EBANK=  </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#53554245584954">SUBEXIT</a>                               
028864,000091: 
028865,000092: 35,2414                                           <span class="ps">COUNT*  </span> $$/<a href="#503331">P31</a>                                
<a name="503331"></a>028866,000093: 35,2414           02325        <span class="sm">P31     </span>           <span class="op">TC      </span> <a href="P32-P35,_P72-P75.agc.html#503230464C474F4E">P20FLGON</a>                              
028867,000094: 35,2415           32025                           <span class="op">CAF     </span> <a href="P30,P37.agc.html#5630364E3333">V06N33</a>                                <span class="co">#  TIG</span>
028868,000095: 35,2416           03651                           <span class="op">TC      </span> <a href="P34-P35,_P74-P75.agc.html#564E504F4F48">VNPOOH</a>                                
028869,000096: 35,2417           06036                           <span class="op">TC      </span> <a href="INTERPRETER.agc.html#494E5450524554">INTPRET</a>                               
028870,000097: 35,2420           71214                           <span class="in">CLEAR   </span> <span class="in">DLOAD     </span>                            
028871,000098: 35,2421           00670                                    <a href="FLAGWORD_ASSIGNMENTS.agc.html#5550444154464C47">UPDATFLG</a>                              
028872,000099: 35,2422           03440                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#544947">TIG</a>                                   
028873,000100: 35,2423           34041                           <span class="in">STCALL  </span> <a href="ORBITAL_INTEGRATION.agc.html#5444454331">TDEC1</a>                                 <span class="co">#  INTEGRATE STATE VECTORS TO TIG</span>
028874,000101: 35,2424           27057                                    <a href="INTEGRATION_INITIALIZATION.agc.html#4C454D50524543">LEMPREC</a>                               
028875,000102: 35,2425           40375                           <span class="in">VLOAD   </span> <span class="in">SETPD     </span>                            
028876,000103: 35,2426           00001                                    <a href="ORBITAL_INTEGRATION.agc.html#52415454">RATT</a>                                  
028877,000104: 35,2427           00001                                    0D                                    
028878,000105: 35,2430           03640                           <span class="in">STORE   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#52544947">RTIG</a>                                  
028879,000106: 35,2431           26327                           <span class="in">STOVL   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#52494E4954">RINIT</a>                                 
028880,000107: 35,2432           00007                                    <a href="ORBITAL_INTEGRATION.agc.html#56415454">VATT</a>                                  
028881,000108: 35,2433           03646                           <span class="in">STORE   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#56544947">VTIG</a>                                  
028882,000109: 35,2434           16335                           <span class="in">STODL   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#56494E4954">VINIT</a>                                 
028883,000110: 35,2435           32364                                    <a href="P32-P35,_P72-P75.agc.html#5033305A45524F">P30ZERO</a>                               
028884,000111: 35,2436           65206                           <span class="in">PUSH    </span> <span class="in">PDDL      </span>                            <span class="co">#  E4 AND NUMIT = 0</span>
028885,000112: 35,2437           03450                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#44454C4C5434">DELLT4</a>                                
028886,000113: 35,2440           66015                           <span class="in">DAD     </span> <span class="in">SXA,1     </span>                            
028887,000114: 35,2441           03440                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#544947">TIG</a>                                   
028888,000115: 35,2442           03375                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#52545831">RTX1</a>                                  
028889,000116: 35,2443           03627                           <span class="in">STORE   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#545041535334">TPASS4</a>                                
028890,000117: 35,2444           45134                           <span class="in">SXA,2   </span> <span class="in">CALL      </span>                            
028891,000118: 35,2445           03376                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#52545832">RTX2</a>                                  
028892,000119: 35,2446           22000                                    <a href="P34-P35,_P74-P75.agc.html#494E495456454C">INITVEL</a>                               
028893,000120: 35,2447           41575                           <span class="in">VLOAD   </span> <span class="in">PUSH      </span>                            
</pre>
</span>
</p>
<table style="text-align: left;" border="1" cellpadding="2" cellspacing="2">
<tbody>
<tr>
<td style="white-space: nowrap; vertical-align: middle;">
<img alt="" src="Apollo32.png" style="width: 32px; height: 32px;" align="left">
</td>
<td style="vertical-align: middle;">
Page 663
</td></tr></tbody></table>
<p class="nobreak">
<span style="font-family: monospace;">
<pre>
028895,000122: 35,2450           03366                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#44454C5645455433">DELVEET3</a>                              
028896,000123: 35,2451           03654                           <span class="in">STORE   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#44454C5653494E">DELVSIN</a>                               
028897,000124: 35,2452           43046                           <span class="in">ABVAL   </span> <span class="in">CLEAR     </span>                            
028898,000125: 35,2453           01267                                    <a href="FLAGWORD_ASSIGNMENTS.agc.html#5844454C56464C47">XDELVFLG</a>                              
028899,000126: 35,2454           37662                           <span class="in">STCALL  </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#564744495350">VGDISP</a>                                
028900,000127: 35,2455           20021                                    <a href="P34-P35,_P74-P75.agc.html#4745542E4C5643">GET.LVC</a>                               
028901,000128: 35,2456           63375                           <span class="in">VLOAD   </span> <span class="in">PDVL      </span>                            
028902,000129: 35,2457           03640                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#52544947">RTIG</a>                                  
028903,000130: 35,2460           02343                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#56495052494D45">VIPRIME</a>                               
028904,000131: 35,2461           77624                           <span class="in">CALL    </span>                                       
028905,000132: 35,2462           46277                                    <a href="P34-P35,_P74-P75.agc.html#5045524941504F31">PERIAPO1</a>                              
028906,000133: 35,2463           77624                           <span class="in">CALL    </span>                                       
028907,000134: 35,2464           46407                                    <a href="P34-P35,_P74-P75.agc.html#53484946545231">SHIFTR1</a>                               
028908,000135: 35,2465           77624                           <span class="in">CALL    </span>                                       <span class="co">#  LIMIT DISPLAY TO 9999.9 N. MI.</span>
028909,000136: 35,2466           45636                                    <a href="R30.agc.html#4D415843484B">MAXCHK</a>                                
028910,000137: 35,2467           16325                           <span class="in">STODL   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#48504552">HPER</a>                                  
028911,000138: 35,2470           00005                                    4D                                    
028912,000139: 35,2471           77624                           <span class="in">CALL    </span>                                       
028913,000140: 35,2472           46407                                    <a href="P34-P35,_P74-P75.agc.html#53484946545231">SHIFTR1</a>                               
028914,000141: 35,2473           77624                           <span class="in">CALL    </span>                                       <span class="co">#  LIMIT DISPLAY TO 9999.9 N. MI.</span>
028915,000142: 35,2474           45636                                    <a href="R30.agc.html#4D415843484B">MAXCHK</a>                                
028916,000143: 35,2475           02323                           <span class="in">STORE   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4841504F">HAPO</a>                                  
028917,000144: 35,2476           77776                           <span class="in">EXIT    </span>                                       
028918,000145: 35,2477           33666                           <span class="op">CAF     </span> <a href="P34-P35,_P74-P75.agc.html#5630364E3831">V06N81</a>                                <span class="co">#  DELVLVC</span>
028919,000146: 35,2500           03651                           <span class="op">TC      </span> <a href="P34-P35,_P74-P75.agc.html#564E504F4F48">VNPOOH</a>                                
028920,000147: 35,2501           32026                           <span class="op">CAF     </span> <a href="P30,P37.agc.html#5630364E3432">V06N42</a>                                <span class="co">#  HAPO, HPER, VGDISP</span>
028921,000148: 35,2502           03651                           <span class="op">TC      </span> <a href="P34-P35,_P74-P75.agc.html#564E504F4F48">VNPOOH</a>                                
028922,000149: 35,2503           06036                           <span class="op">TC      </span> <a href="INTERPRETER.agc.html#494E5450524554">INTPRET</a>                               
<a name="5245564E31363435"></a>028923,000150: 35,2504           45014        <span class="sm">REVN1645</span>           <span class="in">SET     </span> <span class="in">CALL      </span>                            <span class="co">#  TRKMKCNT, TTOGO, +MGA</span>
028924,000151: 35,2505           01071                                    <a href="FLAGWORD_ASSIGNMENTS.agc.html#46494E414C464C47">FINALFLG</a>                              
028925,000152: 35,2506           73542                                    <a href="P34-P35,_P74-P75.agc.html#564E31363435">VN1645</a>                                
028926,000153: 35,2507           77650                           <span class="in">GOTO    </span>                                       
028927,000154: 35,2510           72504                                    <a href="#5245564E31363435">REVN1645</a>                              

End of include-file GENERAL_LAMBERT_AIMPOINT_GUIDANCE.agc.  Parent file is <a href="MAIN.agc.html">MAIN.agc</a>
</pre>
</span>
</p>
</body>
</html>
