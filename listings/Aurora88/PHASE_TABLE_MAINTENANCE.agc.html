<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta content="text/html;charset=ISO-8859-1" http-equiv="Content-Type">
<title>Assembly listing generated by yaYUL</title>
<style type="text/css">
p.nobreak { white-space:nowrap; }
a { text-decoration:none; }
</style>
<style type="text/css">
.op{
font-weight: bold;
color: #993300;
}
</style>
<style type="text/css">
.dn{
color: #009900;
}
</style>
<style type="text/css">
.fe{
color: #FF0000;
}
</style>
<style type="text/css">
.in{
color: #FF6600;
}
</style>
<style type="text/css">
.ps{
color: #336600;
}
</style>
<style type="text/css">
.sm{
color: #0000FF;
}
</style>
<style type="text/css">
.wn{
color: #FF9900;
}
</style>
<style type="text/css">
.co{
font-style: italic;
color: #993399;
}
</style>
</head>
<body>
<p class="nobreak">
<span style="font-family: monospace;">
<pre>
<h1>Source Code</h1>
</pre>
</span>
</p>
<table style="text-align: left;" border="1" cellpadding="2" cellspacing="2">
<tbody>
<tr>
<td style="white-space: nowrap; vertical-align: middle;">
<img alt="" src="Apollo32.png" style="width: 32px; height: 32px;" align="left">
</td>
<td style="vertical-align: middle;">
These source-code files are part of a reconstructed copy of Aurora 88, the
final release of the Lunar Module (LM) Apollo Guidance Computer (AGC) system
test software.
<br><br>
They have been created via disassembly of binary dumps of original core rope
memory modules, part numbers 2003972-011, 2003972-091, and 2003972-111, belonging
to Steve Jurvetson.
<br><br>
Since only binary dumps (rather than listings) of Aurora 88 are available as source material, 
all comments and labels are approximate.
They have been taken from other AGC programs where possible, or, in some places, written
from scratch to match what we believe would have been in the original listing.
</td></tr></tbody></table>

<p class="nobreak">
<span style="font-family: monospace;">
<pre>
005201,000002:                                                                                                  <span class="co">## Copyright:   Public domain.</span>
005202,000003:                                                                                                  <span class="co">## Filename:    PHASE_TABLE_MAINTENANCE.agc</span>
005203,000004:                                                                                                  <span class="co">## Purpose:     A section of Aurora 88.</span>
005204,000005:                                                                                                  <span class="co">##              It is part of the reconstructed source code for the final</span>
005205,000006:                                                                                                  <span class="co">##              release of the Lunar Module system test software. No original</span>
005206,000007:                                                                                                  <span class="co">##              listings of this program are available; instead, this file</span>
005207,000008:                                                                                                  <span class="co">##              was created via disassembly of dumps of Aurora 88 core rope</span>
005208,000009:                                                                                                  <span class="co">##              modules and comparison with other AGC programs.</span>
005209,000010:                                                                                                  <span class="co">## Assembler:   yaYUL</span>
005210,000011:                                                                                                  <span class="co">## Contact:     Ron Burkey &lt;info@sandroid.org>.</span>
005211,000012:                                                                                                  <span class="co">## Website:     www.ibiblio.org/apollo/index.html</span>
005212,000013:                                                                                                  <span class="co">## Mod history: 2023-06-30 MAS  Created from Aurora 12.</span>
005213,000014: 
005214,000015: 
005215,000016:                                                                                                  <span class="co">#        THE FOLLOWING ROUTINES ARE PROVIDED TO MAINTAIN THE PHASE TABLE. TWO ROUTINES ARE AVAILABLE:</span>
005216,000017: 
005217,000018:                                                                                                  <span class="co">#                TC      PHASCHNG        SLOWER BUT LESS STORAGE.</span>
005218,000019:                                                                                                  <span class="co">#                OCT     PPPGG           CHANGE RESTART GROUP GG TO PHASE PPP</span>
005219,000020:                                                                                                  <span class="co">#                                        (PPP IS A SIGNED 8 BIT NUMBER).</span>
005220,000021: 
005221,000022:                                                                                                  <span class="co">#                CA      PPPPP           NEW PHASE ARRIVES IN A.</span>
005222,000023:                                                                                                  <span class="co">#                TC      NEWPHASE</span>
005223,000024:                                                                                                  <span class="co">#                OCT     000GG           UPDATES GG.</span>
005224,000025: 
005225,000026:                                                                                                  <span class="co">#        IN ALL CASES THE OLD PHASE RETURNS IN A. IF THE OLD PHASE WAS NEGATIVE, CALL A ROUTINE USING THE</span>
005226,000027:                                                                                                  <span class="co">#  CORRESPONDING TERMCADR.</span>
005227,000028: 
005228,000029:    4517                                           <span class="ps">SETLOC  </span> <a href="WAITLIST.agc.html#454E445741495446">ENDWAITF</a>                              
005229,000030: 
<a name="5048415343484E47"></a>005230,000031:    4517           00004        <span class="sm">PHASCHNG</span>           <span class="op">INHINT  </span>                                       
005231,000032:    4520           50002                           <span class="op">INDEX   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#51">Q</a>                                     
005232,000033:    4521           30000                           <span class="op">CAF     </span> 0                                     <span class="co">#  GET PARAMETER WORD.</span>
005233,000034:    4522           54077                           <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#5255505452454734">RUPTREG4</a>                              
005234,000035:    4523           75126                           <span class="op">MASK    </span> <a href="PINBALL_GAME__BUTTONS_AND_LIGHTS.agc.html#4C4F5735">LOW5</a>                                  <span class="co">#  GROUP NUMBER 0 - 37.</span>
005235,000036:    4524           60000                           <span class="op">DOUBLE  </span>                                       
005236,000037:    4525           56077                           <span class="op">XCH     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#5255505452454734">RUPTREG4</a>                              
005237,000038:    4526           00006                           <span class="op">EXTEND  </span>                                       
005238,000039:    4527           77642                           <span class="op">MP      </span> <a href="LIST_PROCESSING_INTERPRETER.agc.html#42495439">BIT9</a>                                  <span class="co">#  SIGNED NEW PHASE.</span>
005239,000040:    4530           14537                           <span class="op">TCF     </span> <a href="#50484153434832">PHASCH2</a>                               
005240,000041: 
<a name="4E45575048415345"></a>005241,000042:    4531           00004        <span class="sm">NEWPHASE</span>           <span class="op">INHINT  </span>                                       <span class="co">#  NEW PHASE ARRIVES IN A.</span>
005242,000043:    4532           54077                           <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#5255505452454734">RUPTREG4</a>                              
005243,000044:    4533           50002                           <span class="op">INDEX   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#51">Q</a>                                     
005244,000045:    4534           30000                           <span class="op">CAF     </span> 0                                     <span class="co">#  GROUP NUMBER.</span>
005245,000046:    4535           60000                           <span class="op">DOUBLE  </span>                                       
005246,000047:    4536           56077                           <span class="op">XCH     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#5255505452454734">RUPTREG4</a>                              
005247,000048: 
<a name="50484153434832"></a>005248,000049:    4537           54001        <span class="sm">PHASCH2 </span>           <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4C">L</a>                                     <span class="co">#  DIRECT VERSION.</span>
005249,000050:    4540           40000                           <span class="op">COM     </span>                                       <span class="co">#  COMPLEMENTED VERSION IMMEDIATELY PRE-</span>
005250,000051:    4541           50077                           <span class="op">INDEX   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#5255505452454734">RUPTREG4</a>                              <span class="co">#  CEDES THE DIRECT ONE.</span>
005251,000052:    4542           53073                           <span class="op">DXCH    </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#2D504841534530">-PHASE0</a>                               <span class="co">#  COPIES DISAGREE FOR MINIMUM TIME.</span>
005252,000053:    4543           00006                           <span class="op">EXTEND  </span>                                       
005253,000054:    4544           64560                           <span class="op">BZMF    </span> <a href="#5048415345584954">PHASEXIT</a>                              <span class="co">#  IF NO DERAIL.</span>
005254,000055: 
005255,000056:    4545           54074                           <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#5255505452454731">RUPTREG1</a>                              <span class="co">#  IF NEGATIVE, SAVE ABSOLUTE VALUE OF</span>
005256,000057:    4546           00006                           <span class="op">EXTEND  </span>                                       <span class="co">#  OLD PHASE AND RETURN Q.</span>
005257,000058:    4547           22075                           <span class="op">QXCH    </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#5255505452454732">RUPTREG2</a>                              
005258,000059:    4550           30077                           <span class="op">CA      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#5255505452454734">RUPTREG4</a>                              <span class="co">#  GET BACK GROUP NUMBER.</span>
005259,000060:    4551           00006                           <span class="op">EXTEND  </span>                                       
005260,000061:    4552           77635                           <span class="op">MP      </span> <a href="LIST_PROCESSING_INTERPRETER.agc.html#48414C46">HALF</a>                                  
005261,000062:    4553           50000                           <span class="op">INDEX   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#41">A</a>                                     <span class="co">#  SELECT TERMCADR.</span>
005262,000063:    4554           34564                           <span class="op">CAF     </span> <a href="#5445524D43414452">TERMCADR</a>                              
005263,000064:    4555           04135                           <span class="op">TC      </span> <a href="INTER-BANK_COMMUNICATION.agc.html#49535743414C4C">ISWCALL</a>                               
005264,000065: 
005265,000066:    4556           52075                           <span class="op">DXCH    </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#5255505452454731">RUPTREG1</a>                              <span class="co">#  -OLD PHASE BITS TO A - RETURN -1 TO L.</span>
005266,000067:    4557           22002                           <span class="op">LXCH    </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#51">Q</a>                                     
005267,000068: 
<a name="5048415345584954"></a>005268,000069:    4560           40000        <span class="sm">PHASEXIT</span>           <span class="op">COM     </span>                                       <span class="co">#  RETURN OLD PHASE IN A.</span>
005269,000070:    4561           00003                           <span class="op">RELINT  </span>                                       
005270,000071:    4562           50002                           <span class="op">INDEX   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#51">Q</a>                                     
005271,000072:    4563           00001                           <span class="op">TC      </span> 1                                     
005272,000073: 
<a name="5445524D43414452"></a>005273,000074:    4564           00000        <span class="sm">TERMCADR</span>           <span class="ps">CADR    </span> 10000                                 <span class="co">#  FILLED IN AS NEEDED.</span>
005274,000075:    4565           00000                           <span class="ps">CADR    </span> 10000                                 
005275,000076:    4566           00000                           <span class="ps">CADR    </span> 10000                                 
005276,000077:    4567           00000                           <span class="ps">CADR    </span> 10000                                 
005277,000078:    4570           00000                           <span class="ps">CADR    </span> 10000                                 
005278,000079:    4571           00000                           <span class="ps">CADR    </span> 10000                                 
005279,000080: 
005280,000081:                                                                                                  <span class="co">#        SUBROUTINE TO UPDATE THE PROGRAM NUMBER DISPLAY ON THE DSKY.</span>
005281,000082: 
<a name="4E45574D4F444558"></a>005282,000083:    4572           50002        <span class="sm">NEWMODEX</span>           <span class="op">INDEX   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#51">Q</a>                                     <span class="co">#  UPDATE MODREG.</span>
005283,000084:    4573           30000                           <span class="op">CAF     </span> 0                                     
005284,000085:    4574           24002                           <span class="op">INCR    </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#51">Q</a>                                     
005285,000086:    4575           56276                           <span class="op">XCH     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4D4F44524547">MODREG</a>                                
005286,000087:    4576           40000                           <span class="op">COM     </span>                                       <span class="co">#  IF NO CHANGE IN MODE, RETURN IMMEDIATELY</span>
005287,000088:    4577           60276                           <span class="op">AD      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4D4F44524547">MODREG</a>                                
005288,000089:    4600           00006                           <span class="op">EXTEND  </span>                                       
005289,000090:    4601           14615                           <span class="op">BZF     </span> <a href="#544351">TCQ</a>                                   
005290,000091: 
005291,000092:    4602           34604                           <span class="op">CAF     </span> +2                                    <span class="co">#  CALL PINBALL SUBROUTINE.</span>
005292,000093:    4603           14067                           <span class="op">TCF     </span> <a href="INTER-BANK_COMMUNICATION.agc.html#535743414C4C">SWCALL</a>                                <span class="co">#  WITH Q SET TO CALLERS RETURN.</span>
005293,000094: 
005294,000095:    4604           12001                           <span class="ps">CADR    </span> <a href="PINBALL_GAME__BUTTONS_AND_LIGHTS.agc.html#4453504D4D">DSPMM</a>                                 
005295,000096: 
005296,000097:                                                                                                  <span class="co">#        RETURN TO CALLER +3 IF MODE = THAT AT CALLER +1. OTHERWISE RETURN TO CALLER +2.</span>
005297,000098: 
<a name="434845434B4D4D"></a>005298,000099:    4605           50002        <span class="sm">CHECKMM </span>           <span class="op">INDEX   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#51">Q</a>                                     
005299,000100:    4606           40000                           <span class="op">CS      </span> 0                                     
005300,000101:    4607           60276                           <span class="op">AD      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4D4F44524547">MODREG</a>                                
005301,000102:    4610           00006                           <span class="op">EXTEND  </span>                                       
005302,000103:    4611           14614                           <span class="op">BZF     </span> +3                                    
005303,000104: 
005304,000105:    4612           50002                           <span class="op">INDEX   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#51">Q</a>                                     
005305,000106:    4613           00001                           <span class="op">TC      </span> 1                                     <span class="co">#  NO MATCH.</span>
005306,000107: 
005307,000108:    4614           50002                           <span class="op">INDEX   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#51">Q</a>                                     
<a name="544351"></a>005308,000109:    4615           00002        <span class="sm">TCQ     </span>           <span class="op">TC      </span> 2                                     <span class="co">#  (ALWAYS AVAILABLE TO BZF &amp; BZMF)</span>
005309,000110: 
<a name="454E4450484D4E46"></a>005310,000111:    4616                        <span class="sm">ENDPHMNF</span>           <span class="ps">EQUALS  </span>                                       

End of include-file PHASE_TABLE_MAINTENANCE.agc.  Parent file is <a href="MAIN.agc.html">MAIN.agc</a>
</pre>
</span>
</p>
</body>
</html>
