<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta content="text/html;charset=ISO-8859-1" http-equiv="Content-Type">
<title>Assembly listing generated by yaYUL</title>
<style type="text/css">
p.nobreak { white-space:nowrap; }
a { text-decoration:none; }
</style>
<style type="text/css">
.op{
font-weight: bold;
color: #993300;
}
</style>
<style type="text/css">
.dn{
color: #009900;
}
</style>
<style type="text/css">
.fe{
color: #FF0000;
}
</style>
<style type="text/css">
.in{
color: #FF6600;
}
</style>
<style type="text/css">
.ps{
color: #336600;
}
</style>
<style type="text/css">
.sm{
color: #0000FF;
}
</style>
<style type="text/css">
.wn{
color: #FF9900;
}
</style>
<style type="text/css">
.co{
font-style: italic;
color: #993399;
}
</style>
</head>
<body>
<p class="nobreak">
<span style="font-family: monospace;">
<pre>
<h1>Source Code</h1>
</pre>
</span>
</p>
<table style="text-align: left;" border="1" cellpadding="2" cellspacing="2">
<tbody>
<tr>
<td style="white-space: nowrap; vertical-align: middle;">
<img alt="" src="Apollo32.png" style="width: 32px; height: 32px;" align="left">
</td>
<td style="vertical-align: middle;">
These source-code files are part of a reconstructed copy of Aurora 88, the
final release of the Lunar Module (LM) Apollo Guidance Computer (AGC) system
test software.
<br><br>
They have been created via disassembly of binary dumps of original core rope
memory modules, part numbers 2003972-011, 2003972-091, and 2003972-111, belonging
to Steve Jurvetson.
<br><br>
Since only binary dumps (rather than listings) of Aurora 88 are available as source material, 
all comments and labels are approximate.
They have been taken from other AGC programs where possible, or, in some places, written
from scratch to match what we believe would have been in the original listing.
</td></tr></tbody></table>

<p class="nobreak">
<span style="font-family: monospace;">
<pre>
001267,000002:                                                                                                  <span class="co">## Copyright:   Public domain.</span>
001268,000003:                                                                                                  <span class="co">## Filename:    INTER-BANK_COMMUNICATION.agc</span>
001269,000004:                                                                                                  <span class="co">## Purpose:     A section of Aurora 88.</span>
001270,000005:                                                                                                  <span class="co">##              It is part of the reconstructed source code for the final</span>
001271,000006:                                                                                                  <span class="co">##              release of the Lunar Module system test software. No original</span>
001272,000007:                                                                                                  <span class="co">##              listings of this program are available; instead, this file</span>
001273,000008:                                                                                                  <span class="co">##              was created via disassembly of dumps of Aurora 88 core rope</span>
001274,000009:                                                                                                  <span class="co">##              modules and comparison with other AGC programs.</span>
001275,000010:                                                                                                  <span class="co">## Assembler:   yaYUL</span>
001276,000011:                                                                                                  <span class="co">## Contact:     Ron Burkey &lt;info@sandroid.org>.</span>
001277,000012:                                                                                                  <span class="co">## Website:     www.ibiblio.org/apollo/index.html</span>
001278,000013:                                                                                                  <span class="co">## Mod history: 2023-06-30 MAS  Created from Aurora 12.</span>
001279,000014:                                                                                                  <span class="co">##              2023-07-12 MAS  Updated for Aurora 88.</span>
001280,000015: 
001281,000016: 
001282,000017:                                                                                                  <span class="co">#           THE FOLLOWING ROUTINE CAN BE USED TO CALL A SUBROUTINE IN ANOTHER BANK. IN THE BANKCALL VERSION, THE</span>
001283,000018:                                                                                                  <span class="co">#  CADR OF THE SUBROUTINE IMMEDIATELY FOLLOWS THE  TC BANKCALL  INSTRUCTION, WITH C(A) AND C(L) PRESERVED.</span>
001284,000019: 
001285,000020:    4063                                           <span class="ps">SETLOC  </span> <a href="INTERRUPT_LEAD_INS.agc.html#454E44494E544646">ENDINTFF</a>                              
<a name="42414E4B43414C4C"></a>001286,000021:    4063           52120        <span class="sm">BANKCALL</span>           <span class="op">DXCH    </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#42554632">BUF2</a>                                  <span class="co">#  SAVE INCOMING A,L.</span>
001287,000022:    4064           50002                           <span class="op">INDEX   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#51">Q</a>                                     <span class="co">#  PICK UP CADR.</span>
001288,000023:    4065           30000                           <span class="op">CA      </span> 0                                     
001289,000024:    4066           24002                           <span class="op">INCR    </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#51">Q</a>                                     <span class="co">#  SO WE RETURN TO THE LOC. AFTER THE CADR.</span>
001290,000025: 
001291,000026:                                                                                                  <span class="co">#           SWCALL IS IDENTICAL TO BANKCALL, EXCEPT THAT THE CADR ARRIVES IN A.</span>
001292,000027: 
<a name="535743414C4C"></a>001293,000028:    4067           54001        <span class="sm">SWCALL  </span>           <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4C">L</a>                                     
001294,000029:    4070           22004                           <span class="op">LXCH    </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4642414E4B">FBANK</a>                                 <span class="co">#  SWITCH BANKS, SAVING RETURN.</span>
001295,000030:    4071           76426                           <span class="op">MASK    </span> <a href="LIST_PROCESSING_INTERPRETER.agc.html#4C4F573130">LOW10</a>                                 <span class="co">#  GET SUB-ADDRESS OF CADR.</span>
001296,000031:    4072           56002                           <span class="op">XCH     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#51">Q</a>                                     <span class="co">#  A,L NOW CONTAINS DP RETURN.</span>
001297,000032:    4073           52120                           <span class="op">DXCH    </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#42554632">BUF2</a>                                  <span class="co">#  RESTORING INPUTS IF THIS IS A BANKCALL.</span>
001298,000033:    4074           50002                           <span class="op">INDEX   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#51">Q</a>                                     
001299,000034:    4075           02000                           <span class="op">TC      </span> 10000                                 <span class="co">#  SETTING Q TO SWRETURN.</span>
001300,000035: 
<a name="535752455455524E"></a>001301,000036:    4076           56120        <span class="sm">SWRETURN</span>           <span class="op">XCH     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#42554632">BUF2</a>       +1                         <span class="co">#  COMES HERE TO RETURN TO CALLER. C(A,L)</span>
001302,000037:    4077           56004                           <span class="op">XCH     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4642414E4B">FBANK</a>                                 <span class="co">#  ARE PRESERVED FOR RETURN.</span>
001303,000038:    4100           56120                           <span class="op">XCH     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#42554632">BUF2</a>       +1                         
001304,000039:    4101           00117                           <span class="op">TC      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#42554632">BUF2</a>                                  
001305,000040: 
001306,000041:                                                                                                  <span class="co">#           THE FOLLOWING ROUTINE CAN BE USED AS A UNILATERAL JUMP WITH C(A,L) PRESERVED AND THE CADR IMMEDIATELY</span>
001307,000042:                                                                                                  <span class="co">#  FOLLOWING THE TC POSTJUMP INSTRUCTION.</span>
001308,000043: 
<a name="504F53544A554D50"></a>001309,000044:    4102           56002        <span class="sm">POSTJUMP</span>           <span class="op">XCH     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#51">Q</a>                                     <span class="co">#  SAVE INCOMING C(A).</span>
001310,000045:    4103           50000                           <span class="op">INDEX   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#41">A</a>                                     <span class="co">#  GET CADR.</span>
001311,000046:    4104           30000                           <span class="op">CA      </span> 0                                     
001312,000047: 
001313,000048:                                                                                                  <span class="co">#           BANKJUMP IS THE SAME AS POSTJUMP, EXCEPT THAT THE CADR ARRIVES IN A.</span>
001314,000049: 
<a name="42414E4B4A554D50"></a>001315,000050:    4105           54004        <span class="sm">BANKJUMP</span>           <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4642414E4B">FBANK</a>                                 
001316,000051:    4106           76426                           <span class="op">MASK    </span> <a href="LIST_PROCESSING_INTERPRETER.agc.html#4C4F573130">LOW10</a>                                 
001317,000052:    4107           56002                           <span class="op">XCH     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#51">Q</a>                                     <span class="co">#  RESTORING INPUT C(A) IF THIS WAS A</span>
001318,000053:    4110           50002                           <span class="op">INDEX   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#51">Q</a>                                     <span class="co">#  POSTJUMP.</span>
001319,000054:    4111           12000                           <span class="op">TCF     </span> 10000                                 
001320,000055: 
001321,000056:                                                                                                  <span class="co">#  THE FOLLOWING ROUTINE GETS THE RETURN CADR SAVED BY SWCALL OR BANKCALL AND LEAVES IT IN A.</span>
001322,000057: 
<a name="4D414B4543414452"></a>001323,000058:    4112           36426        <span class="sm">MAKECADR</span>           <span class="op">CAF     </span> <a href="LIST_PROCESSING_INTERPRETER.agc.html#4C4F573130">LOW10</a>                                 
001324,000059:    4113           70117                           <span class="op">MASK    </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#42554632">BUF2</a>                                  
001325,000060:    4114           60120                           <span class="op">AD      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#42554632">BUF2</a>       +1                         
001326,000061:    4115           00002                           <span class="op">TC      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#51">Q</a>                                     
001327,000062: 
001328,000063:                                                                                                  <span class="co">#  THE FOLLOWING ROUTINE OBTAINS THE TWO WORDS BEGINNING AT THE ADDRESS ARRIVING IN A, AND LEAVES THEM IN</span>
001329,000064:                                                                                                  <span class="co">#  A,L.</span>
001330,000065: 
<a name="4441544143414C4C"></a>001331,000066:    4116           54001        <span class="sm">DATACALL</span>           <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4C">L</a>                                     
001332,000067:    4117           22004                           <span class="op">LXCH    </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4642414E4B">FBANK</a>                                 
001333,000068:    4120           22121                           <span class="op">LXCH    </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4D5054454D50">MPTEMP</a>                                <span class="co">#  SAVE FORMER BANK.</span>
001334,000069:    4121           76426                           <span class="op">MASK    </span> <a href="LIST_PROCESSING_INTERPRETER.agc.html#4C4F573130">LOW10</a>                                 
001335,000070:    4122           00006                           <span class="op">EXTEND  </span>                                       
001336,000071:    4123           50000                           <span class="op">INDEX   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#41">A</a>                                     
001337,000072:    4124           32001                           <span class="op">DCA     </span> 10000                                 
001338,000073: 
001339,000074:    4125           56121                           <span class="op">XCH     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4D5054454D50">MPTEMP</a>                                
001340,000075:    4126           54004                           <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4642414E4B">FBANK</a>                                 <span class="co">#  RESTORE FBANK.</span>
001341,000076:    4127           30121                           <span class="op">CA      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4D5054454D50">MPTEMP</a>                                
001342,000077:    4130           00002                           <span class="op">TC      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#51">Q</a>                                     
001343,000078: 
001344,000079:                                                                                                  <span class="co">#  THE FOLLOWING ROUTINES ARE IDENTICAL TO BANKCALL AND SWCALL EXCEPT THAT THEY ARE USED IN INTERRUPT.</span>
001345,000080: 
<a name="49424E4B43414C4C"></a>001346,000081:    4131           52077        <span class="sm">IBNKCALL</span>           <span class="op">DXCH    </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#5255505452454733">RUPTREG3</a>                              <span class="co">#  USES RUPTREG3,4 FOR DP RETURN ADDRESS.</span>
001347,000082:    4132           50002                           <span class="op">INDEX   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#51">Q</a>                                     
001348,000083:    4133           30000                           <span class="op">CAF     </span> 0                                     
001349,000084:    4134           24002                           <span class="op">INCR    </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#51">Q</a>                                     
001350,000085: 
<a name="49535743414C4C"></a>001351,000086:    4135           54001        <span class="sm">ISWCALL </span>           <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4C">L</a>                                     
001352,000087:    4136           22004                           <span class="op">LXCH    </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4642414E4B">FBANK</a>                                 
001353,000088:    4137           76426                           <span class="op">MASK    </span> <a href="LIST_PROCESSING_INTERPRETER.agc.html#4C4F573130">LOW10</a>                                 
001354,000089:    4140           56002                           <span class="op">XCH     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#51">Q</a>                                     
001355,000090:    4141           52077                           <span class="op">DXCH    </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#5255505452454733">RUPTREG3</a>                              
001356,000091:    4142           50002                           <span class="op">INDEX   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#51">Q</a>                                     
001357,000092:    4143           02000                           <span class="op">TC      </span> 10000                                 
001358,000093: 
<a name="495357524554524E"></a>001359,000094:    4144           56077        <span class="sm">ISWRETRN</span>           <span class="op">XCH     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#5255505452454734">RUPTREG4</a>                              
001360,000095:    4145           56004                           <span class="op">XCH     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4642414E4B">FBANK</a>                                 
001361,000096:    4146           56077                           <span class="op">XCH     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#5255505452454734">RUPTREG4</a>                              
001362,000097:    4147           00076                           <span class="op">TC      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#5255505452454733">RUPTREG3</a>                              
001363,000098: 
<a name="454E4449424E4B46"></a>001364,000099:    4150                        <span class="sm">ENDIBNKF</span>           <span class="ps">EQUALS  </span>                                       

End of include-file INTER-BANK_COMMUNICATION.agc.  Parent file is <a href="MAIN.agc.html">MAIN.agc</a>
</pre>
</span>
</p>
</body>
</html>
